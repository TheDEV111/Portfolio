import{j as h,m as P,A as cl}from"./animations-DYXmlcci.js";import{b as ul,r as Je,a as hl}from"./vendor-BvOuhz89.js";import{N as Ii,L as go,B as dl,R as fl,a as In}from"./router-ChbsALB7.js";import{G as vt,C as es,T as ml,a as Et,L as ts,b as ns,M as jn,B as pl,E as rs,c as gl,d as yl,e as _l,f as vl,A as El,R as wl,g as xl,D as Tl,h as Ai,i as bl,j as Il,P as Al,k as Rl,U as Cl,l as Nl,S as Sl}from"./icons-l6M0ahSI.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function t(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(i){if(i.ep)return;i.ep=!0;const o=t(i);fetch(i.href,o)}})();var Lr={},Ri=ul;Lr.createRoot=Ri.createRoot,Lr.hydrateRoot=Ri.hydrateRoot;function Pl(n){return vt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",strokeWidth:"2",d:"M9,15 L9,23 L1,23 L1,15 L9,15 Z M23,15 L23,23 L15,23 L15,15 L23,15 Z M9,1 L9,9 L1,9 L1,1 L9,1 Z M23,1 L23,9 L15,9 L15,1 L23,1 Z"},child:[]}]})(n)}function Vl(n){return vt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M347.1 24.6c7.7-18.6 28-28.5 47.4-23.2l88 24C499.9 30.2 512 46 512 64c0 247.4-200.6 448-448 448c-18 0-33.8-12.1-38.6-29.5l-24-88c-5.3-19.4 4.6-39.7 23.2-47.4l96-40c16.3-6.8 35.2-2.1 46.3 11.6L207.3 368c70.4-33.3 127.4-90.3 160.7-160.7L318.7 167c-13.7-11.2-18.4-30-11.6-46.3l40-96z"},child:[]}]})(n)}function Dl(n){return vt({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z"},child:[]}]})(n)}function kl(n){return vt({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M280.37 148.26L96 300.11V464a16 16 0 0 0 16 16l112.06-.29a16 16 0 0 0 15.92-16V368a16 16 0 0 1 16-16h64a16 16 0 0 1 16 16v95.64a16 16 0 0 0 16 16.05L464 480a16 16 0 0 0 16-16V300L295.67 148.26a12.19 12.19 0 0 0-15.3 0zM571.6 251.47L488 182.56V44.05a12 12 0 0 0-12-12h-56a12 12 0 0 0-12 12v72.61L318.47 43a48 48 0 0 0-61 0L4.34 251.47a12 12 0 0 0-1.6 16.9l25.5 31A12 12 0 0 0 45.15 301l235.22-193.74a12.19 12.19 0 0 1 15.3 0L530.9 301a12 12 0 0 0 16.9-1.6l25.5-31a12 12 0 0 0-1.7-16.93z"},child:[]}]})(n)}function jl(n){return vt({attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"},child:[]}]})(n)}const Ol="/assets/imageProfile-Dx3zCAuU.JPG";function Ml(n){return vt({attr:{viewBox:"0 0 24 24",fill:"none"},child:[{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M16 9C16 11.2091 14.2091 13 12 13C9.79086 13 8 11.2091 8 9C8 6.79086 9.79086 5 12 5C14.2091 5 16 6.79086 16 9ZM14 9C14 10.1046 13.1046 11 12 11C10.8954 11 10 10.1046 10 9C10 7.89543 10.8954 7 12 7C13.1046 7 14 7.89543 14 9Z",fill:"currentColor"},child:[]},{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M12 1C5.92487 1 1 5.92487 1 12C1 18.0751 5.92487 23 12 23C18.0751 23 23 18.0751 23 12C23 5.92487 18.0751 1 12 1ZM3 12C3 14.0902 3.71255 16.014 4.90798 17.5417C6.55245 15.3889 9.14627 14 12.0645 14C14.9448 14 17.5092 15.3531 19.1565 17.4583C20.313 15.9443 21 14.0524 21 12C21 7.02944 16.9706 3 12 3C7.02944 3 3 7.02944 3 12ZM12 21C9.84977 21 7.87565 20.2459 6.32767 18.9878C7.59352 17.1812 9.69106 16 12.0645 16C14.4084 16 16.4833 17.1521 17.7538 18.9209C16.1939 20.2191 14.1881 21 12 21Z",fill:"currentColor"},child:[]}]})(n)}const Jn=()=>{const[n,e]=Je.useState(!1),t=[{icon:h.jsx(kl,{size:20}),path:"/",label:"Home"},{icon:h.jsx(Pl,{size:20}),path:"/projects",label:"Projects"},{icon:h.jsx(Ml,{size:20}),path:"/about",label:"About"},{icon:h.jsx(Vl,{size:20}),path:"/contact",label:"Contact"}];return h.jsx("nav",{className:"fixed top-0 left-0 right-0 bg-gray-900 backdrop-blur-sm shadow-sm z-50",children:h.jsxs("div",{className:"max-w-6xl mx-auto px-4",children:[h.jsxs("div",{className:"flex items-center justify-between h-16",children:[h.jsxs("div",{className:"flex items-center space-x-3",children:[h.jsx("img",{src:Ol,alt:"Henry Agukwe",className:"w-10 h-15 rounded-full object-cover border-2 border-gray-200"}),h.jsx("h1",{className:"text-lg font-bold text-gray-600 hidden sm:block",children:"Henry Agukwe"})]}),h.jsx("div",{className:"hidden md:flex items-center space-x-8",children:t.map((s,i)=>h.jsxs(Ii,{to:s.path,className:({isActive:o})=>`group flex items-center space-x-2 px-3 py-2 rounded-lg relative overflow-hidden
                  ${o?"text-emerald-500 bg-emerald-500/10":"text-gray-300 hover:text-emerald-500 hover:bg-gray-800"} transition-all duration-300`,children:[h.jsx("span",{className:"relative z-10",children:s.icon}),h.jsx("span",{className:"relative z-10 font-medium",children:s.label})]},i))}),h.jsx("div",{className:"md:hidden",children:h.jsx("button",{onClick:()=>e(!n),className:"text-gray-300 hover:text-emerald-500 focus:outline-none focus:text-emerald-500 p-2","aria-label":"Toggle menu",children:n?h.jsx(jl,{size:24}):h.jsx(Dl,{size:24})})})]}),n&&h.jsx("div",{className:"md:hidden",children:h.jsx("div",{className:"px-2 pt-2 pb-3 space-y-1 sm:px-3 bg-gray-800 rounded-lg mt-2",children:t.map((s,i)=>h.jsxs(Ii,{to:s.path,onClick:()=>e(!1),className:({isActive:o})=>`flex items-center space-x-2 px-3 py-2 rounded-md text-base font-medium transition-colors duration-300
                    ${o?"text-emerald-500 bg-emerald-500/10":"text-gray-300 hover:text-emerald-500 hover:bg-gray-700"}`,children:[s.icon,h.jsx("span",{children:s.label})]},i))})})]})})},Ll=()=>{const n=[{icon:Et,href:"https://github.com/Henryno111",label:"GitHub"},{icon:ts,href:"https://linkedin.com/in/agukwe-henry",label:"LinkedIn"},{icon:ns,href:"https://x.com/@boy_gene_us",label:"Twitter"},{icon:jn,href:"mailto:Henryagukwe01@gmail.com",label:"Email"}],e=["React","TypeScript","Node.js","Python","MongoDB","Next.js"];return h.jsxs("div",{className:"min-h-screen bg-gray-950 flex flex-col lg:flex-row",children:[h.jsxs(P.div,{initial:{opacity:0,y:50,x:0},animate:{opacity:1,y:0,x:0},transition:{duration:.8},className:"w-full lg:w-1/2 min-h-[60vh] lg:min-h-screen bg-gradient-to-br from-gray-950 via-gray-900 to-gray-800 p-6 sm:p-8 lg:p-16 flex items-center justify-center relative overflow-hidden",children:[h.jsx("div",{className:"absolute inset-0 opacity-5",children:h.jsx("pre",{className:"text-xs sm:text-sm text-green-500 font-mono",children:`function Developer() {
  const skills = ['React', 'TypeScript', 'Node.js'];
  const passion = 'Building amazing web experiences';
  
  return (
    <div className="developer">
      <h1>Hello World!</h1>
      <p>{passion}</p>
    </div>
  );
}

export default Developer;`})}),h.jsx("div",{className:"relative z-10 text-center lg:text-left max-w-xl",children:h.jsxs(P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.2},children:[h.jsxs("h1",{className:"text-4xl sm:text-5xl lg:text-6xl font-bold text-white mb-2",children:["Hi, I'm"," ",h.jsx("span",{className:"text-emerald-500",children:"Henry"}),h.jsx("span",{className:"text-emerald-500",children:"."})]}),h.jsx(P.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.8,delay:.4},children:h.jsxs("h2",{className:"text-xl sm:text-2xl lg:text-3xl text-gray-400 mb-6",children:["Full Stack Developer &",h.jsx("span",{className:"text-emerald-500",children:" Smart Contract developer"})]})}),h.jsx("p",{className:"text-base sm:text-lg text-gray-400 mb-8",children:"I design dynamic, responsive web applications that blend innovation with seamless user experiences. With over 2 years of expertise, I create products that captivate and engage users, turning ideas into impactful digital solutions."}),h.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 sm:space-x-4 mb-8",children:[h.jsx(go,{to:"/projects",children:h.jsxs(P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"bg-emerald-500 text-gray-900 px-6 py-3 rounded-lg font-semibold hover:bg-emerald-400 transition-colors duration-300 flex items-center gap-2",children:[h.jsx(es,{className:"w-5 h-5"}),"View My Work"]})}),h.jsxs(P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"border-2 border-emerald-500 text-emerald-500 px-6 py-3 rounded-lg font-semibold hover:bg-emerald-500 hover:text-gray-900 transition-all duration-300 flex items-center gap-2",children:[h.jsx(ml,{className:"w-5 h-5"}),"Download Resume"]})]}),h.jsx("div",{className:"flex justify-center lg:justify-start space-x-4",children:n.map((t,s)=>h.jsx(P.a,{href:t.href,target:"_blank",rel:"noopener noreferrer",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6+s*.1},whileHover:{scale:1.1},className:"w-10 h-10 border-2 border-gray-700 rounded-lg flex items-center justify-center text-gray-400 hover:text-emerald-500 hover:border-emerald-500 transition-colors duration-300",children:h.jsx(t.icon,{className:"w-5 h-5"})},t.label))})]})})]}),h.jsxs(P.div,{initial:{opacity:0,y:50,x:0},animate:{opacity:1,y:0,x:0},transition:{duration:.8},className:"w-full lg:w-1/2 min-h-[40vh] lg:min-h-screen relative overflow-hidden bg-gray-900",children:[h.jsx(P.div,{initial:{scale:1.2},animate:{scale:1},transition:{duration:1.5},className:"h-full flex items-center justify-center p-8",children:h.jsxs("div",{className:"text-center max-w-md",children:[h.jsx(P.h3,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"text-2xl sm:text-3xl font-bold text-white mb-8",children:"Technologies I Love"}),h.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-4 w-full max-w-2xl",children:e.map((t,s)=>h.jsx(P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2+s*.1},className:"bg-gray-800 p-4 rounded-lg border border-gray-700 hover:border-emerald-500 transition-colors duration-300",children:h.jsxs("div",{className:"text-center",children:[h.jsx("h3",{className:"text-emerald-500 font-mono text-sm mb-2",children:`<${t} />`}),h.jsx("p",{className:"text-gray-400 text-sm",children:"2+ years"})]})},t))})]})}),h.jsxs(P.div,{animate:{y:[-10,10,-10]},transition:{duration:4,repeat:1/0,repeatType:"reverse"},className:"absolute bottom-4 right-4 sm:bottom-8 sm:right-8 bg-gray-800/90 backdrop-blur-sm p-4 sm:p-6 rounded-lg border border-gray-700 max-w-[90%] sm:max-w-xs",children:[h.jsx("h3",{className:"text-emerald-500 font-semibold mb-2",children:"Latest Project"}),h.jsx("p",{className:"text-gray-300 text-sm",children:"Built a real-time analytics dashboard using React, Node.js, and WebSocket"})]})]})]})},Fl=()=>{const n=[{title:"DOCmeet",description:"A Real-time mobile responsive medical appointment and consultation web application",longDescription:"A comprehensive healthcare platform that connects patients with doctors through real-time video consultations, appointment scheduling, and medical record management.",tech:["React","Node.js","ExpressJS","MongoDB"],github:"https://github.com/Henryno111/DOCmeet_web_app/tree/main",live:"https://do-cmeet-web-app.vercel.app/",image:"/Docmeet.png",category:"Full Stack",features:["Real-time video consultations","Appointment scheduling","Medical record management","Responsive design"],challenges:"Implementing real-time video streaming and ensuring HIPAA compliance",outcome:"Successfully deployed with positive user feedback and improved healthcare accessibility"},{title:"GTF(Green Tourism Fund)",description:"Decentralized application for funding and wildlife projects using blockchain technology.",longDescription:"A blockchain-based platform for transparent funding of environmental and wildlife conservation projects using smart contracts.",tech:["Clarity","Vite","Ethereum"],github:"https://github.com/orgs/GreenTourismFund-GTF/repositories",live:"https://gtf.vercel.app/",image:"/GTF.png",category:"Blockchain",features:["Smart contract funding","Transparent transactions","Project tracking","Community governance"],challenges:"Creating secure smart contracts and ensuring scalability",outcome:"Launched successfully with multiple funded conservation projects"},{title:"Bridgarr",description:"Full-stack e-commerce/escrow solution with features like cart management, payment processing, and admin dashboard.",longDescription:"A comprehensive e-commerce platform with integrated escrow services, providing secure transactions for buyers and sellers.",tech:["Next.js","Postgresql","Django","TypeScript"],github:"https://github.com/username/ecommerce",live:"https://app.bridgarr.com.ng/",image:"/Bridgarr.png",category:"Full Stack",features:["Secure escrow system","Payment processing","Admin dashboard","Cart management"],challenges:"Implementing secure payment processing and escrow mechanisms",outcome:"Deployed with successful transactions and positive merchant feedback"}];return h.jsxs("div",{className:"min-h-screen bg-gray-950 py-16 px-6 sm:px-8 lg:px-16",children:[h.jsxs(P.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6},className:"max-w-7xl mx-auto mb-16",children:[h.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[h.jsx(pl,{className:"text-emerald-500 w-6 h-6"}),h.jsx("h2",{className:"text-3xl sm:text-4xl font-bold text-white",children:"Featured Projects"})]}),h.jsx("p",{className:"text-gray-400 text-lg max-w-2xl",children:"Here are some of my recent projects that showcase my skills in full-stack development, blockchain technology, and modern web applications."}),h.jsx("div",{className:"text-center mt-8",children:h.jsx(go,{to:"/projects",children:h.jsx(P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"bg-emerald-500 text-gray-900 px-6 py-3 rounded-lg font-semibold hover:bg-emerald-400 transition-colors duration-300",children:"View All Projects"})})})]}),h.jsx("div",{className:"max-w-7xl mx-auto grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:n.map((e,t)=>h.jsxs(P.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6,delay:t*.1},whileHover:{y:-5},className:"bg-gray-900 rounded-xl overflow-hidden border border-gray-800 hover:border-emerald-500 transition-colors duration-300",children:[h.jsxs("div",{className:"relative overflow-hidden",children:[h.jsx("img",{src:e.image,alt:e.title,className:"w-full h-48 object-cover"}),h.jsx("div",{className:"absolute inset-0 bg-gray-900/60 opacity-0 hover:opacity-100 transition-opacity duration-300 flex items-center justify-center",children:h.jsx(P.div,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"bg-emerald-500 text-gray-900 px-4 py-2 rounded-lg font-semibold",children:"View Details"})})]}),h.jsxs("div",{className:"p-6",children:[h.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:e.title}),h.jsx("p",{className:"text-gray-400 text-sm mb-4",children:e.description}),h.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:e.tech.map(s=>h.jsx("span",{className:"bg-gray-800 text-emerald-500 px-2 py-1 rounded text-xs font-medium",children:s},s))}),h.jsxs("div",{className:"flex gap-3",children:[h.jsxs(P.a,{href:e.github,target:"_blank",rel:"noopener noreferrer",whileHover:{scale:1.05},whileTap:{scale:.95},className:"flex items-center gap-2 bg-gray-800 text-gray-300 px-3 py-2 rounded-lg hover:bg-gray-700 transition-colors duration-300 text-sm",children:[h.jsx(Et,{className:"w-4 h-4"}),"Code"]}),h.jsxs(P.a,{href:e.live,target:"_blank",rel:"noopener noreferrer",whileHover:{scale:1.05},whileTap:{scale:.95},className:"flex items-center gap-2 bg-emerald-500 text-gray-900 px-3 py-2 rounded-lg hover:bg-emerald-400 transition-colors duration-300 text-sm font-medium",children:[h.jsx(rs,{className:"w-4 h-4"}),"Live Demo"]})]})]})]},e.title))})]})},Yn=()=>{const n=[{icon:Et,href:"https://github.com/Henryno111",label:"GitHub"},{icon:ns,href:"https://x.com/@boy_gene_us",label:"Twitter"},{icon:ts,href:"https://linkedin.com/in/agukwe-henry",label:"LinkedIn"},{icon:jn,href:"mailto:Henryagukwe01@gmail.com",label:"Email"}],e=[{name:"Home",href:"/"},{name:"Projects",href:"/projects"},{name:"About",href:"/about"},{name:"Contact",href:"/contact"}];return h.jsx("footer",{className:"bg-gradient-to-br from-gray-950 via-gray-900 to-gray-800",children:h.jsxs("div",{className:"max-w-7xl mx-auto px-6 sm:px-8 lg:px-16 py-12",children:[h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[h.jsxs("div",{className:"space-y-4",children:[h.jsx("h3",{className:"text-xl font-bold text-white",children:"Henry Agukwe"}),h.jsx("p",{className:"text-gray-400 text-sm",children:"Full Stack Developer passionate about creating innovative digital solutions and exploring the possibilities of blockchain technology."})]}),h.jsxs("div",{className:"space-y-4",children:[h.jsx("h4",{className:"text-lg font-semibold text-white",children:"Quick Links"}),h.jsx("ul",{className:"space-y-2",children:e.map(t=>h.jsx("li",{children:h.jsx("a",{href:t.href,className:"text-gray-400 hover:text-emerald-500 transition-colors duration-300 text-sm",children:t.name})},t.name))})]}),h.jsxs("div",{className:"space-y-4",children:[h.jsx("h4",{className:"text-lg font-semibold text-white",children:"Connect"}),h.jsx("div",{className:"flex space-x-4",children:n.map(t=>h.jsx("a",{href:t.href,target:"_blank",rel:"noopener noreferrer",className:"w-10 h-10 bg-gray-800 rounded-lg flex items-center justify-center text-gray-400 hover:text-emerald-500 hover:bg-gray-700 transition-all duration-300","aria-label":t.label,children:h.jsx(t.icon,{className:"w-5 h-5"})},t.label))})]})]}),h.jsx("div",{className:"border-t border-gray-800 mt-8 pt-8 text-center",children:h.jsxs("p",{className:"text-gray-400 text-sm",children:["© ",new Date().getFullYear()," Henry Agukwe. All rights reserved."]})})]})})},Bl=()=>h.jsxs("div",{className:"min-h-screen",children:[h.jsx(Jn,{}),h.jsxs("main",{className:"pt-16",children:[h.jsx(Ll,{}),h.jsx(Fl,{})]}),h.jsx("div",{className:"pt-2",children:h.jsx(Yn,{})})]}),Ul=()=>{const n=[{title:"Frontend Developer Intern",company:"Sharperly NG",period:"2024",description:"Contributed to web application development, introduced to Nextjs app router and redesigned SVG assets."},{title:"Full Stack Developer",company:"HitoAI",period:"2024 - Present",description:"Developed and maintained web applications using React, Node.js, Firebase and MongoDB. Implemented responsive designs."},{title:"Smart Contract Developer",company:"Freelance",period:"2024 - Present",description:"Built and audited smart contracts for DeFi protocols. Implemented secure and gas-efficient solutions using Clarity and Solidity."}],e=[{degree:"Computer Science",institution:"University of Nigeria, Nsukka",period:"2021 - Present",description:"Currently pursuing a Bachelor's degree in Computer Science with a focus on software engineering and data structures."}],t=["JavaScript/TypeScript","React.js","Node.js","Python","MongoDB","PostgreSQL","Firebase","Solidity","Clarity","Git/GitHub","Docker","AWS"],s={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.2}}},i={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.6}}};return h.jsx("div",{className:"min-h-screen bg-gray-950 py-16 px-6 sm:px-8 lg:px-16",children:h.jsxs(P.div,{variants:s,initial:"hidden",animate:"visible",className:"max-w-6xl mx-auto",children:[h.jsxs(P.div,{variants:i,className:"text-center mb-16",children:[h.jsxs("div",{className:"flex items-center justify-center gap-2 mb-6",children:[h.jsx(gl,{className:"text-emerald-500 w-8 h-8"}),h.jsxs("h1",{className:"text-4xl sm:text-5xl font-bold text-white",children:["About Me",h.jsx("span",{className:"text-emerald-500",children:"."})]})]}),h.jsx("p",{className:"text-gray-400 text-lg max-w-3xl mx-auto leading-relaxed",children:"I'm a passionate full-stack developer with a strong foundation in modern web technologies and blockchain development. I love creating innovative solutions that make a real impact."})]}),h.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12 mb-16",children:[h.jsxs(P.div,{variants:i,className:"space-y-6",children:[h.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[h.jsx(yl,{className:"text-emerald-500 w-6 h-6"}),h.jsx("h2",{className:"text-2xl font-bold text-white",children:"My Journey"})]}),h.jsxs("div",{className:"bg-gray-900/50 p-6 rounded-lg border border-gray-800",children:[h.jsx("p",{className:"text-gray-300 leading-relaxed mb-4",children:"My journey into software development began during my university years, where I discovered my passion for creating digital solutions. What started as curiosity about how websites work has evolved into a full-fledged career in full-stack development."}),h.jsx("p",{className:"text-gray-300 leading-relaxed mb-4",children:"I specialize in React ecosystem, Node.js backend development, and have recently expanded into blockchain development with Solidity and Clarity smart contracts. I'm always eager to learn new technologies and tackle challenging problems."}),h.jsx("p",{className:"text-gray-300 leading-relaxed",children:"When I'm not coding, you'll find me exploring new technologies, contributing to open source projects, or sharing knowledge with the developer community."})]})]}),h.jsxs(P.div,{variants:i,className:"space-y-6",children:[h.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[h.jsx(es,{className:"text-emerald-500 w-6 h-6"}),h.jsx("h2",{className:"text-2xl font-bold text-white",children:"Technical Skills"})]}),h.jsx("div",{className:"bg-gray-900/50 p-6 rounded-lg border border-gray-800",children:h.jsx("div",{className:"grid grid-cols-2 gap-3",children:t.map((o,c)=>h.jsx(P.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:.5+c*.1},className:"bg-gray-800 p-3 rounded-lg border border-gray-700 hover:border-emerald-500 transition-colors duration-300",children:h.jsx("span",{className:"text-emerald-500 font-medium text-sm",children:o})},o))})})]})]}),h.jsxs("div",{className:"mb-12",children:[h.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[h.jsx(_l,{className:"text-emerald-500 w-6 h-6"}),h.jsx("h3",{className:"text-2xl font-bold text-white",children:"Experience"})]}),h.jsx("div",{className:"space-y-8",children:n.map((o,c)=>h.jsxs(P.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.2+c*.1},className:"bg-gray-800/50 p-6 rounded-lg border border-gray-700 hover:border-emerald-500 transition-all duration-300",children:[h.jsx("h4",{className:"text-emerald-500 font-semibold text-lg",children:o.title}),h.jsx("p",{className:"text-gray-300",children:o.company}),h.jsx("p",{className:"text-gray-500 text-sm mb-3",children:o.period}),h.jsx("p",{className:"text-gray-400",children:o.description})]},c))})]}),h.jsxs("div",{className:"mb-12",children:[h.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[h.jsx(vl,{className:"text-emerald-500 w-6 h-6"}),h.jsx("h3",{className:"text-2xl font-bold text-white",children:"Education"})]}),h.jsx("div",{className:"space-y-6",children:e.map((o,c)=>h.jsxs(P.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.3+c*.1},className:"bg-gray-800/50 p-6 rounded-lg border border-gray-700 hover:border-emerald-500 transition-all duration-300",children:[h.jsx("h4",{className:"text-emerald-500 font-semibold text-lg",children:o.degree}),h.jsx("p",{className:"text-gray-300",children:o.institution}),h.jsx("p",{className:"text-gray-500 text-sm mb-3",children:o.period}),h.jsx("p",{className:"text-gray-400",children:o.description})]},c))})]}),h.jsxs(P.div,{variants:i,className:"text-center",children:[h.jsxs("div",{className:"flex items-center justify-center gap-2 mb-6",children:[h.jsx(El,{className:"text-emerald-500 w-6 h-6"}),h.jsx("h3",{className:"text-2xl font-bold text-white",children:"Achievements"})]}),h.jsx("div",{className:"bg-gray-900/50 p-6 rounded-lg border border-gray-800",children:h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[h.jsxs("div",{className:"text-center",children:[h.jsx("div",{className:"text-3xl font-bold text-emerald-500 mb-2",children:"2+"}),h.jsx("p",{className:"text-gray-400",children:"Years of Experience"})]}),h.jsxs("div",{className:"text-center",children:[h.jsx("div",{className:"text-3xl font-bold text-emerald-500 mb-2",children:"10+"}),h.jsx("p",{className:"text-gray-400",children:"Projects Completed"})]}),h.jsxs("div",{className:"text-center",children:[h.jsx("div",{className:"text-3xl font-bold text-emerald-500 mb-2",children:"100%"}),h.jsx("p",{className:"text-gray-400",children:"Client Satisfaction"})]})]})})]})]})})},$l=()=>h.jsxs("div",{className:"min-h-screen",children:[h.jsx(Jn,{}),h.jsx("main",{className:"pt-10",children:h.jsx(Ul,{})}),h.jsx(Yn,{})]}),Hl=({project:n,onClose:e})=>h.jsx(P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:e,children:h.jsx(P.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-gray-900 rounded-lg max-w-4xl max-h-[90vh] overflow-y-auto border border-gray-800",onClick:t=>t.stopPropagation(),children:h.jsxs("div",{className:"p-6",children:[h.jsxs("div",{className:"flex items-center justify-between mb-6",children:[h.jsx("h2",{className:"text-2xl font-bold text-white",children:n.title}),h.jsx("button",{onClick:e,className:"text-gray-400 hover:text-white",children:"×"})]}),h.jsx("img",{src:n.image,alt:n.title,className:"w-full rounded-lg mb-6 object-cover"}),h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{children:[h.jsx("h3",{className:"text-lg font-semibold text-emerald-500 mb-2",children:"Project Overview"}),h.jsx("p",{className:"text-gray-300",children:n.longDescription})]}),h.jsxs("div",{children:[h.jsx("h3",{className:"text-lg font-semibold text-emerald-500 mb-2",children:"Key Features"}),h.jsx("ul",{className:"list-disc list-inside space-y-1 text-gray-300",children:n.features.map((t,s)=>h.jsx("li",{children:t},s))})]}),h.jsxs("div",{children:[h.jsx("h3",{className:"text-lg font-semibold text-emerald-500 mb-2",children:"Technologies Used"}),h.jsx("div",{className:"flex flex-wrap gap-2",children:n.tech.map(t=>h.jsx("span",{className:"bg-gray-800 text-emerald-500 px-3 py-1 rounded-full text-sm",children:t},t))})]}),h.jsxs("div",{children:[h.jsx("h3",{className:"text-lg font-semibold text-emerald-500 mb-2",children:"Challenges & Solutions"}),h.jsx("p",{className:"text-gray-300",children:n.challenges})]}),h.jsxs("div",{children:[h.jsx("h3",{className:"text-lg font-semibold text-emerald-500 mb-2",children:"Outcome"}),h.jsx("p",{className:"text-gray-300",children:n.outcome})]}),h.jsxs("div",{className:"flex gap-4 pt-4",children:[h.jsxs(P.a,{href:n.github,target:"_blank",rel:"noopener noreferrer",whileHover:{scale:1.05},className:"flex items-center gap-2 bg-gray-800 text-gray-300 px-4 py-2 rounded-lg hover:bg-gray-700 transition-colors duration-300",children:[h.jsx(Et,{className:"w-5 h-5"}),"View Code"]}),h.jsxs(P.a,{href:n.live,target:"_blank",rel:"noopener noreferrer",whileHover:{scale:1.05},className:"flex items-center gap-2 bg-emerald-500 text-gray-900 px-4 py-2 rounded-lg hover:bg-emerald-400 transition-colors duration-300",children:[h.jsx(rs,{className:"w-5 h-5"}),"Live Demo"]})]})]})]})})}),ql=()=>{const[n,e]=Je.useState("All"),[t,s]=Je.useState("grid"),[i,o]=Je.useState(null),c=["All","Full Stack","Blockchain","Backend","Frontend"],u=[{title:"African Trade Empire",description:"African Trade Empire is an innovative NFT card game and trading platform built on the Flow blockchain",longDescription:"African Trade Empire is a groundbreaking NFT card game and trading hub on the Flow blockchain, blending tactical gameplay with AI-driven market insights. Players acquire, exchange, and utilize merchant cards inspired by historical African traders, each possessing distinct skills and trade expertise.",tech:["Flow","Cadence","React","Node.js","TypeScript"],github:"https://github.com/username/african-trade-empire",live:"https://african-trade-empire.vercel.app/",icon:wl,category:"Blockchain",image:"/AT-Empire.png",features:["NFT card game mechanics","AI-driven market insights","Historical African trader themes","Flow blockchain integration"],challenges:"Implementing complex game mechanics on blockchain while maintaining performance",outcome:"Successfully launched with growing user base and positive community feedback"},{title:"DOCmeet",description:"A Real-time mobile responsive medical appointment and consultation web application",longDescription:"DOCmeet is a comprehensive telemedicine platform that connects patients with healthcare providers through secure video consultations, appointment scheduling, and medical record management. Built with a focus on accessibility and user experience.",tech:["React","Node.js","ExpressJS","MongoDB","WebRTC"],github:"https://github.com/Henryno111/DOCmeet_web_app/tree/main",live:"https://do-cmeet-web-app.vercel.app/",icon:es,category:"Full Stack",image:"/Docmeet.png",features:["Real-time video consultations","Appointment scheduling system","Medical record management","Secure patient data handling"],challenges:"Implementing HIPAA-compliant video streaming and ensuring data security",outcome:"Deployed successfully with positive feedback from healthcare providers"},{title:"GTF (Green Tourism Fund)",description:"Decentralized application for funding wildlife and environmental projects using blockchain technology.",longDescription:"Green Tourism Fund is a blockchain-based crowdfunding platform specifically designed for environmental and wildlife conservation projects. It uses smart contracts to ensure transparency and accountability in fund distribution.",tech:["Clarity","Vite","React","Stacks Blockchain"],github:"https://github.com/orgs/GreenTourismFund-GTF/repositories",live:"https://gtf.vercel.app/",icon:xl,category:"Blockchain",image:"/GTF.png",features:["Smart contract-based funding","Transparent fund tracking","Environmental project verification","Community governance features"],challenges:"Creating secure smart contracts and ensuring scalable fund management",outcome:"Platform launched with multiple successful conservation projects funded"},{title:"Bridgarr",description:"Full-stack e-commerce/escrow solution with features like cart management, payment processing, and admin dashboard.",longDescription:"Bridgarr is a comprehensive e-commerce platform with integrated escrow services, providing secure transactions between buyers and sellers. Features include advanced cart management, multiple payment options, and detailed analytics.",tech:["Next.js","PostgreSQL","Django","TypeScript","Stripe"],github:"https://github.com/username/bridgarr",live:"https://app.bridgarr.com.ng/",icon:Tl,category:"Full Stack",image:"/Bridgarr.png",features:["Integrated escrow system","Multi-vendor marketplace","Advanced analytics dashboard","Secure payment processing"],challenges:"Building secure escrow mechanisms and handling complex payment flows",outcome:"Successfully processing transactions with high user satisfaction rates"},{title:"FoodieLand",description:"A modern food delivery and restaurant discovery platform with real-time tracking",longDescription:"FoodieLand is a comprehensive food delivery platform that connects users with local restaurants, featuring real-time order tracking, personalized recommendations, and seamless payment integration.",tech:["React","Node.js","MongoDB","Socket.io"],github:"https://github.com/username/foodieland",live:"https://foodieland.vercel.app/",icon:Ai,category:"Full Stack",image:"/FoodieLand.png",features:["Real-time order tracking","Restaurant discovery","Personalized recommendations","Integrated payment system"],challenges:"Implementing real-time tracking and optimizing delivery routes",outcome:"Launched with partner restaurants and growing user base"},{title:"Portfolio",description:"A responsive portfolio website showcasing my projects and skills",longDescription:"A responsive portfolio website built with React and Tailwind CSS. The website showcases my latest projects, skills, and experience in full-stack development, blockchain, and smart contracts.",tech:["React","Tailwind CSS","Framer Motion"],github:"https://github.com/Henryno111/Portfolio",live:"https://devhenryno.vercel.app/",icon:Ai,category:"Frontend",image:"/Portfolio.png",features:["Responsive design","Interactive animations","Dynamic content","SEO optimization"],challenges:"Implementing dynamic content and SEO optimization",outcome:"Improved SEO ranking and user engagement"}],f={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.2}}},g={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.6}}},T=n==="All"?u:u.filter(A=>A.category===n),I=({project:A,index:N})=>h.jsxs(P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:N*.1},whileHover:{y:-5},className:"bg-gray-900 rounded-xl overflow-hidden border border-gray-800 hover:border-emerald-500 transition-all duration-300 cursor-pointer",onClick:()=>o(A),children:[h.jsxs("div",{className:"relative overflow-hidden",children:[h.jsx("img",{src:A.image,alt:A.title,className:"w-full h-48 object-cover"}),h.jsx("div",{className:"absolute inset-0 bg-gray-900/60 opacity-0 hover:opacity-100 transition-opacity duration-300 flex items-center justify-center",children:h.jsx(P.div,{whileHover:{scale:1.05},className:"bg-emerald-500 text-gray-900 px-4 py-2 rounded-lg font-semibold",children:"View Details"})})]}),h.jsxs("div",{className:"p-6",children:[h.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[A.icon&&h.jsx(A.icon,{className:"w-5 h-5 text-emerald-500"}),h.jsx("span",{className:"bg-gray-800 text-emerald-500 px-2 py-1 rounded text-xs font-medium",children:A.category})]}),h.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:A.title}),h.jsx("p",{className:"text-gray-400 text-sm mb-4 line-clamp-2",children:A.description}),h.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[A.tech.slice(0,3).map(V=>h.jsx("span",{className:"bg-gray-800 text-gray-300 px-2 py-1 rounded text-xs",children:V},V)),A.tech.length>3&&h.jsxs("span",{className:"bg-gray-800 text-gray-300 px-2 py-1 rounded text-xs",children:["+",A.tech.length-3," more"]})]}),h.jsxs("div",{className:"flex gap-3",children:[h.jsxs(P.a,{href:A.github,target:"_blank",rel:"noopener noreferrer",whileHover:{scale:1.05},onClick:V=>V.stopPropagation(),className:"flex items-center gap-2 bg-gray-800 text-gray-300 px-3 py-2 rounded-lg hover:bg-gray-700 transition-colors duration-300 text-sm",children:[h.jsx(Et,{className:"w-4 h-4"}),"Code"]}),h.jsxs(P.a,{href:A.live,target:"_blank",rel:"noopener noreferrer",whileHover:{scale:1.05},onClick:V=>V.stopPropagation(),className:"flex items-center gap-2 bg-emerald-500 text-gray-900 px-3 py-2 rounded-lg hover:bg-emerald-400 transition-colors duration-300 text-sm font-medium",children:[h.jsx(rs,{className:"w-4 h-4"}),"Live Demo"]})]})]})]},A.title);return h.jsxs("div",{className:"min-h-screen bg-gray-950 p-6 sm:p-8 lg:p-16 relative overflow-hidden",children:[h.jsx("div",{className:"absolute inset-0 overflow-hidden",children:[...Array(5)].map((A,N)=>h.jsx(P.div,{className:"absolute w-32 h-32 bg-emerald-500/5 rounded-full",style:{left:`${Math.random()*100}%`,top:`${Math.random()*100}%`},animate:{scale:[1,1.2,1],opacity:[.3,.5,.3]},transition:{duration:3+N,repeat:1/0,repeatType:"reverse",ease:"easeInOut"}},N))}),h.jsxs(P.div,{variants:f,initial:"hidden",animate:"visible",className:"max-w-7xl mx-auto relative z-10",children:[h.jsxs(P.div,{className:"text-center mb-16",variants:g,children:[h.jsx("div",{className:"inline-block",children:h.jsxs(P.h1,{className:"text-4xl sm:text-5xl font-bold text-white mb-4 relative",animate:{scale:[1,1.02,1]},transition:{duration:2,repeat:1/0},children:["My Projects",h.jsx("span",{className:"text-emerald-500",children:"."}),h.jsx(P.div,{className:"absolute -right-4 -top-4 w-8 h-8 border-2 border-emerald-500/30 rounded-full",animate:{scale:[1,1.2,1],opacity:[.5,1,.5]},transition:{duration:2,repeat:1/0}})]})}),h.jsx(P.p,{className:"text-gray-400 text-lg max-w-2xl mx-auto mb-8",variants:g,children:"A collection of projects showcasing my expertise in full-stack development, blockchain technology, and modern web applications."})]}),h.jsxs(P.div,{className:"flex flex-col sm:flex-row justify-between items-center mb-12 gap-4",variants:g,children:[h.jsx("div",{className:"flex flex-wrap gap-2",children:c.map(A=>h.jsx(P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>e(A),className:`px-4 py-2 rounded-lg font-medium transition-all duration-300 ${n===A?"bg-emerald-500 text-gray-900":"bg-gray-800 text-gray-300 hover:bg-gray-700"}`,children:A},A))}),h.jsxs("div",{className:"flex items-center gap-2 bg-gray-800 rounded-lg p-1",children:[h.jsx(P.button,{whileHover:{scale:1.05},onClick:()=>s("grid"),className:`p-2 rounded ${t==="grid"?"bg-emerald-500 text-gray-900":"text-gray-400"}`,children:h.jsx(bl,{className:"w-4 h-4"})}),h.jsx(P.button,{whileHover:{scale:1.05},onClick:()=>s("list"),className:`p-2 rounded ${t==="list"?"bg-emerald-500 text-gray-900":"text-gray-400"}`,children:h.jsx(Il,{className:"w-4 h-4"})})]})]}),h.jsx(P.div,{className:`grid gap-8 mb-16 ${t==="grid"?"grid-cols-1 md:grid-cols-2 lg:grid-cols-3":"grid-cols-1"}`,variants:f,children:T.map((A,N)=>h.jsx(I,{project:A,index:N},A.title))}),h.jsx(P.div,{className:"bg-gray-900/50 rounded-lg p-8 border border-gray-800",variants:g,children:h.jsxs("div",{className:"text-center mb-8",children:[h.jsxs("h2",{className:"text-2xl font-bold text-white mb-6",children:["Technical Expertise",h.jsx("span",{className:"text-emerald-500",children:"."})]}),h.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4",children:["React","TypeScript","Node.js","Python","MongoDB","Next.js","Solidity","Web3.js"].map(A=>h.jsx(P.div,{whileHover:{scale:1.05},className:"bg-gray-800 p-4 rounded-lg border border-gray-700 hover:border-emerald-500 transition-colors duration-300",children:h.jsx("div",{className:"text-center",children:h.jsx("h3",{className:"text-emerald-500 font-mono text-sm",children:`<${A} />`})})},A))})]})})]}),h.jsx(cl,{children:i&&h.jsx(Hl,{project:i,onClose:()=>o(null)})})]})},zl=()=>h.jsxs("div",{className:"min-h-screen",children:[h.jsx(Jn,{}),h.jsx("main",{className:"pt-16 min-h-screen",children:h.jsx(ql,{})}),h.jsx("div",{children:h.jsx(Yn,{})})]});var Ci={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yo=function(n){const e=[];let t=0;for(let s=0;s<n.length;s++){let i=n.charCodeAt(s);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&s+1<n.length&&(n.charCodeAt(s+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++s)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},Gl=function(n){const e=[];let t=0,s=0;for(;t<n.length;){const i=n[t++];if(i<128)e[s++]=String.fromCharCode(i);else if(i>191&&i<224){const o=n[t++];e[s++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){const o=n[t++],c=n[t++],u=n[t++],f=((i&7)<<18|(o&63)<<12|(c&63)<<6|u&63)-65536;e[s++]=String.fromCharCode(55296+(f>>10)),e[s++]=String.fromCharCode(56320+(f&1023))}else{const o=n[t++],c=n[t++];e[s++]=String.fromCharCode((i&15)<<12|(o&63)<<6|c&63)}}return e.join("")},_o={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let i=0;i<n.length;i+=3){const o=n[i],c=i+1<n.length,u=c?n[i+1]:0,f=i+2<n.length,g=f?n[i+2]:0,T=o>>2,I=(o&3)<<4|u>>4;let A=(u&15)<<2|g>>6,N=g&63;f||(N=64,c||(A=64)),s.push(t[T],t[I],t[A],t[N])}return s.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(yo(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):Gl(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let i=0;i<n.length;){const o=t[n.charAt(i++)],u=i<n.length?t[n.charAt(i)]:0;++i;const g=i<n.length?t[n.charAt(i)]:64;++i;const I=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||u==null||g==null||I==null)throw new Kl;const A=o<<2|u>>4;if(s.push(A),g!==64){const N=u<<4&240|g>>2;if(s.push(N),I!==64){const V=g<<6&192|I;s.push(V)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class Kl extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Ql=function(n){const e=yo(n);return _o.encodeByteArray(e,!0)},On=function(n){return Ql(n).replace(/\./g,"")},Wl=function(n){try{return _o.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xl(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jl=()=>Xl().__FIREBASE_DEFAULTS__,Yl=()=>{if(typeof process>"u"||typeof Ci>"u")return;const n=Ci.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},Zl=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&Wl(n[1]);return e&&JSON.parse(e)},ss=()=>{try{return Jl()||Yl()||Zl()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},ec=n=>{var e,t;return(t=(e=ss())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},tc=n=>{const e=ec(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},vo=()=>{var n;return(n=ss())===null||n===void 0?void 0:n.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nc{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rc(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[On(JSON.stringify(t)),On(JSON.stringify(c)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sc(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function ic(){var n;const e=(n=ss())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function oc(){return!ic()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ac(){try{return typeof indexedDB=="object"}catch{return!1}}function lc(){return new Promise((n,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(s);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(s),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cc="FirebaseError";class wt extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=cc,Object.setPrototypeOf(this,wt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Eo.prototype.create)}}class Eo{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],c=o?uc(o,s):"Error",u=`${this.serviceName}: ${c} (${i}).`;return new wt(i,u,s)}}function uc(n,e){return n.replace(hc,(t,s)=>{const i=e[s];return i!=null?String(i):`<${s}?>`})}const hc=/\{\$([^}]+)}/g;function Fr(n,e){if(n===e)return!0;const t=Object.keys(n),s=Object.keys(e);for(const i of t){if(!s.includes(i))return!1;const o=n[i],c=e[i];if(Ni(o)&&Ni(c)){if(!Fr(o,c))return!1}else if(o!==c)return!1}for(const i of s)if(!t.includes(i))return!1;return!0}function Ni(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kt(n){return n&&n._delegate?n._delegate:n}class Qt{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const We="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dc{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new nc;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&s.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const s=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(mc(e))try{this.getOrInitializeService({instanceIdentifier:We})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const o=this.getOrInitializeService({instanceIdentifier:i});s.resolve(o)}catch{}}}}clearInstance(e=We){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=We){return this.instances.has(e)}getOptions(e=We){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[o,c]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(o);s===u&&c.resolve(i)}return i}onInit(e,t){var s;const i=this.normalizeInstanceIdentifier(t),o=(s=this.onInitCallbacks.get(i))!==null&&s!==void 0?s:new Set;o.add(e),this.onInitCallbacks.set(i,o);const c=this.instances.get(i);return c&&e(c,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const i of s)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:fc(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=We){return this.component?this.component.multipleInstances?e:We:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function fc(n){return n===We?void 0:n}function mc(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pc{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new dc(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var B;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(B||(B={}));const gc={debug:B.DEBUG,verbose:B.VERBOSE,info:B.INFO,warn:B.WARN,error:B.ERROR,silent:B.SILENT},yc=B.INFO,_c={[B.DEBUG]:"log",[B.VERBOSE]:"log",[B.INFO]:"info",[B.WARN]:"warn",[B.ERROR]:"error"},vc=(n,e,...t)=>{if(e<n.logLevel)return;const s=new Date().toISOString(),i=_c[e];if(i)console[i](`[${s}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class wo{constructor(e){this.name=e,this._logLevel=yc,this._logHandler=vc,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in B))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?gc[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,B.DEBUG,...e),this._logHandler(this,B.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,B.VERBOSE,...e),this._logHandler(this,B.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,B.INFO,...e),this._logHandler(this,B.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,B.WARN,...e),this._logHandler(this,B.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,B.ERROR,...e),this._logHandler(this,B.ERROR,...e)}}const Ec=(n,e)=>e.some(t=>n instanceof t);let Si,Pi;function wc(){return Si||(Si=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function xc(){return Pi||(Pi=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const xo=new WeakMap,Br=new WeakMap,To=new WeakMap,Pr=new WeakMap,is=new WeakMap;function Tc(n){const e=new Promise((t,s)=>{const i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",c)},o=()=>{t(Le(n.result)),i()},c=()=>{s(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&xo.set(t,n)}).catch(()=>{}),is.set(e,n),e}function bc(n){if(Br.has(n))return;const e=new Promise((t,s)=>{const i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",c),n.removeEventListener("abort",c)},o=()=>{t(),i()},c=()=>{s(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",c),n.addEventListener("abort",c)});Br.set(n,e)}let Ur={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Br.get(n);if(e==="objectStoreNames")return n.objectStoreNames||To.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Le(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function Ic(n){Ur=n(Ur)}function Ac(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=n.call(Vr(this),e,...t);return To.set(s,e.sort?e.sort():[e]),Le(s)}:xc().includes(n)?function(...e){return n.apply(Vr(this),e),Le(xo.get(this))}:function(...e){return Le(n.apply(Vr(this),e))}}function Rc(n){return typeof n=="function"?Ac(n):(n instanceof IDBTransaction&&bc(n),Ec(n,wc())?new Proxy(n,Ur):n)}function Le(n){if(n instanceof IDBRequest)return Tc(n);if(Pr.has(n))return Pr.get(n);const e=Rc(n);return e!==n&&(Pr.set(n,e),is.set(e,n)),e}const Vr=n=>is.get(n);function Cc(n,e,{blocked:t,upgrade:s,blocking:i,terminated:o}={}){const c=indexedDB.open(n,e),u=Le(c);return s&&c.addEventListener("upgradeneeded",f=>{s(Le(c.result),f.oldVersion,f.newVersion,Le(c.transaction),f)}),t&&c.addEventListener("blocked",f=>t(f.oldVersion,f.newVersion,f)),u.then(f=>{o&&f.addEventListener("close",()=>o()),i&&f.addEventListener("versionchange",g=>i(g.oldVersion,g.newVersion,g))}).catch(()=>{}),u}const Nc=["get","getKey","getAll","getAllKeys","count"],Sc=["put","add","delete","clear"],Dr=new Map;function Vi(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Dr.get(e))return Dr.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,i=Sc.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(i||Nc.includes(t)))return;const o=async function(c,...u){const f=this.transaction(c,i?"readwrite":"readonly");let g=f.store;return s&&(g=g.index(u.shift())),(await Promise.all([g[t](...u),i&&f.done]))[0]};return Dr.set(e,o),o}Ic(n=>({...n,get:(e,t,s)=>Vi(e,t)||n.get(e,t,s),has:(e,t)=>!!Vi(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pc{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Vc(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function Vc(n){const e=n.getComponent();return e?.type==="VERSION"}const $r="@firebase/app",Di="0.10.17";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const De=new wo("@firebase/app"),Dc="@firebase/app-compat",kc="@firebase/analytics-compat",jc="@firebase/analytics",Oc="@firebase/app-check-compat",Mc="@firebase/app-check",Lc="@firebase/auth",Fc="@firebase/auth-compat",Bc="@firebase/database",Uc="@firebase/data-connect",$c="@firebase/database-compat",Hc="@firebase/functions",qc="@firebase/functions-compat",zc="@firebase/installations",Gc="@firebase/installations-compat",Kc="@firebase/messaging",Qc="@firebase/messaging-compat",Wc="@firebase/performance",Xc="@firebase/performance-compat",Jc="@firebase/remote-config",Yc="@firebase/remote-config-compat",Zc="@firebase/storage",eu="@firebase/storage-compat",tu="@firebase/firestore",nu="@firebase/vertexai",ru="@firebase/firestore-compat",su="firebase",iu="11.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hr="[DEFAULT]",ou={[$r]:"fire-core",[Dc]:"fire-core-compat",[jc]:"fire-analytics",[kc]:"fire-analytics-compat",[Mc]:"fire-app-check",[Oc]:"fire-app-check-compat",[Lc]:"fire-auth",[Fc]:"fire-auth-compat",[Bc]:"fire-rtdb",[Uc]:"fire-data-connect",[$c]:"fire-rtdb-compat",[Hc]:"fire-fn",[qc]:"fire-fn-compat",[zc]:"fire-iid",[Gc]:"fire-iid-compat",[Kc]:"fire-fcm",[Qc]:"fire-fcm-compat",[Wc]:"fire-perf",[Xc]:"fire-perf-compat",[Jc]:"fire-rc",[Yc]:"fire-rc-compat",[Zc]:"fire-gcs",[eu]:"fire-gcs-compat",[tu]:"fire-fst",[ru]:"fire-fst-compat",[nu]:"fire-vertex","fire-js":"fire-js",[su]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mn=new Map,au=new Map,qr=new Map;function ki(n,e){try{n.container.addComponent(e)}catch(t){De.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Ln(n){const e=n.name;if(qr.has(e))return De.debug(`There were multiple attempts to register component ${e}.`),!1;qr.set(e,n);for(const t of Mn.values())ki(t,n);for(const t of au.values())ki(t,n);return!0}function lu(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cu={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Fe=new Eo("app","Firebase",cu);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uu{constructor(e,t,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Qt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Fe.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hu=iu;function bo(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const s=Object.assign({name:Hr,automaticDataCollectionEnabled:!1},e),i=s.name;if(typeof i!="string"||!i)throw Fe.create("bad-app-name",{appName:String(i)});if(t||(t=vo()),!t)throw Fe.create("no-options");const o=Mn.get(i);if(o){if(Fr(t,o.options)&&Fr(s,o.config))return o;throw Fe.create("duplicate-app",{appName:i})}const c=new pc(i);for(const f of qr.values())c.addComponent(f);const u=new uu(t,s,c);return Mn.set(i,u),u}function du(n=Hr){const e=Mn.get(n);if(!e&&n===Hr&&vo())return bo();if(!e)throw Fe.create("no-app",{appName:n});return e}function dt(n,e,t){var s;let i=(s=ou[n])!==null&&s!==void 0?s:n;t&&(i+=`-${t}`);const o=i.match(/\s|\//),c=e.match(/\s|\//);if(o||c){const u=[`Unable to register library "${i}" with version "${e}":`];o&&u.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&c&&u.push("and"),c&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),De.warn(u.join(" "));return}Ln(new Qt(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fu="firebase-heartbeat-database",mu=1,Wt="firebase-heartbeat-store";let kr=null;function Io(){return kr||(kr=Cc(fu,mu,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Wt)}catch(t){console.warn(t)}}}}).catch(n=>{throw Fe.create("idb-open",{originalErrorMessage:n.message})})),kr}async function pu(n){try{const t=(await Io()).transaction(Wt),s=await t.objectStore(Wt).get(Ao(n));return await t.done,s}catch(e){if(e instanceof wt)De.warn(e.message);else{const t=Fe.create("idb-get",{originalErrorMessage:e?.message});De.warn(t.message)}}}async function ji(n,e){try{const s=(await Io()).transaction(Wt,"readwrite");await s.objectStore(Wt).put(e,Ao(n)),await s.done}catch(t){if(t instanceof wt)De.warn(t.message);else{const s=Fe.create("idb-set",{originalErrorMessage:t?.message});De.warn(s.message)}}}function Ao(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gu=1024,yu=30*24*60*60*1e3;class _u{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Eu(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,t;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=Oi();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(c=>c.date===o)?void 0:(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(c=>{const u=new Date(c.date).valueOf();return Date.now()-u<=yu}),this._storage.overwrite(this._heartbeatsCache))}catch(s){De.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Oi(),{heartbeatsToSend:s,unsentEntries:i}=vu(this._heartbeatsCache.heartbeats),o=On(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return De.warn(t),""}}}function Oi(){return new Date().toISOString().substring(0,10)}function vu(n,e=gu){const t=[];let s=n.slice();for(const i of n){const o=t.find(c=>c.agent===i.agent);if(o){if(o.dates.push(i.date),Mi(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),Mi(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class Eu{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return ac()?lc().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await pu(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return ji(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return ji(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Mi(n){return On(JSON.stringify({version:2,heartbeats:n})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wu(n){Ln(new Qt("platform-logger",e=>new Pc(e),"PRIVATE")),Ln(new Qt("heartbeat",e=>new _u(e),"PRIVATE")),dt($r,Di,n),dt($r,Di,"esm2017"),dt("fire-js","")}wu("");var Li=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ro;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(E,m){function y(){}y.prototype=m.prototype,E.D=m.prototype,E.prototype=new y,E.prototype.constructor=E,E.C=function(_,v,x){for(var p=Array(arguments.length-2),Ce=2;Ce<arguments.length;Ce++)p[Ce-2]=arguments[Ce];return m.prototype[v].apply(_,p)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,t),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(E,m,y){y||(y=0);var _=Array(16);if(typeof m=="string")for(var v=0;16>v;++v)_[v]=m.charCodeAt(y++)|m.charCodeAt(y++)<<8|m.charCodeAt(y++)<<16|m.charCodeAt(y++)<<24;else for(v=0;16>v;++v)_[v]=m[y++]|m[y++]<<8|m[y++]<<16|m[y++]<<24;m=E.g[0],y=E.g[1],v=E.g[2];var x=E.g[3],p=m+(x^y&(v^x))+_[0]+3614090360&4294967295;m=y+(p<<7&4294967295|p>>>25),p=x+(v^m&(y^v))+_[1]+3905402710&4294967295,x=m+(p<<12&4294967295|p>>>20),p=v+(y^x&(m^y))+_[2]+606105819&4294967295,v=x+(p<<17&4294967295|p>>>15),p=y+(m^v&(x^m))+_[3]+3250441966&4294967295,y=v+(p<<22&4294967295|p>>>10),p=m+(x^y&(v^x))+_[4]+4118548399&4294967295,m=y+(p<<7&4294967295|p>>>25),p=x+(v^m&(y^v))+_[5]+1200080426&4294967295,x=m+(p<<12&4294967295|p>>>20),p=v+(y^x&(m^y))+_[6]+2821735955&4294967295,v=x+(p<<17&4294967295|p>>>15),p=y+(m^v&(x^m))+_[7]+4249261313&4294967295,y=v+(p<<22&4294967295|p>>>10),p=m+(x^y&(v^x))+_[8]+1770035416&4294967295,m=y+(p<<7&4294967295|p>>>25),p=x+(v^m&(y^v))+_[9]+2336552879&4294967295,x=m+(p<<12&4294967295|p>>>20),p=v+(y^x&(m^y))+_[10]+4294925233&4294967295,v=x+(p<<17&4294967295|p>>>15),p=y+(m^v&(x^m))+_[11]+2304563134&4294967295,y=v+(p<<22&4294967295|p>>>10),p=m+(x^y&(v^x))+_[12]+1804603682&4294967295,m=y+(p<<7&4294967295|p>>>25),p=x+(v^m&(y^v))+_[13]+4254626195&4294967295,x=m+(p<<12&4294967295|p>>>20),p=v+(y^x&(m^y))+_[14]+2792965006&4294967295,v=x+(p<<17&4294967295|p>>>15),p=y+(m^v&(x^m))+_[15]+1236535329&4294967295,y=v+(p<<22&4294967295|p>>>10),p=m+(v^x&(y^v))+_[1]+4129170786&4294967295,m=y+(p<<5&4294967295|p>>>27),p=x+(y^v&(m^y))+_[6]+3225465664&4294967295,x=m+(p<<9&4294967295|p>>>23),p=v+(m^y&(x^m))+_[11]+643717713&4294967295,v=x+(p<<14&4294967295|p>>>18),p=y+(x^m&(v^x))+_[0]+3921069994&4294967295,y=v+(p<<20&4294967295|p>>>12),p=m+(v^x&(y^v))+_[5]+3593408605&4294967295,m=y+(p<<5&4294967295|p>>>27),p=x+(y^v&(m^y))+_[10]+38016083&4294967295,x=m+(p<<9&4294967295|p>>>23),p=v+(m^y&(x^m))+_[15]+3634488961&4294967295,v=x+(p<<14&4294967295|p>>>18),p=y+(x^m&(v^x))+_[4]+3889429448&4294967295,y=v+(p<<20&4294967295|p>>>12),p=m+(v^x&(y^v))+_[9]+568446438&4294967295,m=y+(p<<5&4294967295|p>>>27),p=x+(y^v&(m^y))+_[14]+3275163606&4294967295,x=m+(p<<9&4294967295|p>>>23),p=v+(m^y&(x^m))+_[3]+4107603335&4294967295,v=x+(p<<14&4294967295|p>>>18),p=y+(x^m&(v^x))+_[8]+1163531501&4294967295,y=v+(p<<20&4294967295|p>>>12),p=m+(v^x&(y^v))+_[13]+2850285829&4294967295,m=y+(p<<5&4294967295|p>>>27),p=x+(y^v&(m^y))+_[2]+4243563512&4294967295,x=m+(p<<9&4294967295|p>>>23),p=v+(m^y&(x^m))+_[7]+1735328473&4294967295,v=x+(p<<14&4294967295|p>>>18),p=y+(x^m&(v^x))+_[12]+2368359562&4294967295,y=v+(p<<20&4294967295|p>>>12),p=m+(y^v^x)+_[5]+4294588738&4294967295,m=y+(p<<4&4294967295|p>>>28),p=x+(m^y^v)+_[8]+2272392833&4294967295,x=m+(p<<11&4294967295|p>>>21),p=v+(x^m^y)+_[11]+1839030562&4294967295,v=x+(p<<16&4294967295|p>>>16),p=y+(v^x^m)+_[14]+4259657740&4294967295,y=v+(p<<23&4294967295|p>>>9),p=m+(y^v^x)+_[1]+2763975236&4294967295,m=y+(p<<4&4294967295|p>>>28),p=x+(m^y^v)+_[4]+1272893353&4294967295,x=m+(p<<11&4294967295|p>>>21),p=v+(x^m^y)+_[7]+4139469664&4294967295,v=x+(p<<16&4294967295|p>>>16),p=y+(v^x^m)+_[10]+3200236656&4294967295,y=v+(p<<23&4294967295|p>>>9),p=m+(y^v^x)+_[13]+681279174&4294967295,m=y+(p<<4&4294967295|p>>>28),p=x+(m^y^v)+_[0]+3936430074&4294967295,x=m+(p<<11&4294967295|p>>>21),p=v+(x^m^y)+_[3]+3572445317&4294967295,v=x+(p<<16&4294967295|p>>>16),p=y+(v^x^m)+_[6]+76029189&4294967295,y=v+(p<<23&4294967295|p>>>9),p=m+(y^v^x)+_[9]+3654602809&4294967295,m=y+(p<<4&4294967295|p>>>28),p=x+(m^y^v)+_[12]+3873151461&4294967295,x=m+(p<<11&4294967295|p>>>21),p=v+(x^m^y)+_[15]+530742520&4294967295,v=x+(p<<16&4294967295|p>>>16),p=y+(v^x^m)+_[2]+3299628645&4294967295,y=v+(p<<23&4294967295|p>>>9),p=m+(v^(y|~x))+_[0]+4096336452&4294967295,m=y+(p<<6&4294967295|p>>>26),p=x+(y^(m|~v))+_[7]+1126891415&4294967295,x=m+(p<<10&4294967295|p>>>22),p=v+(m^(x|~y))+_[14]+2878612391&4294967295,v=x+(p<<15&4294967295|p>>>17),p=y+(x^(v|~m))+_[5]+4237533241&4294967295,y=v+(p<<21&4294967295|p>>>11),p=m+(v^(y|~x))+_[12]+1700485571&4294967295,m=y+(p<<6&4294967295|p>>>26),p=x+(y^(m|~v))+_[3]+2399980690&4294967295,x=m+(p<<10&4294967295|p>>>22),p=v+(m^(x|~y))+_[10]+4293915773&4294967295,v=x+(p<<15&4294967295|p>>>17),p=y+(x^(v|~m))+_[1]+2240044497&4294967295,y=v+(p<<21&4294967295|p>>>11),p=m+(v^(y|~x))+_[8]+1873313359&4294967295,m=y+(p<<6&4294967295|p>>>26),p=x+(y^(m|~v))+_[15]+4264355552&4294967295,x=m+(p<<10&4294967295|p>>>22),p=v+(m^(x|~y))+_[6]+2734768916&4294967295,v=x+(p<<15&4294967295|p>>>17),p=y+(x^(v|~m))+_[13]+1309151649&4294967295,y=v+(p<<21&4294967295|p>>>11),p=m+(v^(y|~x))+_[4]+4149444226&4294967295,m=y+(p<<6&4294967295|p>>>26),p=x+(y^(m|~v))+_[11]+3174756917&4294967295,x=m+(p<<10&4294967295|p>>>22),p=v+(m^(x|~y))+_[2]+718787259&4294967295,v=x+(p<<15&4294967295|p>>>17),p=y+(x^(v|~m))+_[9]+3951481745&4294967295,E.g[0]=E.g[0]+m&4294967295,E.g[1]=E.g[1]+(v+(p<<21&4294967295|p>>>11))&4294967295,E.g[2]=E.g[2]+v&4294967295,E.g[3]=E.g[3]+x&4294967295}s.prototype.u=function(E,m){m===void 0&&(m=E.length);for(var y=m-this.blockSize,_=this.B,v=this.h,x=0;x<m;){if(v==0)for(;x<=y;)i(this,E,x),x+=this.blockSize;if(typeof E=="string"){for(;x<m;)if(_[v++]=E.charCodeAt(x++),v==this.blockSize){i(this,_),v=0;break}}else for(;x<m;)if(_[v++]=E[x++],v==this.blockSize){i(this,_),v=0;break}}this.h=v,this.o+=m},s.prototype.v=function(){var E=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);E[0]=128;for(var m=1;m<E.length-8;++m)E[m]=0;var y=8*this.o;for(m=E.length-8;m<E.length;++m)E[m]=y&255,y/=256;for(this.u(E),E=Array(16),m=y=0;4>m;++m)for(var _=0;32>_;_+=8)E[y++]=this.g[m]>>>_&255;return E};function o(E,m){var y=u;return Object.prototype.hasOwnProperty.call(y,E)?y[E]:y[E]=m(E)}function c(E,m){this.h=m;for(var y=[],_=!0,v=E.length-1;0<=v;v--){var x=E[v]|0;_&&x==m||(y[v]=x,_=!1)}this.g=y}var u={};function f(E){return-128<=E&&128>E?o(E,function(m){return new c([m|0],0>m?-1:0)}):new c([E|0],0>E?-1:0)}function g(E){if(isNaN(E)||!isFinite(E))return I;if(0>E)return k(g(-E));for(var m=[],y=1,_=0;E>=y;_++)m[_]=E/y|0,y*=4294967296;return new c(m,0)}function T(E,m){if(E.length==0)throw Error("number format error: empty string");if(m=m||10,2>m||36<m)throw Error("radix out of range: "+m);if(E.charAt(0)=="-")return k(T(E.substring(1),m));if(0<=E.indexOf("-"))throw Error('number format error: interior "-" character');for(var y=g(Math.pow(m,8)),_=I,v=0;v<E.length;v+=8){var x=Math.min(8,E.length-v),p=parseInt(E.substring(v,v+x),m);8>x?(x=g(Math.pow(m,x)),_=_.j(x).add(g(p))):(_=_.j(y),_=_.add(g(p)))}return _}var I=f(0),A=f(1),N=f(16777216);n=c.prototype,n.m=function(){if(O(this))return-k(this).m();for(var E=0,m=1,y=0;y<this.g.length;y++){var _=this.i(y);E+=(0<=_?_:4294967296+_)*m,m*=4294967296}return E},n.toString=function(E){if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(V(this))return"0";if(O(this))return"-"+k(this).toString(E);for(var m=g(Math.pow(E,6)),y=this,_="";;){var v=le(y,m).g;y=Q(y,v.j(m));var x=((0<y.g.length?y.g[0]:y.h)>>>0).toString(E);if(y=v,V(y))return x+_;for(;6>x.length;)x="0"+x;_=x+_}},n.i=function(E){return 0>E?0:E<this.g.length?this.g[E]:this.h};function V(E){if(E.h!=0)return!1;for(var m=0;m<E.g.length;m++)if(E.g[m]!=0)return!1;return!0}function O(E){return E.h==-1}n.l=function(E){return E=Q(this,E),O(E)?-1:V(E)?0:1};function k(E){for(var m=E.g.length,y=[],_=0;_<m;_++)y[_]=~E.g[_];return new c(y,~E.h).add(A)}n.abs=function(){return O(this)?k(this):this},n.add=function(E){for(var m=Math.max(this.g.length,E.g.length),y=[],_=0,v=0;v<=m;v++){var x=_+(this.i(v)&65535)+(E.i(v)&65535),p=(x>>>16)+(this.i(v)>>>16)+(E.i(v)>>>16);_=p>>>16,x&=65535,p&=65535,y[v]=p<<16|x}return new c(y,y[y.length-1]&-2147483648?-1:0)};function Q(E,m){return E.add(k(m))}n.j=function(E){if(V(this)||V(E))return I;if(O(this))return O(E)?k(this).j(k(E)):k(k(this).j(E));if(O(E))return k(this.j(k(E)));if(0>this.l(N)&&0>E.l(N))return g(this.m()*E.m());for(var m=this.g.length+E.g.length,y=[],_=0;_<2*m;_++)y[_]=0;for(_=0;_<this.g.length;_++)for(var v=0;v<E.g.length;v++){var x=this.i(_)>>>16,p=this.i(_)&65535,Ce=E.i(v)>>>16,bt=E.i(v)&65535;y[2*_+2*v]+=p*bt,K(y,2*_+2*v),y[2*_+2*v+1]+=x*bt,K(y,2*_+2*v+1),y[2*_+2*v+1]+=p*Ce,K(y,2*_+2*v+1),y[2*_+2*v+2]+=x*Ce,K(y,2*_+2*v+2)}for(_=0;_<m;_++)y[_]=y[2*_+1]<<16|y[2*_];for(_=m;_<2*m;_++)y[_]=0;return new c(y,0)};function K(E,m){for(;(E[m]&65535)!=E[m];)E[m+1]+=E[m]>>>16,E[m]&=65535,m++}function W(E,m){this.g=E,this.h=m}function le(E,m){if(V(m))throw Error("division by zero");if(V(E))return new W(I,I);if(O(E))return m=le(k(E),m),new W(k(m.g),k(m.h));if(O(m))return m=le(E,k(m)),new W(k(m.g),m.h);if(30<E.g.length){if(O(E)||O(m))throw Error("slowDivide_ only works with positive integers.");for(var y=A,_=m;0>=_.l(E);)y=qe(y),_=qe(_);var v=_e(y,1),x=_e(_,1);for(_=_e(_,2),y=_e(y,2);!V(_);){var p=x.add(_);0>=p.l(E)&&(v=v.add(y),x=p),_=_e(_,1),y=_e(y,1)}return m=Q(E,v.j(m)),new W(v,m)}for(v=I;0<=E.l(m);){for(y=Math.max(1,Math.floor(E.m()/m.m())),_=Math.ceil(Math.log(y)/Math.LN2),_=48>=_?1:Math.pow(2,_-48),x=g(y),p=x.j(m);O(p)||0<p.l(E);)y-=_,x=g(y),p=x.j(m);V(x)&&(x=A),v=v.add(x),E=Q(E,p)}return new W(v,E)}n.A=function(E){return le(this,E).h},n.and=function(E){for(var m=Math.max(this.g.length,E.g.length),y=[],_=0;_<m;_++)y[_]=this.i(_)&E.i(_);return new c(y,this.h&E.h)},n.or=function(E){for(var m=Math.max(this.g.length,E.g.length),y=[],_=0;_<m;_++)y[_]=this.i(_)|E.i(_);return new c(y,this.h|E.h)},n.xor=function(E){for(var m=Math.max(this.g.length,E.g.length),y=[],_=0;_<m;_++)y[_]=this.i(_)^E.i(_);return new c(y,this.h^E.h)};function qe(E){for(var m=E.g.length+1,y=[],_=0;_<m;_++)y[_]=E.i(_)<<1|E.i(_-1)>>>31;return new c(y,E.h)}function _e(E,m){var y=m>>5;m%=32;for(var _=E.g.length-y,v=[],x=0;x<_;x++)v[x]=0<m?E.i(x+y)>>>m|E.i(x+y+1)<<32-m:E.i(x+y);return new c(v,E.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=g,c.fromString=T,Ro=c}).apply(typeof Li<"u"?Li:typeof self<"u"?self:typeof window<"u"?window:{});var An=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Co,$t,No,Pn,zr,So,Po,Vo;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(r,a,l){return r==Array.prototype||r==Object.prototype||(r[a]=l.value),r};function t(r){r=[typeof globalThis=="object"&&globalThis,r,typeof window=="object"&&window,typeof self=="object"&&self,typeof An=="object"&&An];for(var a=0;a<r.length;++a){var l=r[a];if(l&&l.Math==Math)return l}throw Error("Cannot find global object")}var s=t(this);function i(r,a){if(a)e:{var l=s;r=r.split(".");for(var d=0;d<r.length-1;d++){var w=r[d];if(!(w in l))break e;l=l[w]}r=r[r.length-1],d=l[r],a=a(d),a!=d&&a!=null&&e(l,r,{configurable:!0,writable:!0,value:a})}}function o(r,a){r instanceof String&&(r+="");var l=0,d=!1,w={next:function(){if(!d&&l<r.length){var b=l++;return{value:a(b,r[b]),done:!1}}return d=!0,{done:!0,value:void 0}}};return w[Symbol.iterator]=function(){return w},w}i("Array.prototype.values",function(r){return r||function(){return o(this,function(a,l){return l})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},u=this||self;function f(r){var a=typeof r;return a=a!="object"?a:r?Array.isArray(r)?"array":a:"null",a=="array"||a=="object"&&typeof r.length=="number"}function g(r){var a=typeof r;return a=="object"&&r!=null||a=="function"}function T(r,a,l){return r.call.apply(r.bind,arguments)}function I(r,a,l){if(!r)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var w=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(w,d),r.apply(a,w)}}return function(){return r.apply(a,arguments)}}function A(r,a,l){return A=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?T:I,A.apply(null,arguments)}function N(r,a){var l=Array.prototype.slice.call(arguments,1);return function(){var d=l.slice();return d.push.apply(d,arguments),r.apply(this,d)}}function V(r,a){function l(){}l.prototype=a.prototype,r.aa=a.prototype,r.prototype=new l,r.prototype.constructor=r,r.Qb=function(d,w,b){for(var S=Array(arguments.length-2),H=2;H<arguments.length;H++)S[H-2]=arguments[H];return a.prototype[w].apply(d,S)}}function O(r){const a=r.length;if(0<a){const l=Array(a);for(let d=0;d<a;d++)l[d]=r[d];return l}return[]}function k(r,a){for(let l=1;l<arguments.length;l++){const d=arguments[l];if(f(d)){const w=r.length||0,b=d.length||0;r.length=w+b;for(let S=0;S<b;S++)r[w+S]=d[S]}else r.push(d)}}class Q{constructor(a,l){this.i=a,this.j=l,this.h=0,this.g=null}get(){let a;return 0<this.h?(this.h--,a=this.g,this.g=a.next,a.next=null):a=this.i(),a}}function K(r){return/^[\s\xa0]*$/.test(r)}function W(){var r=u.navigator;return r&&(r=r.userAgent)?r:""}function le(r){return le[" "](r),r}le[" "]=function(){};var qe=W().indexOf("Gecko")!=-1&&!(W().toLowerCase().indexOf("webkit")!=-1&&W().indexOf("Edge")==-1)&&!(W().indexOf("Trident")!=-1||W().indexOf("MSIE")!=-1)&&W().indexOf("Edge")==-1;function _e(r,a,l){for(const d in r)a.call(l,r[d],d,r)}function E(r,a){for(const l in r)a.call(void 0,r[l],l,r)}function m(r){const a={};for(const l in r)a[l]=r[l];return a}const y="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function _(r,a){let l,d;for(let w=1;w<arguments.length;w++){d=arguments[w];for(l in d)r[l]=d[l];for(let b=0;b<y.length;b++)l=y[b],Object.prototype.hasOwnProperty.call(d,l)&&(r[l]=d[l])}}function v(r){var a=1;r=r.split(":");const l=[];for(;0<a&&r.length;)l.push(r.shift()),a--;return r.length&&l.push(r.join(":")),l}function x(r){u.setTimeout(()=>{throw r},0)}function p(){var r=ar;let a=null;return r.g&&(a=r.g,r.g=r.g.next,r.g||(r.h=null),a.next=null),a}class Ce{constructor(){this.h=this.g=null}add(a,l){const d=bt.get();d.set(a,l),this.h?this.h.next=d:this.g=d,this.h=d}}var bt=new Q(()=>new Ca,r=>r.reset());class Ca{constructor(){this.next=this.g=this.h=null}set(a,l){this.h=a,this.g=l,this.next=null}reset(){this.next=this.g=this.h=null}}let It,At=!1,ar=new Ce,Is=()=>{const r=u.Promise.resolve(void 0);It=()=>{r.then(Na)}};var Na=()=>{for(var r;r=p();){try{r.h.call(r.g)}catch(l){x(l)}var a=bt;a.j(r),100>a.h&&(a.h++,r.next=a.g,a.g=r)}At=!1};function ke(){this.s=this.s,this.C=this.C}ke.prototype.s=!1,ke.prototype.ma=function(){this.s||(this.s=!0,this.N())},ke.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ce(r,a){this.type=r,this.g=this.target=a,this.defaultPrevented=!1}ce.prototype.h=function(){this.defaultPrevented=!0};var Sa=function(){if(!u.addEventListener||!Object.defineProperty)return!1;var r=!1,a=Object.defineProperty({},"passive",{get:function(){r=!0}});try{const l=()=>{};u.addEventListener("test",l,a),u.removeEventListener("test",l,a)}catch{}return r}();function Rt(r,a){if(ce.call(this,r?r.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,r){var l=this.type=r.type,d=r.changedTouches&&r.changedTouches.length?r.changedTouches[0]:null;if(this.target=r.target||r.srcElement,this.g=a,a=r.relatedTarget){if(qe){e:{try{le(a.nodeName);var w=!0;break e}catch{}w=!1}w||(a=null)}}else l=="mouseover"?a=r.fromElement:l=="mouseout"&&(a=r.toElement);this.relatedTarget=a,d?(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0):(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0),this.button=r.button,this.key=r.key||"",this.ctrlKey=r.ctrlKey,this.altKey=r.altKey,this.shiftKey=r.shiftKey,this.metaKey=r.metaKey,this.pointerId=r.pointerId||0,this.pointerType=typeof r.pointerType=="string"?r.pointerType:Pa[r.pointerType]||"",this.state=r.state,this.i=r,r.defaultPrevented&&Rt.aa.h.call(this)}}V(Rt,ce);var Pa={2:"touch",3:"pen",4:"mouse"};Rt.prototype.h=function(){Rt.aa.h.call(this);var r=this.i;r.preventDefault?r.preventDefault():r.returnValue=!1};var on="closure_listenable_"+(1e6*Math.random()|0),Va=0;function Da(r,a,l,d,w){this.listener=r,this.proxy=null,this.src=a,this.type=l,this.capture=!!d,this.ha=w,this.key=++Va,this.da=this.fa=!1}function an(r){r.da=!0,r.listener=null,r.proxy=null,r.src=null,r.ha=null}function ln(r){this.src=r,this.g={},this.h=0}ln.prototype.add=function(r,a,l,d,w){var b=r.toString();r=this.g[b],r||(r=this.g[b]=[],this.h++);var S=cr(r,a,d,w);return-1<S?(a=r[S],l||(a.fa=!1)):(a=new Da(a,this.src,b,!!d,w),a.fa=l,r.push(a)),a};function lr(r,a){var l=a.type;if(l in r.g){var d=r.g[l],w=Array.prototype.indexOf.call(d,a,void 0),b;(b=0<=w)&&Array.prototype.splice.call(d,w,1),b&&(an(a),r.g[l].length==0&&(delete r.g[l],r.h--))}}function cr(r,a,l,d){for(var w=0;w<r.length;++w){var b=r[w];if(!b.da&&b.listener==a&&b.capture==!!l&&b.ha==d)return w}return-1}var ur="closure_lm_"+(1e6*Math.random()|0),hr={};function As(r,a,l,d,w){if(Array.isArray(a)){for(var b=0;b<a.length;b++)As(r,a[b],l,d,w);return null}return l=Ns(l),r&&r[on]?r.K(a,l,g(d)?!!d.capture:!1,w):ka(r,a,l,!1,d,w)}function ka(r,a,l,d,w,b){if(!a)throw Error("Invalid event type");var S=g(w)?!!w.capture:!!w,H=fr(r);if(H||(r[ur]=H=new ln(r)),l=H.add(a,l,d,S,b),l.proxy)return l;if(d=ja(),l.proxy=d,d.src=r,d.listener=l,r.addEventListener)Sa||(w=S),w===void 0&&(w=!1),r.addEventListener(a.toString(),d,w);else if(r.attachEvent)r.attachEvent(Cs(a.toString()),d);else if(r.addListener&&r.removeListener)r.addListener(d);else throw Error("addEventListener and attachEvent are unavailable.");return l}function ja(){function r(l){return a.call(r.src,r.listener,l)}const a=Oa;return r}function Rs(r,a,l,d,w){if(Array.isArray(a))for(var b=0;b<a.length;b++)Rs(r,a[b],l,d,w);else d=g(d)?!!d.capture:!!d,l=Ns(l),r&&r[on]?(r=r.i,a=String(a).toString(),a in r.g&&(b=r.g[a],l=cr(b,l,d,w),-1<l&&(an(b[l]),Array.prototype.splice.call(b,l,1),b.length==0&&(delete r.g[a],r.h--)))):r&&(r=fr(r))&&(a=r.g[a.toString()],r=-1,a&&(r=cr(a,l,d,w)),(l=-1<r?a[r]:null)&&dr(l))}function dr(r){if(typeof r!="number"&&r&&!r.da){var a=r.src;if(a&&a[on])lr(a.i,r);else{var l=r.type,d=r.proxy;a.removeEventListener?a.removeEventListener(l,d,r.capture):a.detachEvent?a.detachEvent(Cs(l),d):a.addListener&&a.removeListener&&a.removeListener(d),(l=fr(a))?(lr(l,r),l.h==0&&(l.src=null,a[ur]=null)):an(r)}}}function Cs(r){return r in hr?hr[r]:hr[r]="on"+r}function Oa(r,a){if(r.da)r=!0;else{a=new Rt(a,this);var l=r.listener,d=r.ha||r.src;r.fa&&dr(r),r=l.call(d,a)}return r}function fr(r){return r=r[ur],r instanceof ln?r:null}var mr="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ns(r){return typeof r=="function"?r:(r[mr]||(r[mr]=function(a){return r.handleEvent(a)}),r[mr])}function ue(){ke.call(this),this.i=new ln(this),this.M=this,this.F=null}V(ue,ke),ue.prototype[on]=!0,ue.prototype.removeEventListener=function(r,a,l,d){Rs(this,r,a,l,d)};function ge(r,a){var l,d=r.F;if(d)for(l=[];d;d=d.F)l.push(d);if(r=r.M,d=a.type||a,typeof a=="string")a=new ce(a,r);else if(a instanceof ce)a.target=a.target||r;else{var w=a;a=new ce(d,r),_(a,w)}if(w=!0,l)for(var b=l.length-1;0<=b;b--){var S=a.g=l[b];w=cn(S,d,!0,a)&&w}if(S=a.g=r,w=cn(S,d,!0,a)&&w,w=cn(S,d,!1,a)&&w,l)for(b=0;b<l.length;b++)S=a.g=l[b],w=cn(S,d,!1,a)&&w}ue.prototype.N=function(){if(ue.aa.N.call(this),this.i){var r=this.i,a;for(a in r.g){for(var l=r.g[a],d=0;d<l.length;d++)an(l[d]);delete r.g[a],r.h--}}this.F=null},ue.prototype.K=function(r,a,l,d){return this.i.add(String(r),a,!1,l,d)},ue.prototype.L=function(r,a,l,d){return this.i.add(String(r),a,!0,l,d)};function cn(r,a,l,d){if(a=r.i.g[String(a)],!a)return!0;a=a.concat();for(var w=!0,b=0;b<a.length;++b){var S=a[b];if(S&&!S.da&&S.capture==l){var H=S.listener,re=S.ha||S.src;S.fa&&lr(r.i,S),w=H.call(re,d)!==!1&&w}}return w&&!d.defaultPrevented}function Ss(r,a,l){if(typeof r=="function")l&&(r=A(r,l));else if(r&&typeof r.handleEvent=="function")r=A(r.handleEvent,r);else throw Error("Invalid listener argument");return 2147483647<Number(a)?-1:u.setTimeout(r,a||0)}function Ps(r){r.g=Ss(()=>{r.g=null,r.i&&(r.i=!1,Ps(r))},r.l);const a=r.h;r.h=null,r.m.apply(null,a)}class Ma extends ke{constructor(a,l){super(),this.m=a,this.l=l,this.h=null,this.i=!1,this.g=null}j(a){this.h=arguments,this.g?this.i=!0:Ps(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ct(r){ke.call(this),this.h=r,this.g={}}V(Ct,ke);var Vs=[];function Ds(r){_e(r.g,function(a,l){this.g.hasOwnProperty(l)&&dr(a)},r),r.g={}}Ct.prototype.N=function(){Ct.aa.N.call(this),Ds(this)},Ct.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var pr=u.JSON.stringify,La=u.JSON.parse,Fa=class{stringify(r){return u.JSON.stringify(r,void 0)}parse(r){return u.JSON.parse(r,void 0)}};function gr(){}gr.prototype.h=null;function ks(r){return r.h||(r.h=r.i())}function js(){}var Nt={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function yr(){ce.call(this,"d")}V(yr,ce);function _r(){ce.call(this,"c")}V(_r,ce);var ze={},Os=null;function un(){return Os=Os||new ue}ze.La="serverreachability";function Ms(r){ce.call(this,ze.La,r)}V(Ms,ce);function St(r){const a=un();ge(a,new Ms(a))}ze.STAT_EVENT="statevent";function Ls(r,a){ce.call(this,ze.STAT_EVENT,r),this.stat=a}V(Ls,ce);function ye(r){const a=un();ge(a,new Ls(a,r))}ze.Ma="timingevent";function Fs(r,a){ce.call(this,ze.Ma,r),this.size=a}V(Fs,ce);function Pt(r,a){if(typeof r!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){r()},a)}function Vt(){this.g=!0}Vt.prototype.xa=function(){this.g=!1};function Ba(r,a,l,d,w,b){r.info(function(){if(r.g)if(b)for(var S="",H=b.split("&"),re=0;re<H.length;re++){var U=H[re].split("=");if(1<U.length){var he=U[0];U=U[1];var de=he.split("_");S=2<=de.length&&de[1]=="type"?S+(he+"="+U+"&"):S+(he+"=redacted&")}}else S=null;else S=b;return"XMLHTTP REQ ("+d+") [attempt "+w+"]: "+a+`
`+l+`
`+S})}function Ua(r,a,l,d,w,b,S){r.info(function(){return"XMLHTTP RESP ("+d+") [ attempt "+w+"]: "+a+`
`+l+`
`+b+" "+S})}function ot(r,a,l,d){r.info(function(){return"XMLHTTP TEXT ("+a+"): "+Ha(r,l)+(d?" "+d:"")})}function $a(r,a){r.info(function(){return"TIMEOUT: "+a})}Vt.prototype.info=function(){};function Ha(r,a){if(!r.g)return a;if(!a)return null;try{var l=JSON.parse(a);if(l){for(r=0;r<l.length;r++)if(Array.isArray(l[r])){var d=l[r];if(!(2>d.length)){var w=d[1];if(Array.isArray(w)&&!(1>w.length)){var b=w[0];if(b!="noop"&&b!="stop"&&b!="close")for(var S=1;S<w.length;S++)w[S]=""}}}}return pr(l)}catch{return a}}var hn={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Bs={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},vr;function dn(){}V(dn,gr),dn.prototype.g=function(){return new XMLHttpRequest},dn.prototype.i=function(){return{}},vr=new dn;function je(r,a,l,d){this.j=r,this.i=a,this.l=l,this.R=d||1,this.U=new Ct(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Us}function Us(){this.i=null,this.g="",this.h=!1}var $s={},Er={};function wr(r,a,l){r.L=1,r.v=gn(Ne(a)),r.m=l,r.P=!0,Hs(r,null)}function Hs(r,a){r.F=Date.now(),fn(r),r.A=Ne(r.v);var l=r.A,d=r.R;Array.isArray(d)||(d=[String(d)]),ri(l.i,"t",d),r.C=0,l=r.j.J,r.h=new Us,r.g=wi(r.j,l?a:null,!r.m),0<r.O&&(r.M=new Ma(A(r.Y,r,r.g),r.O)),a=r.U,l=r.g,d=r.ca;var w="readystatechange";Array.isArray(w)||(w&&(Vs[0]=w.toString()),w=Vs);for(var b=0;b<w.length;b++){var S=As(l,w[b],d||a.handleEvent,!1,a.h||a);if(!S)break;a.g[S.key]=S}a=r.H?m(r.H):{},r.m?(r.u||(r.u="POST"),a["Content-Type"]="application/x-www-form-urlencoded",r.g.ea(r.A,r.u,r.m,a)):(r.u="GET",r.g.ea(r.A,r.u,null,a)),St(),Ba(r.i,r.u,r.A,r.l,r.R,r.m)}je.prototype.ca=function(r){r=r.target;const a=this.M;a&&Se(r)==3?a.j():this.Y(r)},je.prototype.Y=function(r){try{if(r==this.g)e:{const de=Se(this.g);var a=this.g.Ba();const ct=this.g.Z();if(!(3>de)&&(de!=3||this.g&&(this.h.h||this.g.oa()||ui(this.g)))){this.J||de!=4||a==7||(a==8||0>=ct?St(3):St(2)),xr(this);var l=this.g.Z();this.X=l;t:if(qs(this)){var d=ui(this.g);r="";var w=d.length,b=Se(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ge(this),Dt(this);var S="";break t}this.h.i=new u.TextDecoder}for(a=0;a<w;a++)this.h.h=!0,r+=this.h.i.decode(d[a],{stream:!(b&&a==w-1)});d.length=0,this.h.g+=r,this.C=0,S=this.h.g}else S=this.g.oa();if(this.o=l==200,Ua(this.i,this.u,this.A,this.l,this.R,de,l),this.o){if(this.T&&!this.K){t:{if(this.g){var H,re=this.g;if((H=re.g?re.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!K(H)){var U=H;break t}}U=null}if(l=U)ot(this.i,this.l,l,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Tr(this,l);else{this.o=!1,this.s=3,ye(12),Ge(this),Dt(this);break e}}if(this.P){l=!0;let xe;for(;!this.J&&this.C<S.length;)if(xe=qa(this,S),xe==Er){de==4&&(this.s=4,ye(14),l=!1),ot(this.i,this.l,null,"[Incomplete Response]");break}else if(xe==$s){this.s=4,ye(15),ot(this.i,this.l,S,"[Invalid Chunk]"),l=!1;break}else ot(this.i,this.l,xe,null),Tr(this,xe);if(qs(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),de!=4||S.length!=0||this.h.h||(this.s=1,ye(16),l=!1),this.o=this.o&&l,!l)ot(this.i,this.l,S,"[Invalid Chunked Response]"),Ge(this),Dt(this);else if(0<S.length&&!this.W){this.W=!0;var he=this.j;he.g==this&&he.ba&&!he.M&&(he.j.info("Great, no buffering proxy detected. Bytes received: "+S.length),Nr(he),he.M=!0,ye(11))}}else ot(this.i,this.l,S,null),Tr(this,S);de==4&&Ge(this),this.o&&!this.J&&(de==4?yi(this.j,this):(this.o=!1,fn(this)))}else al(this.g),l==400&&0<S.indexOf("Unknown SID")?(this.s=3,ye(12)):(this.s=0,ye(13)),Ge(this),Dt(this)}}}catch{}finally{}};function qs(r){return r.g?r.u=="GET"&&r.L!=2&&r.j.Ca:!1}function qa(r,a){var l=r.C,d=a.indexOf(`
`,l);return d==-1?Er:(l=Number(a.substring(l,d)),isNaN(l)?$s:(d+=1,d+l>a.length?Er:(a=a.slice(d,d+l),r.C=d+l,a)))}je.prototype.cancel=function(){this.J=!0,Ge(this)};function fn(r){r.S=Date.now()+r.I,zs(r,r.I)}function zs(r,a){if(r.B!=null)throw Error("WatchDog timer not null");r.B=Pt(A(r.ba,r),a)}function xr(r){r.B&&(u.clearTimeout(r.B),r.B=null)}je.prototype.ba=function(){this.B=null;const r=Date.now();0<=r-this.S?($a(this.i,this.A),this.L!=2&&(St(),ye(17)),Ge(this),this.s=2,Dt(this)):zs(this,this.S-r)};function Dt(r){r.j.G==0||r.J||yi(r.j,r)}function Ge(r){xr(r);var a=r.M;a&&typeof a.ma=="function"&&a.ma(),r.M=null,Ds(r.U),r.g&&(a=r.g,r.g=null,a.abort(),a.ma())}function Tr(r,a){try{var l=r.j;if(l.G!=0&&(l.g==r||br(l.h,r))){if(!r.K&&br(l.h,r)&&l.G==3){try{var d=l.Da.g.parse(a)}catch{d=null}if(Array.isArray(d)&&d.length==3){var w=d;if(w[0]==0){e:if(!l.u){if(l.g)if(l.g.F+3e3<r.F)xn(l),En(l);else break e;Cr(l),ye(18)}}else l.za=w[1],0<l.za-l.T&&37500>w[2]&&l.F&&l.v==0&&!l.C&&(l.C=Pt(A(l.Za,l),6e3));if(1>=Qs(l.h)&&l.ca){try{l.ca()}catch{}l.ca=void 0}}else Qe(l,11)}else if((r.K||l.g==r)&&xn(l),!K(a))for(w=l.Da.g.parse(a),a=0;a<w.length;a++){let U=w[a];if(l.T=U[0],U=U[1],l.G==2)if(U[0]=="c"){l.K=U[1],l.ia=U[2];const he=U[3];he!=null&&(l.la=he,l.j.info("VER="+l.la));const de=U[4];de!=null&&(l.Aa=de,l.j.info("SVER="+l.Aa));const ct=U[5];ct!=null&&typeof ct=="number"&&0<ct&&(d=1.5*ct,l.L=d,l.j.info("backChannelRequestTimeoutMs_="+d)),d=l;const xe=r.g;if(xe){const bn=xe.g?xe.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(bn){var b=d.h;b.g||bn.indexOf("spdy")==-1&&bn.indexOf("quic")==-1&&bn.indexOf("h2")==-1||(b.j=b.l,b.g=new Set,b.h&&(Ir(b,b.h),b.h=null))}if(d.D){const Sr=xe.g?xe.g.getResponseHeader("X-HTTP-Session-Id"):null;Sr&&(d.ya=Sr,z(d.I,d.D,Sr))}}l.G=3,l.l&&l.l.ua(),l.ba&&(l.R=Date.now()-r.F,l.j.info("Handshake RTT: "+l.R+"ms")),d=l;var S=r;if(d.qa=Ei(d,d.J?d.ia:null,d.W),S.K){Ws(d.h,S);var H=S,re=d.L;re&&(H.I=re),H.B&&(xr(H),fn(H)),d.g=S}else pi(d);0<l.i.length&&wn(l)}else U[0]!="stop"&&U[0]!="close"||Qe(l,7);else l.G==3&&(U[0]=="stop"||U[0]=="close"?U[0]=="stop"?Qe(l,7):Rr(l):U[0]!="noop"&&l.l&&l.l.ta(U),l.v=0)}}St(4)}catch{}}var za=class{constructor(r,a){this.g=r,this.map=a}};function Gs(r){this.l=r||10,u.PerformanceNavigationTiming?(r=u.performance.getEntriesByType("navigation"),r=0<r.length&&(r[0].nextHopProtocol=="hq"||r[0].nextHopProtocol=="h2")):r=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=r?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ks(r){return r.h?!0:r.g?r.g.size>=r.j:!1}function Qs(r){return r.h?1:r.g?r.g.size:0}function br(r,a){return r.h?r.h==a:r.g?r.g.has(a):!1}function Ir(r,a){r.g?r.g.add(a):r.h=a}function Ws(r,a){r.h&&r.h==a?r.h=null:r.g&&r.g.has(a)&&r.g.delete(a)}Gs.prototype.cancel=function(){if(this.i=Xs(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const r of this.g.values())r.cancel();this.g.clear()}};function Xs(r){if(r.h!=null)return r.i.concat(r.h.D);if(r.g!=null&&r.g.size!==0){let a=r.i;for(const l of r.g.values())a=a.concat(l.D);return a}return O(r.i)}function Ga(r){if(r.V&&typeof r.V=="function")return r.V();if(typeof Map<"u"&&r instanceof Map||typeof Set<"u"&&r instanceof Set)return Array.from(r.values());if(typeof r=="string")return r.split("");if(f(r)){for(var a=[],l=r.length,d=0;d<l;d++)a.push(r[d]);return a}a=[],l=0;for(d in r)a[l++]=r[d];return a}function Ka(r){if(r.na&&typeof r.na=="function")return r.na();if(!r.V||typeof r.V!="function"){if(typeof Map<"u"&&r instanceof Map)return Array.from(r.keys());if(!(typeof Set<"u"&&r instanceof Set)){if(f(r)||typeof r=="string"){var a=[];r=r.length;for(var l=0;l<r;l++)a.push(l);return a}a=[],l=0;for(const d in r)a[l++]=d;return a}}}function Js(r,a){if(r.forEach&&typeof r.forEach=="function")r.forEach(a,void 0);else if(f(r)||typeof r=="string")Array.prototype.forEach.call(r,a,void 0);else for(var l=Ka(r),d=Ga(r),w=d.length,b=0;b<w;b++)a.call(void 0,d[b],l&&l[b],r)}var Ys=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Qa(r,a){if(r){r=r.split("&");for(var l=0;l<r.length;l++){var d=r[l].indexOf("="),w=null;if(0<=d){var b=r[l].substring(0,d);w=r[l].substring(d+1)}else b=r[l];a(b,w?decodeURIComponent(w.replace(/\+/g," ")):"")}}}function Ke(r){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,r instanceof Ke){this.h=r.h,mn(this,r.j),this.o=r.o,this.g=r.g,pn(this,r.s),this.l=r.l;var a=r.i,l=new Ot;l.i=a.i,a.g&&(l.g=new Map(a.g),l.h=a.h),Zs(this,l),this.m=r.m}else r&&(a=String(r).match(Ys))?(this.h=!1,mn(this,a[1]||"",!0),this.o=kt(a[2]||""),this.g=kt(a[3]||"",!0),pn(this,a[4]),this.l=kt(a[5]||"",!0),Zs(this,a[6]||"",!0),this.m=kt(a[7]||"")):(this.h=!1,this.i=new Ot(null,this.h))}Ke.prototype.toString=function(){var r=[],a=this.j;a&&r.push(jt(a,ei,!0),":");var l=this.g;return(l||a=="file")&&(r.push("//"),(a=this.o)&&r.push(jt(a,ei,!0),"@"),r.push(encodeURIComponent(String(l)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l=this.s,l!=null&&r.push(":",String(l))),(l=this.l)&&(this.g&&l.charAt(0)!="/"&&r.push("/"),r.push(jt(l,l.charAt(0)=="/"?Ja:Xa,!0))),(l=this.i.toString())&&r.push("?",l),(l=this.m)&&r.push("#",jt(l,Za)),r.join("")};function Ne(r){return new Ke(r)}function mn(r,a,l){r.j=l?kt(a,!0):a,r.j&&(r.j=r.j.replace(/:$/,""))}function pn(r,a){if(a){if(a=Number(a),isNaN(a)||0>a)throw Error("Bad port number "+a);r.s=a}else r.s=null}function Zs(r,a,l){a instanceof Ot?(r.i=a,el(r.i,r.h)):(l||(a=jt(a,Ya)),r.i=new Ot(a,r.h))}function z(r,a,l){r.i.set(a,l)}function gn(r){return z(r,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),r}function kt(r,a){return r?a?decodeURI(r.replace(/%25/g,"%2525")):decodeURIComponent(r):""}function jt(r,a,l){return typeof r=="string"?(r=encodeURI(r).replace(a,Wa),l&&(r=r.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),r):null}function Wa(r){return r=r.charCodeAt(0),"%"+(r>>4&15).toString(16)+(r&15).toString(16)}var ei=/[#\/\?@]/g,Xa=/[#\?:]/g,Ja=/[#\?]/g,Ya=/[#\?@]/g,Za=/#/g;function Ot(r,a){this.h=this.g=null,this.i=r||null,this.j=!!a}function Oe(r){r.g||(r.g=new Map,r.h=0,r.i&&Qa(r.i,function(a,l){r.add(decodeURIComponent(a.replace(/\+/g," ")),l)}))}n=Ot.prototype,n.add=function(r,a){Oe(this),this.i=null,r=at(this,r);var l=this.g.get(r);return l||this.g.set(r,l=[]),l.push(a),this.h+=1,this};function ti(r,a){Oe(r),a=at(r,a),r.g.has(a)&&(r.i=null,r.h-=r.g.get(a).length,r.g.delete(a))}function ni(r,a){return Oe(r),a=at(r,a),r.g.has(a)}n.forEach=function(r,a){Oe(this),this.g.forEach(function(l,d){l.forEach(function(w){r.call(a,w,d,this)},this)},this)},n.na=function(){Oe(this);const r=Array.from(this.g.values()),a=Array.from(this.g.keys()),l=[];for(let d=0;d<a.length;d++){const w=r[d];for(let b=0;b<w.length;b++)l.push(a[d])}return l},n.V=function(r){Oe(this);let a=[];if(typeof r=="string")ni(this,r)&&(a=a.concat(this.g.get(at(this,r))));else{r=Array.from(this.g.values());for(let l=0;l<r.length;l++)a=a.concat(r[l])}return a},n.set=function(r,a){return Oe(this),this.i=null,r=at(this,r),ni(this,r)&&(this.h-=this.g.get(r).length),this.g.set(r,[a]),this.h+=1,this},n.get=function(r,a){return r?(r=this.V(r),0<r.length?String(r[0]):a):a};function ri(r,a,l){ti(r,a),0<l.length&&(r.i=null,r.g.set(at(r,a),O(l)),r.h+=l.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const r=[],a=Array.from(this.g.keys());for(var l=0;l<a.length;l++){var d=a[l];const b=encodeURIComponent(String(d)),S=this.V(d);for(d=0;d<S.length;d++){var w=b;S[d]!==""&&(w+="="+encodeURIComponent(String(S[d]))),r.push(w)}}return this.i=r.join("&")};function at(r,a){return a=String(a),r.j&&(a=a.toLowerCase()),a}function el(r,a){a&&!r.j&&(Oe(r),r.i=null,r.g.forEach(function(l,d){var w=d.toLowerCase();d!=w&&(ti(this,d),ri(this,w,l))},r)),r.j=a}function tl(r,a){const l=new Vt;if(u.Image){const d=new Image;d.onload=N(Me,l,"TestLoadImage: loaded",!0,a,d),d.onerror=N(Me,l,"TestLoadImage: error",!1,a,d),d.onabort=N(Me,l,"TestLoadImage: abort",!1,a,d),d.ontimeout=N(Me,l,"TestLoadImage: timeout",!1,a,d),u.setTimeout(function(){d.ontimeout&&d.ontimeout()},1e4),d.src=r}else a(!1)}function nl(r,a){const l=new Vt,d=new AbortController,w=setTimeout(()=>{d.abort(),Me(l,"TestPingServer: timeout",!1,a)},1e4);fetch(r,{signal:d.signal}).then(b=>{clearTimeout(w),b.ok?Me(l,"TestPingServer: ok",!0,a):Me(l,"TestPingServer: server error",!1,a)}).catch(()=>{clearTimeout(w),Me(l,"TestPingServer: error",!1,a)})}function Me(r,a,l,d,w){try{w&&(w.onload=null,w.onerror=null,w.onabort=null,w.ontimeout=null),d(l)}catch{}}function rl(){this.g=new Fa}function sl(r,a,l){const d=l||"";try{Js(r,function(w,b){let S=w;g(w)&&(S=pr(w)),a.push(d+b+"="+encodeURIComponent(S))})}catch(w){throw a.push(d+"type="+encodeURIComponent("_badmap")),w}}function yn(r){this.l=r.Ub||null,this.j=r.eb||!1}V(yn,gr),yn.prototype.g=function(){return new _n(this.l,this.j)},yn.prototype.i=function(r){return function(){return r}}({});function _n(r,a){ue.call(this),this.D=r,this.o=a,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}V(_n,ue),n=_n.prototype,n.open=function(r,a){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=r,this.A=a,this.readyState=1,Lt(this)},n.send=function(r){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const a={headers:this.u,method:this.B,credentials:this.m,cache:void 0};r&&(a.body=r),(this.D||u).fetch(new Request(this.A,a)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Mt(this)),this.readyState=0},n.Sa=function(r){if(this.g&&(this.l=r,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=r.headers,this.readyState=2,Lt(this)),this.g&&(this.readyState=3,Lt(this),this.g)))if(this.responseType==="arraybuffer")r.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in r){if(this.j=r.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;si(this)}else r.text().then(this.Ra.bind(this),this.ga.bind(this))};function si(r){r.j.read().then(r.Pa.bind(r)).catch(r.ga.bind(r))}n.Pa=function(r){if(this.g){if(this.o&&r.value)this.response.push(r.value);else if(!this.o){var a=r.value?r.value:new Uint8Array(0);(a=this.v.decode(a,{stream:!r.done}))&&(this.response=this.responseText+=a)}r.done?Mt(this):Lt(this),this.readyState==3&&si(this)}},n.Ra=function(r){this.g&&(this.response=this.responseText=r,Mt(this))},n.Qa=function(r){this.g&&(this.response=r,Mt(this))},n.ga=function(){this.g&&Mt(this)};function Mt(r){r.readyState=4,r.l=null,r.j=null,r.v=null,Lt(r)}n.setRequestHeader=function(r,a){this.u.append(r,a)},n.getResponseHeader=function(r){return this.h&&this.h.get(r.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const r=[],a=this.h.entries();for(var l=a.next();!l.done;)l=l.value,r.push(l[0]+": "+l[1]),l=a.next();return r.join(`\r
`)};function Lt(r){r.onreadystatechange&&r.onreadystatechange.call(r)}Object.defineProperty(_n.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(r){this.m=r?"include":"same-origin"}});function ii(r){let a="";return _e(r,function(l,d){a+=d,a+=":",a+=l,a+=`\r
`}),a}function Ar(r,a,l){e:{for(d in l){var d=!1;break e}d=!0}d||(l=ii(l),typeof r=="string"?l!=null&&encodeURIComponent(String(l)):z(r,a,l))}function X(r){ue.call(this),this.headers=new Map,this.o=r||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}V(X,ue);var il=/^https?$/i,ol=["POST","PUT"];n=X.prototype,n.Ha=function(r){this.J=r},n.ea=function(r,a,l,d){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+r);a=a?a.toUpperCase():"GET",this.D=r,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():vr.g(),this.v=this.o?ks(this.o):ks(vr),this.g.onreadystatechange=A(this.Ea,this);try{this.B=!0,this.g.open(a,String(r),!0),this.B=!1}catch(b){oi(this,b);return}if(r=l||"",l=new Map(this.headers),d)if(Object.getPrototypeOf(d)===Object.prototype)for(var w in d)l.set(w,d[w]);else if(typeof d.keys=="function"&&typeof d.get=="function")for(const b of d.keys())l.set(b,d.get(b));else throw Error("Unknown input type for opt_headers: "+String(d));d=Array.from(l.keys()).find(b=>b.toLowerCase()=="content-type"),w=u.FormData&&r instanceof u.FormData,!(0<=Array.prototype.indexOf.call(ol,a,void 0))||d||w||l.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[b,S]of l)this.g.setRequestHeader(b,S);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ci(this),this.u=!0,this.g.send(r),this.u=!1}catch(b){oi(this,b)}};function oi(r,a){r.h=!1,r.g&&(r.j=!0,r.g.abort(),r.j=!1),r.l=a,r.m=5,ai(r),vn(r)}function ai(r){r.A||(r.A=!0,ge(r,"complete"),ge(r,"error"))}n.abort=function(r){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=r||7,ge(this,"complete"),ge(this,"abort"),vn(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),vn(this,!0)),X.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?li(this):this.bb())},n.bb=function(){li(this)};function li(r){if(r.h&&typeof c<"u"&&(!r.v[1]||Se(r)!=4||r.Z()!=2)){if(r.u&&Se(r)==4)Ss(r.Ea,0,r);else if(ge(r,"readystatechange"),Se(r)==4){r.h=!1;try{const S=r.Z();e:switch(S){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var a=!0;break e;default:a=!1}var l;if(!(l=a)){var d;if(d=S===0){var w=String(r.D).match(Ys)[1]||null;!w&&u.self&&u.self.location&&(w=u.self.location.protocol.slice(0,-1)),d=!il.test(w?w.toLowerCase():"")}l=d}if(l)ge(r,"complete"),ge(r,"success");else{r.m=6;try{var b=2<Se(r)?r.g.statusText:""}catch{b=""}r.l=b+" ["+r.Z()+"]",ai(r)}}finally{vn(r)}}}}function vn(r,a){if(r.g){ci(r);const l=r.g,d=r.v[0]?()=>{}:null;r.g=null,r.v=null,a||ge(r,"ready");try{l.onreadystatechange=d}catch{}}}function ci(r){r.I&&(u.clearTimeout(r.I),r.I=null)}n.isActive=function(){return!!this.g};function Se(r){return r.g?r.g.readyState:0}n.Z=function(){try{return 2<Se(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(r){if(this.g){var a=this.g.responseText;return r&&a.indexOf(r)==0&&(a=a.substring(r.length)),La(a)}};function ui(r){try{if(!r.g)return null;if("response"in r.g)return r.g.response;switch(r.H){case"":case"text":return r.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in r.g)return r.g.mozResponseArrayBuffer}return null}catch{return null}}function al(r){const a={};r=(r.g&&2<=Se(r)&&r.g.getAllResponseHeaders()||"").split(`\r
`);for(let d=0;d<r.length;d++){if(K(r[d]))continue;var l=v(r[d]);const w=l[0];if(l=l[1],typeof l!="string")continue;l=l.trim();const b=a[w]||[];a[w]=b,b.push(l)}E(a,function(d){return d.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ft(r,a,l){return l&&l.internalChannelParams&&l.internalChannelParams[r]||a}function hi(r){this.Aa=0,this.i=[],this.j=new Vt,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ft("failFast",!1,r),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ft("baseRetryDelayMs",5e3,r),this.cb=Ft("retryDelaySeedMs",1e4,r),this.Wa=Ft("forwardChannelMaxRetries",2,r),this.wa=Ft("forwardChannelRequestTimeoutMs",2e4,r),this.pa=r&&r.xmlHttpFactory||void 0,this.Xa=r&&r.Tb||void 0,this.Ca=r&&r.useFetchStreams||!1,this.L=void 0,this.J=r&&r.supportsCrossDomainXhr||!1,this.K="",this.h=new Gs(r&&r.concurrentRequestLimit),this.Da=new rl,this.P=r&&r.fastHandshake||!1,this.O=r&&r.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=r&&r.Rb||!1,r&&r.xa&&this.j.xa(),r&&r.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&r&&r.detectBufferingProxy||!1,this.ja=void 0,r&&r.longPollingTimeout&&0<r.longPollingTimeout&&(this.ja=r.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=hi.prototype,n.la=8,n.G=1,n.connect=function(r,a,l,d){ye(0),this.W=r,this.H=a||{},l&&d!==void 0&&(this.H.OSID=l,this.H.OAID=d),this.F=this.X,this.I=Ei(this,null,this.W),wn(this)};function Rr(r){if(di(r),r.G==3){var a=r.U++,l=Ne(r.I);if(z(l,"SID",r.K),z(l,"RID",a),z(l,"TYPE","terminate"),Bt(r,l),a=new je(r,r.j,a),a.L=2,a.v=gn(Ne(l)),l=!1,u.navigator&&u.navigator.sendBeacon)try{l=u.navigator.sendBeacon(a.v.toString(),"")}catch{}!l&&u.Image&&(new Image().src=a.v,l=!0),l||(a.g=wi(a.j,null),a.g.ea(a.v)),a.F=Date.now(),fn(a)}vi(r)}function En(r){r.g&&(Nr(r),r.g.cancel(),r.g=null)}function di(r){En(r),r.u&&(u.clearTimeout(r.u),r.u=null),xn(r),r.h.cancel(),r.s&&(typeof r.s=="number"&&u.clearTimeout(r.s),r.s=null)}function wn(r){if(!Ks(r.h)&&!r.s){r.s=!0;var a=r.Ga;It||Is(),At||(It(),At=!0),ar.add(a,r),r.B=0}}function ll(r,a){return Qs(r.h)>=r.h.j-(r.s?1:0)?!1:r.s?(r.i=a.D.concat(r.i),!0):r.G==1||r.G==2||r.B>=(r.Va?0:r.Wa)?!1:(r.s=Pt(A(r.Ga,r,a),_i(r,r.B)),r.B++,!0)}n.Ga=function(r){if(this.s)if(this.s=null,this.G==1){if(!r){this.U=Math.floor(1e5*Math.random()),r=this.U++;const w=new je(this,this.j,r);let b=this.o;if(this.S&&(b?(b=m(b),_(b,this.S)):b=this.S),this.m!==null||this.O||(w.H=b,b=null),this.P)e:{for(var a=0,l=0;l<this.i.length;l++){t:{var d=this.i[l];if("__data__"in d.map&&(d=d.map.__data__,typeof d=="string")){d=d.length;break t}d=void 0}if(d===void 0)break;if(a+=d,4096<a){a=l;break e}if(a===4096||l===this.i.length-1){a=l+1;break e}}a=1e3}else a=1e3;a=mi(this,w,a),l=Ne(this.I),z(l,"RID",r),z(l,"CVER",22),this.D&&z(l,"X-HTTP-Session-Id",this.D),Bt(this,l),b&&(this.O?a="headers="+encodeURIComponent(String(ii(b)))+"&"+a:this.m&&Ar(l,this.m,b)),Ir(this.h,w),this.Ua&&z(l,"TYPE","init"),this.P?(z(l,"$req",a),z(l,"SID","null"),w.T=!0,wr(w,l,null)):wr(w,l,a),this.G=2}}else this.G==3&&(r?fi(this,r):this.i.length==0||Ks(this.h)||fi(this))};function fi(r,a){var l;a?l=a.l:l=r.U++;const d=Ne(r.I);z(d,"SID",r.K),z(d,"RID",l),z(d,"AID",r.T),Bt(r,d),r.m&&r.o&&Ar(d,r.m,r.o),l=new je(r,r.j,l,r.B+1),r.m===null&&(l.H=r.o),a&&(r.i=a.D.concat(r.i)),a=mi(r,l,1e3),l.I=Math.round(.5*r.wa)+Math.round(.5*r.wa*Math.random()),Ir(r.h,l),wr(l,d,a)}function Bt(r,a){r.H&&_e(r.H,function(l,d){z(a,d,l)}),r.l&&Js({},function(l,d){z(a,d,l)})}function mi(r,a,l){l=Math.min(r.i.length,l);var d=r.l?A(r.l.Na,r.l,r):null;e:{var w=r.i;let b=-1;for(;;){const S=["count="+l];b==-1?0<l?(b=w[0].g,S.push("ofs="+b)):b=0:S.push("ofs="+b);let H=!0;for(let re=0;re<l;re++){let U=w[re].g;const he=w[re].map;if(U-=b,0>U)b=Math.max(0,w[re].g-100),H=!1;else try{sl(he,S,"req"+U+"_")}catch{d&&d(he)}}if(H){d=S.join("&");break e}}}return r=r.i.splice(0,l),a.D=r,d}function pi(r){if(!r.g&&!r.u){r.Y=1;var a=r.Fa;It||Is(),At||(It(),At=!0),ar.add(a,r),r.v=0}}function Cr(r){return r.g||r.u||3<=r.v?!1:(r.Y++,r.u=Pt(A(r.Fa,r),_i(r,r.v)),r.v++,!0)}n.Fa=function(){if(this.u=null,gi(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var r=2*this.R;this.j.info("BP detection timer enabled: "+r),this.A=Pt(A(this.ab,this),r)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ye(10),En(this),gi(this))};function Nr(r){r.A!=null&&(u.clearTimeout(r.A),r.A=null)}function gi(r){r.g=new je(r,r.j,"rpc",r.Y),r.m===null&&(r.g.H=r.o),r.g.O=0;var a=Ne(r.qa);z(a,"RID","rpc"),z(a,"SID",r.K),z(a,"AID",r.T),z(a,"CI",r.F?"0":"1"),!r.F&&r.ja&&z(a,"TO",r.ja),z(a,"TYPE","xmlhttp"),Bt(r,a),r.m&&r.o&&Ar(a,r.m,r.o),r.L&&(r.g.I=r.L);var l=r.g;r=r.ia,l.L=1,l.v=gn(Ne(a)),l.m=null,l.P=!0,Hs(l,r)}n.Za=function(){this.C!=null&&(this.C=null,En(this),Cr(this),ye(19))};function xn(r){r.C!=null&&(u.clearTimeout(r.C),r.C=null)}function yi(r,a){var l=null;if(r.g==a){xn(r),Nr(r),r.g=null;var d=2}else if(br(r.h,a))l=a.D,Ws(r.h,a),d=1;else return;if(r.G!=0){if(a.o)if(d==1){l=a.m?a.m.length:0,a=Date.now()-a.F;var w=r.B;d=un(),ge(d,new Fs(d,l)),wn(r)}else pi(r);else if(w=a.s,w==3||w==0&&0<a.X||!(d==1&&ll(r,a)||d==2&&Cr(r)))switch(l&&0<l.length&&(a=r.h,a.i=a.i.concat(l)),w){case 1:Qe(r,5);break;case 4:Qe(r,10);break;case 3:Qe(r,6);break;default:Qe(r,2)}}}function _i(r,a){let l=r.Ta+Math.floor(Math.random()*r.cb);return r.isActive()||(l*=2),l*a}function Qe(r,a){if(r.j.info("Error code "+a),a==2){var l=A(r.fb,r),d=r.Xa;const w=!d;d=new Ke(d||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||mn(d,"https"),gn(d),w?tl(d.toString(),l):nl(d.toString(),l)}else ye(2);r.G=0,r.l&&r.l.sa(a),vi(r),di(r)}n.fb=function(r){r?(this.j.info("Successfully pinged google.com"),ye(2)):(this.j.info("Failed to ping google.com"),ye(1))};function vi(r){if(r.G=0,r.ka=[],r.l){const a=Xs(r.h);(a.length!=0||r.i.length!=0)&&(k(r.ka,a),k(r.ka,r.i),r.h.i.length=0,O(r.i),r.i.length=0),r.l.ra()}}function Ei(r,a,l){var d=l instanceof Ke?Ne(l):new Ke(l);if(d.g!="")a&&(d.g=a+"."+d.g),pn(d,d.s);else{var w=u.location;d=w.protocol,a=a?a+"."+w.hostname:w.hostname,w=+w.port;var b=new Ke(null);d&&mn(b,d),a&&(b.g=a),w&&pn(b,w),l&&(b.l=l),d=b}return l=r.D,a=r.ya,l&&a&&z(d,l,a),z(d,"VER",r.la),Bt(r,d),d}function wi(r,a,l){if(a&&!r.J)throw Error("Can't create secondary domain capable XhrIo object.");return a=r.Ca&&!r.pa?new X(new yn({eb:l})):new X(r.pa),a.Ha(r.J),a}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function xi(){}n=xi.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Tn(){}Tn.prototype.g=function(r,a){return new we(r,a)};function we(r,a){ue.call(this),this.g=new hi(a),this.l=r,this.h=a&&a.messageUrlParams||null,r=a&&a.messageHeaders||null,a&&a.clientProtocolHeaderRequired&&(r?r["X-Client-Protocol"]="webchannel":r={"X-Client-Protocol":"webchannel"}),this.g.o=r,r=a&&a.initMessageHeaders||null,a&&a.messageContentType&&(r?r["X-WebChannel-Content-Type"]=a.messageContentType:r={"X-WebChannel-Content-Type":a.messageContentType}),a&&a.va&&(r?r["X-WebChannel-Client-Profile"]=a.va:r={"X-WebChannel-Client-Profile":a.va}),this.g.S=r,(r=a&&a.Sb)&&!K(r)&&(this.g.m=r),this.v=a&&a.supportsCrossDomainXhr||!1,this.u=a&&a.sendRawJson||!1,(a=a&&a.httpSessionIdParam)&&!K(a)&&(this.g.D=a,r=this.h,r!==null&&a in r&&(r=this.h,a in r&&delete r[a])),this.j=new lt(this)}V(we,ue),we.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},we.prototype.close=function(){Rr(this.g)},we.prototype.o=function(r){var a=this.g;if(typeof r=="string"){var l={};l.__data__=r,r=l}else this.u&&(l={},l.__data__=pr(r),r=l);a.i.push(new za(a.Ya++,r)),a.G==3&&wn(a)},we.prototype.N=function(){this.g.l=null,delete this.j,Rr(this.g),delete this.g,we.aa.N.call(this)};function Ti(r){yr.call(this),r.__headers__&&(this.headers=r.__headers__,this.statusCode=r.__status__,delete r.__headers__,delete r.__status__);var a=r.__sm__;if(a){e:{for(const l in a){r=l;break e}r=void 0}(this.i=r)&&(r=this.i,a=a!==null&&r in a?a[r]:void 0),this.data=a}else this.data=r}V(Ti,yr);function bi(){_r.call(this),this.status=1}V(bi,_r);function lt(r){this.g=r}V(lt,xi),lt.prototype.ua=function(){ge(this.g,"a")},lt.prototype.ta=function(r){ge(this.g,new Ti(r))},lt.prototype.sa=function(r){ge(this.g,new bi)},lt.prototype.ra=function(){ge(this.g,"b")},Tn.prototype.createWebChannel=Tn.prototype.g,we.prototype.send=we.prototype.o,we.prototype.open=we.prototype.m,we.prototype.close=we.prototype.close,Vo=function(){return new Tn},Po=function(){return un()},So=ze,zr={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},hn.NO_ERROR=0,hn.TIMEOUT=8,hn.HTTP_ERROR=6,Pn=hn,Bs.COMPLETE="complete",No=Bs,js.EventType=Nt,Nt.OPEN="a",Nt.CLOSE="b",Nt.ERROR="c",Nt.MESSAGE="d",ue.prototype.listen=ue.prototype.K,$t=js,X.prototype.listenOnce=X.prototype.L,X.prototype.getLastError=X.prototype.Ka,X.prototype.getLastErrorCode=X.prototype.Ba,X.prototype.getStatus=X.prototype.Z,X.prototype.getResponseJson=X.prototype.Oa,X.prototype.getResponseText=X.prototype.oa,X.prototype.send=X.prototype.ea,X.prototype.setWithCredentials=X.prototype.Ha,Co=X}).apply(typeof An<"u"?An:typeof self<"u"?self:typeof window<"u"?window:{});const Fi="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class me{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}me.UNAUTHENTICATED=new me(null),me.GOOGLE_CREDENTIALS=new me("google-credentials-uid"),me.FIRST_PARTY=new me("first-party-uid"),me.MOCK_USER=new me("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xt="11.0.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const et=new wo("@firebase/firestore");function ut(){return et.logLevel}function D(n,...e){if(et.logLevel<=B.DEBUG){const t=e.map(os);et.debug(`Firestore (${xt}): ${n}`,...t)}}function tt(n,...e){if(et.logLevel<=B.ERROR){const t=e.map(os);et.error(`Firestore (${xt}): ${n}`,...t)}}function Fn(n,...e){if(et.logLevel<=B.WARN){const t=e.map(os);et.warn(`Firestore (${xt}): ${n}`,...t)}}function os(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L(n="Unexpected state"){const e=`FIRESTORE (${xt}) INTERNAL ASSERTION FAILED: `+n;throw tt(e),new Error(e)}function Y(n,e){n||L()}function q(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class j extends wt{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ye{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class xu{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(me.UNAUTHENTICATED))}shutdown(){}}class Tu{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class bu{constructor(e){this.t=e,this.currentUser=me.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Y(this.o===void 0);let s=this.i;const i=f=>this.i!==s?(s=this.i,t(f)):Promise.resolve();let o=new Ye;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Ye,e.enqueueRetryable(()=>i(this.currentUser))};const c=()=>{const f=o;e.enqueueRetryable(async()=>{await f.promise,await i(this.currentUser)})},u=f=>{D("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit(f=>u(f)),setTimeout(()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?u(f):(D("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Ye)}},0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(s=>this.i!==e?(D("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Y(typeof s.accessToken=="string"),new Do(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Y(e===null||typeof e=="string"),new me(e)}}class Iu{constructor(e,t,s){this.l=e,this.h=t,this.P=s,this.type="FirstParty",this.user=me.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class Au{constructor(e,t,s){this.l=e,this.h=t,this.P=s}getToken(){return Promise.resolve(new Iu(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(me.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Ru{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Cu{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){Y(this.o===void 0);const s=o=>{o.error!=null&&D("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const c=o.token!==this.R;return this.R=o.token,D("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>s(o))};const i=o=>{D("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?i(o):D("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Y(typeof t.token=="string"),this.R=t.token,new Ru(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nu(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<n;s++)t[s]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ko{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let s="";for(;s.length<20;){const i=Nu(40);for(let o=0;o<i.length;++o)s.length<20&&i[o]<t&&(s+=e.charAt(i[o]%e.length))}return s}}function $(n,e){return n<e?-1:n>e?1:0}function mt(n,e,t){return n.length===e.length&&n.every((s,i)=>t(s,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ne{static now(){return ne.fromMillis(Date.now())}static fromDate(e){return ne.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor(1e6*(e-1e3*t));return new ne(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new j(C.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new j(C.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new j(C.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new j(C.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?$(this.nanoseconds,e.nanoseconds):$(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G{static fromTimestamp(e){return new G(e)}static min(){return new G(new ne(0,0))}static max(){return new G(new ne(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt{constructor(e,t,s){t===void 0?t=0:t>e.length&&L(),s===void 0?s=e.length-t:s>e.length-t&&L(),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return Xt.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Xt?e.forEach(s=>{t.push(s)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let i=0;i<s;i++){const o=e.get(i),c=t.get(i);if(o<c)return-1;if(o>c)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class J extends Xt{construct(e,t,s){return new J(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new j(C.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter(i=>i.length>0))}return new J(t)}static emptyPath(){return new J([])}}const Su=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class oe extends Xt{construct(e,t,s){return new oe(e,t,s)}static isValidIdentifier(e){return Su.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),oe.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new oe(["__name__"])}static fromServerFormat(e){const t=[];let s="",i=0;const o=()=>{if(s.length===0)throw new j(C.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let c=!1;for(;i<e.length;){const u=e[i];if(u==="\\"){if(i+1===e.length)throw new j(C.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[i+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new j(C.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=f,i+=2}else u==="`"?(c=!c,i++):u!=="."||c?(s+=u,i++):(o(),i++)}if(o(),c)throw new j(C.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new oe(t)}static emptyPath(){return new oe([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M{constructor(e){this.path=e}static fromPath(e){return new M(J.fromString(e))}static fromName(e){return new M(J.fromString(e).popFirst(5))}static empty(){return new M(J.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&J.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return J.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new M(new J(e.slice()))}}function Pu(n,e){const t=n.toTimestamp().seconds,s=n.toTimestamp().nanoseconds+1,i=G.fromTimestamp(s===1e9?new ne(t+1,0):new ne(t,s));return new Ue(i,M.empty(),e)}function Vu(n){return new Ue(n.readTime,n.key,-1)}class Ue{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new Ue(G.min(),M.empty(),-1)}static max(){return new Ue(G.max(),M.empty(),-1)}}function Du(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=M.comparator(n.documentKey,e.documentKey),t!==0?t:$(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ku="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ju{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function as(n){if(n.code!==C.FAILED_PRECONDITION||n.message!==ku)throw n;D("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&L(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new R((s,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(s,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(s,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof R?t:R.resolve(t)}catch(t){return R.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):R.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):R.reject(t)}static resolve(e){return new R((t,s)=>{t(e)})}static reject(e){return new R((t,s)=>{s(e)})}static waitFor(e){return new R((t,s)=>{let i=0,o=0,c=!1;e.forEach(u=>{++i,u.next(()=>{++o,c&&o===i&&t()},f=>s(f))}),c=!0,o===i&&t()})}static or(e){let t=R.resolve(!1);for(const s of e)t=t.next(i=>i?R.resolve(i):s());return t}static forEach(e,t){const s=[];return e.forEach((i,o)=>{s.push(t.call(this,i,o))}),this.waitFor(s)}static mapArray(e,t){return new R((s,i)=>{const o=e.length,c=new Array(o);let u=0;for(let f=0;f<o;f++){const g=f;t(e[g]).next(T=>{c[g]=T,++u,u===o&&s(c)},T=>i(T))}})}static doWhile(e,t){return new R((s,i)=>{const o=()=>{e()===!0?t().next(()=>{o()},i):s()};o()})}}function Ou(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function tn(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ls{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.ie(s),this.se=s=>t.writeSequenceNumber(s))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}ls.oe=-1;function cs(n){return n==null}function Bn(n){return n===0&&1/n==-1/0}function Mu(n){return typeof n=="number"&&Number.isInteger(n)&&!Bn(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lu(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Bi(e)),e=Fu(n.get(t),e);return Bi(e)}function Fu(n,e){let t=e;const s=n.length;for(let i=0;i<s;i++){const o=n.charAt(i);switch(o){case"\0":t+="";break;case"":t+="";break;default:t+=o}}return t}function Bi(n){return n+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ui(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Tt(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function jo(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{constructor(e,t){this.comparator=e,this.root=t||se.EMPTY}insert(e,t){return new Ee(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,se.BLACK,null,null))}remove(e){return new Ee(this.comparator,this.root.remove(e,this.comparator).copy(null,null,se.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const i=this.comparator(e,s.key);if(i===0)return t+s.left.size;i<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,s)=>(e(t,s),!1))}toString(){const e=[];return this.inorderTraversal((t,s)=>(e.push(`${t}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Rn(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Rn(this.root,e,this.comparator,!1)}getReverseIterator(){return new Rn(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Rn(this.root,e,this.comparator,!0)}}class Rn{constructor(e,t,s,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?s(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class se{constructor(e,t,s,i,o){this.key=e,this.value=t,this.color=s??se.RED,this.left=i??se.EMPTY,this.right=o??se.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,i,o){return new se(e??this.key,t??this.value,s??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let i=this;const o=s(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,s),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,s)),i.fixUp()}removeMin(){if(this.left.isEmpty())return se.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return se.EMPTY;s=i.right.min(),i=i.copy(s.key,s.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,se.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,se.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw L();const e=this.left.check();if(e!==this.right.check())throw L();return e+(this.isRed()?0:1)}}se.EMPTY=null,se.RED=!0,se.BLACK=!1;se.EMPTY=new class{constructor(){this.size=0}get key(){throw L()}get value(){throw L()}get color(){throw L()}get left(){throw L()}get right(){throw L()}copy(e,t,s,i,o){return this}insert(e,t,s){return new se(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{constructor(e){this.comparator=e,this.data=new Ee(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,s)=>(e(t),!1))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const i=s.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new $i(this.data.getIterator())}getIteratorFrom(e){return new $i(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(s=>{t=t.add(s)}),t}isEqual(e){if(!(e instanceof ae)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=s.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new ae(this.comparator);return t.data=e,t}}class $i{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ie{constructor(e){this.fields=e,e.sort(oe.comparator)}static empty(){return new Ie([])}unionWith(e){let t=new ae(oe.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new Ie(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return mt(this.fields,e.fields,(t,s)=>t.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bu extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Bu("Invalid base64 string: "+o):o}}(e);return new Ae(t)}static fromUint8Array(e){const t=function(i){let o="";for(let c=0;c<i.length;++c)o+=String.fromCharCode(i[c]);return o}(e);return new Ae(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const s=new Uint8Array(t.length);for(let i=0;i<t.length;i++)s[i]=t.charCodeAt(i);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return $(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ae.EMPTY_BYTE_STRING=new Ae("");const Uu=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function nt(n){if(Y(!!n),typeof n=="string"){let e=0;const t=Uu.exec(n);if(Y(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const s=new Date(n);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:ie(n.seconds),nanos:ie(n.nanos)}}function ie(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function pt(n){return typeof n=="string"?Ae.fromBase64String(n):Ae.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function us(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function hs(n){const e=n.mapValue.fields.__previous_value__;return us(e)?hs(e):e}function Un(n){const e=nt(n.mapValue.fields.__local_write_time__.timestampValue);return new ne(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $u{constructor(e,t,s,i,o,c,u,f,g){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=i,this.ssl=o,this.forceLongPolling=c,this.autoDetectLongPolling=u,this.longPollingOptions=f,this.useFetchStreams=g}}class $n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new $n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof $n&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cn={mapValue:{}};function rt(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?us(n)?4:qu(n)?9007199254740991:Hu(n)?10:11:L()}function Re(n,e){if(n===e)return!0;const t=rt(n);if(t!==rt(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Un(n).isEqual(Un(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const c=nt(i.timestampValue),u=nt(o.timestampValue);return c.seconds===u.seconds&&c.nanos===u.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,o){return pt(i.bytesValue).isEqual(pt(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return ie(i.geoPointValue.latitude)===ie(o.geoPointValue.latitude)&&ie(i.geoPointValue.longitude)===ie(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return ie(i.integerValue)===ie(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const c=ie(i.doubleValue),u=ie(o.doubleValue);return c===u?Bn(c)===Bn(u):isNaN(c)&&isNaN(u)}return!1}(n,e);case 9:return mt(n.arrayValue.values||[],e.arrayValue.values||[],Re);case 10:case 11:return function(i,o){const c=i.mapValue.fields||{},u=o.mapValue.fields||{};if(Ui(c)!==Ui(u))return!1;for(const f in c)if(c.hasOwnProperty(f)&&(u[f]===void 0||!Re(c[f],u[f])))return!1;return!0}(n,e);default:return L()}}function Jt(n,e){return(n.values||[]).find(t=>Re(t,e))!==void 0}function gt(n,e){if(n===e)return 0;const t=rt(n),s=rt(e);if(t!==s)return $(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return $(n.booleanValue,e.booleanValue);case 2:return function(o,c){const u=ie(o.integerValue||o.doubleValue),f=ie(c.integerValue||c.doubleValue);return u<f?-1:u>f?1:u===f?0:isNaN(u)?isNaN(f)?0:-1:1}(n,e);case 3:return Hi(n.timestampValue,e.timestampValue);case 4:return Hi(Un(n),Un(e));case 5:return $(n.stringValue,e.stringValue);case 6:return function(o,c){const u=pt(o),f=pt(c);return u.compareTo(f)}(n.bytesValue,e.bytesValue);case 7:return function(o,c){const u=o.split("/"),f=c.split("/");for(let g=0;g<u.length&&g<f.length;g++){const T=$(u[g],f[g]);if(T!==0)return T}return $(u.length,f.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,c){const u=$(ie(o.latitude),ie(c.latitude));return u!==0?u:$(ie(o.longitude),ie(c.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return qi(n.arrayValue,e.arrayValue);case 10:return function(o,c){var u,f,g,T;const I=o.fields||{},A=c.fields||{},N=(u=I.value)===null||u===void 0?void 0:u.arrayValue,V=(f=A.value)===null||f===void 0?void 0:f.arrayValue,O=$(((g=N?.values)===null||g===void 0?void 0:g.length)||0,((T=V?.values)===null||T===void 0?void 0:T.length)||0);return O!==0?O:qi(N,V)}(n.mapValue,e.mapValue);case 11:return function(o,c){if(o===Cn.mapValue&&c===Cn.mapValue)return 0;if(o===Cn.mapValue)return 1;if(c===Cn.mapValue)return-1;const u=o.fields||{},f=Object.keys(u),g=c.fields||{},T=Object.keys(g);f.sort(),T.sort();for(let I=0;I<f.length&&I<T.length;++I){const A=$(f[I],T[I]);if(A!==0)return A;const N=gt(u[f[I]],g[T[I]]);if(N!==0)return N}return $(f.length,T.length)}(n.mapValue,e.mapValue);default:throw L()}}function Hi(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return $(n,e);const t=nt(n),s=nt(e),i=$(t.seconds,s.seconds);return i!==0?i:$(t.nanos,s.nanos)}function qi(n,e){const t=n.values||[],s=e.values||[];for(let i=0;i<t.length&&i<s.length;++i){const o=gt(t[i],s[i]);if(o)return o}return $(t.length,s.length)}function yt(n){return Gr(n)}function Gr(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const s=nt(t);return`time(${s.seconds},${s.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return pt(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return M.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let s="[",i=!0;for(const o of t.values||[])i?i=!1:s+=",",s+=Gr(o);return s+"]"}(n.arrayValue):"mapValue"in n?function(t){const s=Object.keys(t.fields||{}).sort();let i="{",o=!0;for(const c of s)o?o=!1:i+=",",i+=`${c}:${Gr(t.fields[c])}`;return i+"}"}(n.mapValue):L()}function Vn(n){switch(rt(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=hs(n);return e?16+Vn(e):16;case 5:return 2*n.stringValue.length;case 6:return pt(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((i,o)=>i+Vn(o),0)}(n.arrayValue);case 10:case 11:return function(s){let i=0;return Tt(s.fields,(o,c)=>{i+=o.length+Vn(c)}),i}(n.mapValue);default:throw L()}}function Kr(n){return!!n&&"integerValue"in n}function ds(n){return!!n&&"arrayValue"in n}function Dn(n){return!!n&&"mapValue"in n}function Hu(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function Ht(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Tt(n.mapValue.fields,(t,s)=>e.mapValue.fields[t]=Ht(s)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ht(n.arrayValue.values[t]);return e}return Object.assign({},n)}function qu(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{constructor(e){this.value=e}static empty(){return new be({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!Dn(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ht(t)}setAll(e){let t=oe.emptyPath(),s={},i=[];e.forEach((c,u)=>{if(!t.isImmediateParentOf(u)){const f=this.getFieldsMap(t);this.applyChanges(f,s,i),s={},i=[],t=u.popLast()}c?s[u.lastSegment()]=Ht(c):i.push(u.lastSegment())});const o=this.getFieldsMap(t);this.applyChanges(o,s,i)}delete(e){const t=this.field(e.popLast());Dn(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Re(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let i=t.mapValue.fields[e.get(s)];Dn(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,s){Tt(t,(i,o)=>e[i]=o);for(const i of s)delete e[i]}clone(){return new be(Ht(this.value))}}function Oo(n){const e=[];return Tt(n.fields,(t,s)=>{const i=new oe([t]);if(Dn(s)){const o=Oo(s.mapValue).fields;if(o.length===0)e.push(i);else for(const c of o)e.push(i.child(c))}else e.push(i)}),new Ie(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{constructor(e,t,s,i,o,c,u){this.key=e,this.documentType=t,this.version=s,this.readTime=i,this.createTime=o,this.data=c,this.documentState=u}static newInvalidDocument(e){return new Te(e,0,G.min(),G.min(),G.min(),be.empty(),0)}static newFoundDocument(e,t,s,i){return new Te(e,1,t,G.min(),s,i,0)}static newNoDocument(e,t){return new Te(e,2,t,G.min(),G.min(),be.empty(),0)}static newUnknownDocument(e,t){return new Te(e,3,t,G.min(),G.min(),be.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(G.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=be.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=be.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=G.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Te&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Te(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hn{constructor(e,t){this.position=e,this.inclusive=t}}function zi(n,e,t){let s=0;for(let i=0;i<n.position.length;i++){const o=e[i],c=n.position[i];if(o.field.isKeyField()?s=M.comparator(M.fromName(c.referenceValue),t.key):s=gt(c,t.data.field(o.field)),o.dir==="desc"&&(s*=-1),s!==0)break}return s}function Gi(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Re(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qn{constructor(e,t="asc"){this.field=e,this.dir=t}}function zu(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo{}class te extends Mo{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new Ku(e,t,s):t==="array-contains"?new Xu(e,s):t==="in"?new Ju(e,s):t==="not-in"?new Yu(e,s):t==="array-contains-any"?new Zu(e,s):new te(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new Qu(e,s):new Wu(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(gt(t,this.value)):t!==null&&rt(this.value)===rt(t)&&this.matchesComparison(gt(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return L()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class $e extends Mo{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new $e(e,t)}matches(e){return Lo(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Lo(n){return n.op==="and"}function Fo(n){return Gu(n)&&Lo(n)}function Gu(n){for(const e of n.filters)if(e instanceof $e)return!1;return!0}function Qr(n){if(n instanceof te)return n.field.canonicalString()+n.op.toString()+yt(n.value);if(Fo(n))return n.filters.map(e=>Qr(e)).join(",");{const e=n.filters.map(t=>Qr(t)).join(",");return`${n.op}(${e})`}}function Bo(n,e){return n instanceof te?function(s,i){return i instanceof te&&s.op===i.op&&s.field.isEqual(i.field)&&Re(s.value,i.value)}(n,e):n instanceof $e?function(s,i){return i instanceof $e&&s.op===i.op&&s.filters.length===i.filters.length?s.filters.reduce((o,c,u)=>o&&Bo(c,i.filters[u]),!0):!1}(n,e):void L()}function Uo(n){return n instanceof te?function(t){return`${t.field.canonicalString()} ${t.op} ${yt(t.value)}`}(n):n instanceof $e?function(t){return t.op.toString()+" {"+t.getFilters().map(Uo).join(" ,")+"}"}(n):"Filter"}class Ku extends te{constructor(e,t,s){super(e,t,s),this.key=M.fromName(s.referenceValue)}matches(e){const t=M.comparator(e.key,this.key);return this.matchesComparison(t)}}class Qu extends te{constructor(e,t){super(e,"in",t),this.keys=$o("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Wu extends te{constructor(e,t){super(e,"not-in",t),this.keys=$o("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function $o(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(s=>M.fromName(s.referenceValue))}class Xu extends te{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return ds(t)&&Jt(t.arrayValue,this.value)}}class Ju extends te{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Jt(this.value.arrayValue,t)}}class Yu extends te{constructor(e,t){super(e,"not-in",t)}matches(e){if(Jt(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!Jt(this.value.arrayValue,t)}}class Zu extends te{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!ds(t)||!t.arrayValue.values)&&t.arrayValue.values.some(s=>Jt(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eh{constructor(e,t=null,s=[],i=[],o=null,c=null,u=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=i,this.limit=o,this.startAt=c,this.endAt=u,this.ue=null}}function Ki(n,e=null,t=[],s=[],i=null,o=null,c=null){return new eh(n,e,t,s,i,o,c)}function fs(n){const e=q(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(s=>Qr(s)).join(","),t+="|ob:",t+=e.orderBy.map(s=>function(o){return o.field.canonicalString()+o.dir}(s)).join(","),cs(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(s=>yt(s)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(s=>yt(s)).join(",")),e.ue=t}return e.ue}function ms(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!zu(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Bo(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Gi(n.startAt,e.startAt)&&Gi(n.endAt,e.endAt)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zn{constructor(e,t=null,s=[],i=[],o=null,c="F",u=null,f=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=i,this.limit=o,this.limitType=c,this.startAt=u,this.endAt=f,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function th(n,e,t,s,i,o,c,u){return new Zn(n,e,t,s,i,o,c,u)}function nh(n){return new Zn(n)}function Qi(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function rh(n){return n.collectionGroup!==null}function qt(n){const e=q(n);if(e.ce===null){e.ce=[];const t=new Set;for(const o of e.explicitOrderBy)e.ce.push(o),t.add(o.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let u=new ae(oe.comparator);return c.filters.forEach(f=>{f.getFlattenedFilters().forEach(g=>{g.isInequality()&&(u=u.add(g.field))})}),u})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.ce.push(new qn(o,s))}),t.has(oe.keyField().canonicalString())||e.ce.push(new qn(oe.keyField(),s))}return e.ce}function Ze(n){const e=q(n);return e.le||(e.le=sh(e,qt(n))),e.le}function sh(n,e){if(n.limitType==="F")return Ki(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{const o=i.dir==="desc"?"asc":"desc";return new qn(i.field,o)});const t=n.endAt?new Hn(n.endAt.position,n.endAt.inclusive):null,s=n.startAt?new Hn(n.startAt.position,n.startAt.inclusive):null;return Ki(n.path,n.collectionGroup,e,n.filters,n.limit,t,s)}}function Wr(n,e,t){return new Zn(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Ho(n,e){return ms(Ze(n),Ze(e))&&n.limitType===e.limitType}function qo(n){return`${fs(Ze(n))}|lt:${n.limitType}`}function Ut(n){return`Query(target=${function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map(i=>Uo(i)).join(", ")}]`),cs(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map(i=>function(c){return`${c.field.canonicalString()} (${c.dir})`}(i)).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map(i=>yt(i)).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map(i=>yt(i)).join(",")),`Target(${s})`}(Ze(n))}; limitType=${n.limitType})`}function ps(n,e){return e.isFoundDocument()&&function(s,i){const o=i.key.path;return s.collectionGroup!==null?i.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(o):M.isDocumentKey(s.path)?s.path.isEqual(o):s.path.isImmediateParentOf(o)}(n,e)&&function(s,i){for(const o of qt(s))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,e)&&function(s,i){for(const o of s.filters)if(!o.matches(i))return!1;return!0}(n,e)&&function(s,i){return!(s.startAt&&!function(c,u,f){const g=zi(c,u,f);return c.inclusive?g<=0:g<0}(s.startAt,qt(s),i)||s.endAt&&!function(c,u,f){const g=zi(c,u,f);return c.inclusive?g>=0:g>0}(s.endAt,qt(s),i))}(n,e)}function ih(n){return(e,t)=>{let s=!1;for(const i of qt(n)){const o=oh(i,e,t);if(o!==0)return o;s=s||i.field.isKeyField()}return 0}}function oh(n,e,t){const s=n.field.isKeyField()?M.comparator(e.key,t.key):function(o,c,u){const f=c.data.field(o),g=u.data.field(o);return f!==null&&g!==null?gt(f,g):L()}(n.field,e,t);switch(n.dir){case"asc":return s;case"desc":return-1*s;default:return L()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class st{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[i,o]of s)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),i=this.inner[s];if(i===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return s.length===1?delete this.inner[t]:s.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Tt(this.inner,(t,s)=>{for(const[i,o]of s)e(i,o)})}isEmpty(){return jo(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ah=new Ee(M.comparator);function zn(){return ah}const zo=new Ee(M.comparator);function Nn(...n){let e=zo;for(const t of n)e=e.insert(t.key,t);return e}function Go(n){let e=zo;return n.forEach((t,s)=>e=e.insert(t,s.overlayedDocument)),e}function Xe(){return zt()}function Ko(){return zt()}function zt(){return new st(n=>n.toString(),(n,e)=>n.isEqual(e))}const lh=new Ee(M.comparator),ch=new ae(M.comparator);function pe(...n){let e=ch;for(const t of n)e=e.add(t);return e}const uh=new ae($);function hh(){return uh}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gs(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Bn(e)?"-0":e}}function Qo(n){return{integerValue:""+n}}function dh(n,e){return Mu(e)?Qo(e):gs(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class er{constructor(){this._=void 0}}function fh(n,e,t){return n instanceof Gn?function(i,o){const c={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&us(o)&&(o=hs(o)),o&&(c.fields.__previous_value__=o),{mapValue:c}}(t,e):n instanceof Yt?Xo(n,e):n instanceof Zt?Jo(n,e):function(i,o){const c=Wo(i,o),u=Wi(c)+Wi(i.Pe);return Kr(c)&&Kr(i.Pe)?Qo(u):gs(i.serializer,u)}(n,e)}function mh(n,e,t){return n instanceof Yt?Xo(n,e):n instanceof Zt?Jo(n,e):t}function Wo(n,e){return n instanceof Kn?function(s){return Kr(s)||function(o){return!!o&&"doubleValue"in o}(s)}(e)?e:{integerValue:0}:null}class Gn extends er{}class Yt extends er{constructor(e){super(),this.elements=e}}function Xo(n,e){const t=Yo(e);for(const s of n.elements)t.some(i=>Re(i,s))||t.push(s);return{arrayValue:{values:t}}}class Zt extends er{constructor(e){super(),this.elements=e}}function Jo(n,e){let t=Yo(e);for(const s of n.elements)t=t.filter(i=>!Re(i,s));return{arrayValue:{values:t}}}class Kn extends er{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function Wi(n){return ie(n.integerValue||n.doubleValue)}function Yo(n){return ds(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function ph(n,e){return n.field.isEqual(e.field)&&function(s,i){return s instanceof Yt&&i instanceof Yt||s instanceof Zt&&i instanceof Zt?mt(s.elements,i.elements,Re):s instanceof Kn&&i instanceof Kn?Re(s.Pe,i.Pe):s instanceof Gn&&i instanceof Gn}(n.transform,e.transform)}class gh{constructor(e,t){this.version=e,this.transformResults=t}}class Pe{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Pe}static exists(e){return new Pe(void 0,e)}static updateTime(e){return new Pe(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function kn(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class tr{}function Zo(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new ta(n.key,Pe.none()):new nn(n.key,n.data,Pe.none());{const t=n.data,s=be.empty();let i=new ae(oe.comparator);for(let o of e.fields)if(!i.has(o)){let c=t.field(o);c===null&&o.length>1&&(o=o.popLast(),c=t.field(o)),c===null?s.delete(o):s.set(o,c),i=i.add(o)}return new it(n.key,s,new Ie(i.toArray()),Pe.none())}}function yh(n,e,t){n instanceof nn?function(i,o,c){const u=i.value.clone(),f=Ji(i.fieldTransforms,o,c.transformResults);u.setAll(f),o.convertToFoundDocument(c.version,u).setHasCommittedMutations()}(n,e,t):n instanceof it?function(i,o,c){if(!kn(i.precondition,o))return void o.convertToUnknownDocument(c.version);const u=Ji(i.fieldTransforms,o,c.transformResults),f=o.data;f.setAll(ea(i)),f.setAll(u),o.convertToFoundDocument(c.version,f).setHasCommittedMutations()}(n,e,t):function(i,o,c){o.convertToNoDocument(c.version).setHasCommittedMutations()}(0,e,t)}function Gt(n,e,t,s){return n instanceof nn?function(o,c,u,f){if(!kn(o.precondition,c))return u;const g=o.value.clone(),T=Yi(o.fieldTransforms,f,c);return g.setAll(T),c.convertToFoundDocument(c.version,g).setHasLocalMutations(),null}(n,e,t,s):n instanceof it?function(o,c,u,f){if(!kn(o.precondition,c))return u;const g=Yi(o.fieldTransforms,f,c),T=c.data;return T.setAll(ea(o)),T.setAll(g),c.convertToFoundDocument(c.version,T).setHasLocalMutations(),u===null?null:u.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(I=>I.field))}(n,e,t,s):function(o,c,u){return kn(o.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):u}(n,e,t)}function _h(n,e){let t=null;for(const s of n.fieldTransforms){const i=e.data.field(s.field),o=Wo(s.transform,i||null);o!=null&&(t===null&&(t=be.empty()),t.set(s.field,o))}return t||null}function Xi(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(s,i){return s===void 0&&i===void 0||!(!s||!i)&&mt(s,i,(o,c)=>ph(o,c))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class nn extends tr{constructor(e,t,s,i=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class it extends tr{constructor(e,t,s,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function ea(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const s=n.data.field(t);e.set(t,s)}}),e}function Ji(n,e,t){const s=new Map;Y(n.length===t.length);for(let i=0;i<t.length;i++){const o=n[i],c=o.transform,u=e.data.field(o.field);s.set(o.field,mh(c,u,t[i]))}return s}function Yi(n,e,t){const s=new Map;for(const i of n){const o=i.transform,c=t.data.field(i.field);s.set(i.field,fh(o,c,e))}return s}class ta extends tr{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class vh extends tr{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eh{constructor(e,t,s,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=i}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&yh(o,e,s[i])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=Gt(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=Gt(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=Ko();return this.mutations.forEach(i=>{const o=e.get(i.key),c=o.overlayedDocument;let u=this.applyToLocalView(c,o.mutatedFields);u=t.has(i.key)?null:u;const f=Zo(c,u);f!==null&&s.set(i.key,f),c.isValidDocument()||c.convertToNoDocument(G.min())}),s}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),pe())}isEqual(e){return this.batchId===e.batchId&&mt(this.mutations,e.mutations,(t,s)=>Xi(t,s))&&mt(this.baseMutations,e.baseMutations,(t,s)=>Xi(t,s))}}class ys{constructor(e,t,s,i){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=i}static from(e,t,s){Y(e.mutations.length===s.length);let i=function(){return lh}();const o=e.mutations;for(let c=0;c<o.length;c++)i=i.insert(o[c].key,s[c].version);return new ys(e,t,s,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wh{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Z,F;function xh(n){switch(n){default:return L();case C.CANCELLED:case C.UNKNOWN:case C.DEADLINE_EXCEEDED:case C.RESOURCE_EXHAUSTED:case C.INTERNAL:case C.UNAVAILABLE:case C.UNAUTHENTICATED:return!1;case C.INVALID_ARGUMENT:case C.NOT_FOUND:case C.ALREADY_EXISTS:case C.PERMISSION_DENIED:case C.FAILED_PRECONDITION:case C.ABORTED:case C.OUT_OF_RANGE:case C.UNIMPLEMENTED:case C.DATA_LOSS:return!0}}function Th(n){if(n===void 0)return tt("GRPC error has no .code"),C.UNKNOWN;switch(n){case Z.OK:return C.OK;case Z.CANCELLED:return C.CANCELLED;case Z.UNKNOWN:return C.UNKNOWN;case Z.DEADLINE_EXCEEDED:return C.DEADLINE_EXCEEDED;case Z.RESOURCE_EXHAUSTED:return C.RESOURCE_EXHAUSTED;case Z.INTERNAL:return C.INTERNAL;case Z.UNAVAILABLE:return C.UNAVAILABLE;case Z.UNAUTHENTICATED:return C.UNAUTHENTICATED;case Z.INVALID_ARGUMENT:return C.INVALID_ARGUMENT;case Z.NOT_FOUND:return C.NOT_FOUND;case Z.ALREADY_EXISTS:return C.ALREADY_EXISTS;case Z.PERMISSION_DENIED:return C.PERMISSION_DENIED;case Z.FAILED_PRECONDITION:return C.FAILED_PRECONDITION;case Z.ABORTED:return C.ABORTED;case Z.OUT_OF_RANGE:return C.OUT_OF_RANGE;case Z.UNIMPLEMENTED:return C.UNIMPLEMENTED;case Z.DATA_LOSS:return C.DATA_LOSS;default:return L()}}(F=Z||(Z={}))[F.OK=0]="OK",F[F.CANCELLED=1]="CANCELLED",F[F.UNKNOWN=2]="UNKNOWN",F[F.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",F[F.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",F[F.NOT_FOUND=5]="NOT_FOUND",F[F.ALREADY_EXISTS=6]="ALREADY_EXISTS",F[F.PERMISSION_DENIED=7]="PERMISSION_DENIED",F[F.UNAUTHENTICATED=16]="UNAUTHENTICATED",F[F.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",F[F.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",F[F.ABORTED=10]="ABORTED",F[F.OUT_OF_RANGE=11]="OUT_OF_RANGE",F[F.UNIMPLEMENTED=12]="UNIMPLEMENTED",F[F.INTERNAL=13]="INTERNAL",F[F.UNAVAILABLE=14]="UNAVAILABLE",F[F.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new Ro([4294967295,4294967295],0);class bh{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Xr(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Ih(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function Ah(n,e){return Xr(n,e.toTimestamp())}function ft(n){return Y(!!n),G.fromTimestamp(function(t){const s=nt(t);return new ne(s.seconds,s.nanos)}(n))}function na(n,e){return Jr(n,e).canonicalString()}function Jr(n,e){const t=function(i){return new J(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function Rh(n){const e=J.fromString(n);return Y(jh(e)),e}function Yr(n,e){return na(n.databaseId,e.path)}function Ch(n){const e=Rh(n);return e.length===4?J.emptyPath():Sh(e)}function Nh(n){return new J(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Sh(n){return Y(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function Zi(n,e,t){return{name:Yr(n,e),fields:t.value.mapValue.fields}}function Ph(n,e){let t;if(e instanceof nn)t={update:Zi(n,e.key,e.value)};else if(e instanceof ta)t={delete:Yr(n,e.key)};else if(e instanceof it)t={update:Zi(n,e.key,e.data),updateMask:kh(e.fieldMask)};else{if(!(e instanceof vh))return L();t={verify:Yr(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(s=>function(o,c){const u=c.transform;if(u instanceof Gn)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof Yt)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof Zt)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof Kn)return{fieldPath:c.field.canonicalString(),increment:u.Pe};throw L()}(0,s))),e.precondition.isNone||(t.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:Ah(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:L()}(n,e.precondition)),t}function Vh(n,e){return n&&n.length>0?(Y(e!==void 0),n.map(t=>function(i,o){let c=i.updateTime?ft(i.updateTime):ft(o);return c.isEqual(G.min())&&(c=ft(o)),new gh(c,i.transformResults||[])}(t,e))):[]}function Dh(n){let e=Ch(n.parent);const t=n.structuredQuery,s=t.from?t.from.length:0;let i=null;if(s>0){Y(s===1);const T=t.from[0];T.allDescendants?i=T.collectionId:e=e.child(T.collectionId)}let o=[];t.where&&(o=function(I){const A=ra(I);return A instanceof $e&&Fo(A)?A.getFilters():[A]}(t.where));let c=[];t.orderBy&&(c=function(I){return I.map(A=>function(V){return new qn(ht(V.field),function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(V.direction))}(A))}(t.orderBy));let u=null;t.limit&&(u=function(I){let A;return A=typeof I=="object"?I.value:I,cs(A)?null:A}(t.limit));let f=null;t.startAt&&(f=function(I){const A=!!I.before,N=I.values||[];return new Hn(N,A)}(t.startAt));let g=null;return t.endAt&&(g=function(I){const A=!I.before,N=I.values||[];return new Hn(N,A)}(t.endAt)),th(e,i,c,o,u,"F",f,g)}function ra(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=ht(t.unaryFilter.field);return te.create(s,"==",{doubleValue:NaN});case"IS_NULL":const i=ht(t.unaryFilter.field);return te.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=ht(t.unaryFilter.field);return te.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=ht(t.unaryFilter.field);return te.create(c,"!=",{nullValue:"NULL_VALUE"});default:return L()}}(n):n.fieldFilter!==void 0?function(t){return te.create(ht(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return L()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return $e.create(t.compositeFilter.filters.map(s=>ra(s)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return L()}}(t.compositeFilter.op))}(n):L()}function ht(n){return oe.fromServerFormat(n.fieldPath)}function kh(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function jh(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oh{constructor(e){this.ht=e}}function Mh(n){const e=Dh({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Wr(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lh{constructor(){this.ln=new Fh}addToCollectionParentIndex(e,t){return this.ln.add(t),R.resolve()}getCollectionParents(e,t){return R.resolve(this.ln.getEntries(t))}addFieldIndex(e,t){return R.resolve()}deleteFieldIndex(e,t){return R.resolve()}deleteAllFieldIndexes(e){return R.resolve()}createTargetIndexes(e,t){return R.resolve()}getDocumentsMatchingTarget(e,t){return R.resolve(null)}getIndexType(e,t){return R.resolve(0)}getFieldIndexes(e,t){return R.resolve([])}getNextCollectionGroupToUpdate(e){return R.resolve(null)}getMinOffset(e,t){return R.resolve(Ue.min())}getMinOffsetFromCollectionGroup(e,t){return R.resolve(Ue.min())}updateCollectionGroup(e,t,s){return R.resolve()}updateIndexEntries(e,t){return R.resolve()}}class Fh{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),i=this.index[t]||new ae(J.comparator),o=!i.has(s);return this.index[t]=i.add(s),o}has(e){const t=e.lastSegment(),s=e.popLast(),i=this.index[t];return i&&i.has(s)}getEntries(e){return(this.index[e]||new ae(J.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eo={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class ve{static withCacheSize(e){return new ve(e,ve.DEFAULT_COLLECTION_PERCENTILE,ve.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ve.DEFAULT_COLLECTION_PERCENTILE=10,ve.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ve.DEFAULT=new ve(41943040,ve.DEFAULT_COLLECTION_PERCENTILE,ve.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ve.DISABLED=new ve(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{constructor(e){this.kn=e}next(){return this.kn+=2,this.kn}static qn(){return new _t(0)}static Qn(){return new _t(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function to([n,e],[t,s]){const i=$(n,t);return i===0?$(e,s):i}class Bh{constructor(e){this.Gn=e,this.buffer=new ae(to),this.zn=0}jn(){return++this.zn}Hn(e){const t=[e,this.jn()];if(this.buffer.size<this.Gn)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();to(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Uh{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Yn(6e4)}stop(){this.Jn&&(this.Jn.cancel(),this.Jn=null)}get started(){return this.Jn!==null}Yn(e){D("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){tn(t)?D("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):await as(t)}await this.Yn(3e5)})}}class $h{constructor(e,t){this.Zn=e,this.params=t}calculateTargetCount(e,t){return this.Zn.Xn(e).next(s=>Math.floor(t/100*s))}nthSequenceNumber(e,t){if(t===0)return R.resolve(ls.oe);const s=new Bh(t);return this.Zn.forEachTarget(e,i=>s.Hn(i.sequenceNumber)).next(()=>this.Zn.er(e,i=>s.Hn(i))).next(()=>s.maxValue)}removeTargets(e,t,s){return this.Zn.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.Zn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(D("LruGarbageCollector","Garbage collection skipped; disabled"),R.resolve(eo)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(D("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),eo):this.tr(e,t))}getCacheSize(e){return this.Zn.getCacheSize(e)}tr(e,t){let s,i,o,c,u,f,g;const T=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(I=>(I>this.params.maximumSequenceNumbersToCollect?(D("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${I}`),i=this.params.maximumSequenceNumbersToCollect):i=I,c=Date.now(),this.nthSequenceNumber(e,i))).next(I=>(s=I,u=Date.now(),this.removeTargets(e,s,t))).next(I=>(o=I,f=Date.now(),this.removeOrphanedDocuments(e,s))).next(I=>(g=Date.now(),ut()<=B.DEBUG&&D("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-T}ms
	Determined least recently used ${i} in `+(u-c)+`ms
	Removed ${o} targets in `+(f-u)+`ms
	Removed ${I} documents in `+(g-f)+`ms
Total Duration: ${g-T}ms`),R.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:I})))}}function Hh(n,e){return new $h(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qh{constructor(){this.changes=new st(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Te.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?R.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zh{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gh{constructor(e,t,s,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=i}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(s=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(s!==null&&Gt(s.mutation,i,Ie.empty(),ne.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.getLocalViewOfDocuments(e,s,pe()).next(()=>s))}getLocalViewOfDocuments(e,t,s=pe()){const i=Xe();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,s).next(o=>{let c=Nn();return o.forEach((u,f)=>{c=c.insert(u,f.overlayedDocument)}),c}))}getOverlayedDocuments(e,t){const s=Xe();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,pe()))}populateOverlays(e,t,s){const i=[];return s.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((c,u)=>{t.set(c,u)})})}computeViews(e,t,s,i){let o=zn();const c=zt(),u=function(){return zt()}();return t.forEach((f,g)=>{const T=s.get(g.key);i.has(g.key)&&(T===void 0||T.mutation instanceof it)?o=o.insert(g.key,g):T!==void 0?(c.set(g.key,T.mutation.getFieldMask()),Gt(T.mutation,g,T.mutation.getFieldMask(),ne.now())):c.set(g.key,Ie.empty())}),this.recalculateAndSaveOverlays(e,o).next(f=>(f.forEach((g,T)=>c.set(g,T)),t.forEach((g,T)=>{var I;return u.set(g,new zh(T,(I=c.get(g))!==null&&I!==void 0?I:null))}),u))}recalculateAndSaveOverlays(e,t){const s=zt();let i=new Ee((c,u)=>c-u),o=pe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(c=>{for(const u of c)u.keys().forEach(f=>{const g=t.get(f);if(g===null)return;let T=s.get(f)||Ie.empty();T=u.applyToLocalView(g,T),s.set(f,T);const I=(i.get(u.batchId)||pe()).add(f);i=i.insert(u.batchId,I)})}).next(()=>{const c=[],u=i.getReverseIterator();for(;u.hasNext();){const f=u.getNext(),g=f.key,T=f.value,I=Ko();T.forEach(A=>{if(!o.has(A)){const N=Zo(t.get(A),s.get(A));N!==null&&I.set(A,N),o=o.add(A)}}),c.push(this.documentOverlayCache.saveOverlays(e,g,I))}return R.waitFor(c)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,t,s,i){return function(c){return M.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):rh(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,i):this.getDocumentsMatchingCollectionQuery(e,t,s,i)}getNextDocuments(e,t,s,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,i).next(o=>{const c=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,i-o.size):R.resolve(Xe());let u=-1,f=o;return c.next(g=>R.forEach(g,(T,I)=>(u<I.largestBatchId&&(u=I.largestBatchId),o.get(T)?R.resolve():this.remoteDocumentCache.getEntry(e,T).next(A=>{f=f.insert(T,A)}))).next(()=>this.populateOverlays(e,g,o)).next(()=>this.computeViews(e,f,g,pe())).next(T=>({batchId:u,changes:Go(T)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new M(t)).next(s=>{let i=Nn();return s.isFoundDocument()&&(i=i.insert(s.key,s)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,s,i){const o=t.collectionGroup;let c=Nn();return this.indexManager.getCollectionParents(e,o).next(u=>R.forEach(u,f=>{const g=function(I,A){return new Zn(A,null,I.explicitOrderBy.slice(),I.filters.slice(),I.limit,I.limitType,I.startAt,I.endAt)}(t,f.child(o));return this.getDocumentsMatchingCollectionQuery(e,g,s,i).next(T=>{T.forEach((I,A)=>{c=c.insert(I,A)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(e,t,s,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next(c=>(o=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,o,i))).next(c=>{o.forEach((f,g)=>{const T=g.getKey();c.get(T)===null&&(c=c.insert(T,Te.newInvalidDocument(T)))});let u=Nn();return c.forEach((f,g)=>{const T=o.get(f);T!==void 0&&Gt(T.mutation,g,Ie.empty(),ne.now()),ps(t,g)&&(u=u.insert(f,g))}),u})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kh{constructor(e){this.serializer=e,this.Tr=new Map,this.Ir=new Map}getBundleMetadata(e,t){return R.resolve(this.Tr.get(t))}saveBundleMetadata(e,t){return this.Tr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:ft(i.createTime)}}(t)),R.resolve()}getNamedQuery(e,t){return R.resolve(this.Ir.get(t))}saveNamedQuery(e,t){return this.Ir.set(t.name,function(i){return{name:i.name,query:Mh(i.bundledQuery),readTime:ft(i.readTime)}}(t)),R.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qh{constructor(){this.overlays=new Ee(M.comparator),this.Er=new Map}getOverlay(e,t){return R.resolve(this.overlays.get(t))}getOverlays(e,t){const s=Xe();return R.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&s.set(i,o)})).next(()=>s)}saveOverlays(e,t,s){return s.forEach((i,o)=>{this.Tt(e,t,o)}),R.resolve()}removeOverlaysForBatchId(e,t,s){const i=this.Er.get(s);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Er.delete(s)),R.resolve()}getOverlaysForCollection(e,t,s){const i=Xe(),o=t.length+1,c=new M(t.child("")),u=this.overlays.getIteratorFrom(c);for(;u.hasNext();){const f=u.getNext().value,g=f.getKey();if(!t.isPrefixOf(g.path))break;g.path.length===o&&f.largestBatchId>s&&i.set(f.getKey(),f)}return R.resolve(i)}getOverlaysForCollectionGroup(e,t,s,i){let o=new Ee((g,T)=>g-T);const c=this.overlays.getIterator();for(;c.hasNext();){const g=c.getNext().value;if(g.getKey().getCollectionGroup()===t&&g.largestBatchId>s){let T=o.get(g.largestBatchId);T===null&&(T=Xe(),o=o.insert(g.largestBatchId,T)),T.set(g.getKey(),g)}}const u=Xe(),f=o.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach((g,T)=>u.set(g,T)),!(u.size()>=i)););return R.resolve(u)}Tt(e,t,s){const i=this.overlays.get(s.key);if(i!==null){const c=this.Er.get(i.largestBatchId).delete(s.key);this.Er.set(i.largestBatchId,c)}this.overlays=this.overlays.insert(s.key,new wh(t,s));let o=this.Er.get(t);o===void 0&&(o=pe(),this.Er.set(t,o)),this.Er.set(t,o.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wh{constructor(){this.sessionToken=Ae.EMPTY_BYTE_STRING}getSessionToken(e){return R.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,R.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _s{constructor(){this.dr=new ae(ee.Ar),this.Rr=new ae(ee.Vr)}isEmpty(){return this.dr.isEmpty()}addReference(e,t){const s=new ee(e,t);this.dr=this.dr.add(s),this.Rr=this.Rr.add(s)}mr(e,t){e.forEach(s=>this.addReference(s,t))}removeReference(e,t){this.gr(new ee(e,t))}pr(e,t){e.forEach(s=>this.removeReference(s,t))}yr(e){const t=new M(new J([])),s=new ee(t,e),i=new ee(t,e+1),o=[];return this.Rr.forEachInRange([s,i],c=>{this.gr(c),o.push(c.key)}),o}wr(){this.dr.forEach(e=>this.gr(e))}gr(e){this.dr=this.dr.delete(e),this.Rr=this.Rr.delete(e)}Sr(e){const t=new M(new J([])),s=new ee(t,e),i=new ee(t,e+1);let o=pe();return this.Rr.forEachInRange([s,i],c=>{o=o.add(c.key)}),o}containsKey(e){const t=new ee(e,0),s=this.dr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class ee{constructor(e,t){this.key=e,this.br=t}static Ar(e,t){return M.comparator(e.key,t.key)||$(e.br,t.br)}static Vr(e,t){return $(e.br,t.br)||M.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xh{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Dr=1,this.vr=new ae(ee.Ar)}checkEmpty(e){return R.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,i){const o=this.Dr;this.Dr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new Eh(o,t,s,i);this.mutationQueue.push(c);for(const u of i)this.vr=this.vr.add(new ee(u.key,o)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return R.resolve(c)}lookupMutationBatch(e,t){return R.resolve(this.Cr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,i=this.Fr(s),o=i<0?0:i;return R.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return R.resolve(this.mutationQueue.length===0?-1:this.Dr-1)}getAllMutationBatches(e){return R.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new ee(t,0),i=new ee(t,Number.POSITIVE_INFINITY),o=[];return this.vr.forEachInRange([s,i],c=>{const u=this.Cr(c.br);o.push(u)}),R.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new ae($);return t.forEach(i=>{const o=new ee(i,0),c=new ee(i,Number.POSITIVE_INFINITY);this.vr.forEachInRange([o,c],u=>{s=s.add(u.br)})}),R.resolve(this.Mr(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,i=s.length+1;let o=s;M.isDocumentKey(o)||(o=o.child(""));const c=new ee(new M(o),0);let u=new ae($);return this.vr.forEachWhile(f=>{const g=f.key.path;return!!s.isPrefixOf(g)&&(g.length===i&&(u=u.add(f.br)),!0)},c),R.resolve(this.Mr(u))}Mr(e){const t=[];return e.forEach(s=>{const i=this.Cr(s);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){Y(this.Or(t.batchId,"removed")===0),this.mutationQueue.shift();let s=this.vr;return R.forEach(t.mutations,i=>{const o=new ee(i.key,t.batchId);return s=s.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.vr=s})}Ln(e){}containsKey(e,t){const s=new ee(t,0),i=this.vr.firstAfterOrEqual(s);return R.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,R.resolve()}Or(e,t){return this.Fr(e)}Fr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Cr(e){const t=this.Fr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jh{constructor(e){this.Nr=e,this.docs=function(){return new Ee(M.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,i=this.docs.get(s),o=i?i.size:0,c=this.Nr(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:c}),this.size+=c-o,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return R.resolve(s?s.document.mutableCopy():Te.newInvalidDocument(t))}getEntries(e,t){let s=zn();return t.forEach(i=>{const o=this.docs.get(i);s=s.insert(i,o?o.document.mutableCopy():Te.newInvalidDocument(i))}),R.resolve(s)}getDocumentsMatchingQuery(e,t,s,i){let o=zn();const c=t.path,u=new M(c.child("")),f=this.docs.getIteratorFrom(u);for(;f.hasNext();){const{key:g,value:{document:T}}=f.getNext();if(!c.isPrefixOf(g.path))break;g.path.length>c.length+1||Du(Vu(T),s)<=0||(i.has(T.key)||ps(t,T))&&(o=o.insert(T.key,T.mutableCopy()))}return R.resolve(o)}getAllFromCollectionGroup(e,t,s,i){L()}Lr(e,t){return R.forEach(this.docs,s=>t(s))}newChangeBuffer(e){return new Yh(this)}getSize(e){return R.resolve(this.size)}}class Yh extends qh{constructor(e){super(),this.hr=e}applyChanges(e){const t=[];return this.changes.forEach((s,i)=>{i.isValidDocument()?t.push(this.hr.addEntry(e,i)):this.hr.removeEntry(s)}),R.waitFor(t)}getFromCache(e,t){return this.hr.getEntry(e,t)}getAllFromCache(e,t){return this.hr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zh{constructor(e){this.persistence=e,this.Br=new st(t=>fs(t),ms),this.lastRemoteSnapshotVersion=G.min(),this.highestTargetId=0,this.kr=0,this.qr=new _s,this.targetCount=0,this.Qr=_t.qn()}forEachTarget(e,t){return this.Br.forEach((s,i)=>t(i)),R.resolve()}getLastRemoteSnapshotVersion(e){return R.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return R.resolve(this.kr)}allocateTargetId(e){return this.highestTargetId=this.Qr.next(),R.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.kr&&(this.kr=t),R.resolve()}Un(e){this.Br.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Qr=new _t(t),this.highestTargetId=t),e.sequenceNumber>this.kr&&(this.kr=e.sequenceNumber)}addTargetData(e,t){return this.Un(t),this.targetCount+=1,R.resolve()}updateTargetData(e,t){return this.Un(t),R.resolve()}removeTargetData(e,t){return this.Br.delete(t.target),this.qr.yr(t.targetId),this.targetCount-=1,R.resolve()}removeTargets(e,t,s){let i=0;const o=[];return this.Br.forEach((c,u)=>{u.sequenceNumber<=t&&s.get(u.targetId)===null&&(this.Br.delete(c),o.push(this.removeMatchingKeysForTargetId(e,u.targetId)),i++)}),R.waitFor(o).next(()=>i)}getTargetCount(e){return R.resolve(this.targetCount)}getTargetData(e,t){const s=this.Br.get(t)||null;return R.resolve(s)}addMatchingKeys(e,t,s){return this.qr.mr(t,s),R.resolve()}removeMatchingKeys(e,t,s){this.qr.pr(t,s);const i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(c=>{o.push(i.markPotentiallyOrphaned(e,c))}),R.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.qr.yr(t),R.resolve()}getMatchingKeysForTargetId(e,t){const s=this.qr.Sr(t);return R.resolve(s)}containsKey(e,t){return R.resolve(this.qr.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa{constructor(e,t){this.Kr={},this.overlays={},this.$r=new ls(0),this.Ur=!1,this.Ur=!0,this.Wr=new Wh,this.referenceDelegate=e(this),this.Gr=new Zh(this),this.indexManager=new Lh,this.remoteDocumentCache=function(i){return new Jh(i)}(s=>this.referenceDelegate.zr(s)),this.serializer=new Oh(t),this.jr=new Kh(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Ur=!1,Promise.resolve()}get started(){return this.Ur}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Qh,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.Kr[e.toKey()];return s||(s=new Xh(t,this.referenceDelegate),this.Kr[e.toKey()]=s),s}getGlobalsCache(){return this.Wr}getTargetCache(){return this.Gr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.jr}runTransaction(e,t,s){D("MemoryPersistence","Starting transaction:",e);const i=new ed(this.$r.next());return this.referenceDelegate.Hr(),s(i).next(o=>this.referenceDelegate.Jr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Yr(e,t){return R.or(Object.values(this.Kr).map(s=>()=>s.containsKey(e,t)))}}class ed extends ju{constructor(e){super(),this.currentSequenceNumber=e}}class vs{constructor(e){this.persistence=e,this.Zr=new _s,this.Xr=null}static ei(e){return new vs(e)}get ti(){if(this.Xr)return this.Xr;throw L()}addReference(e,t,s){return this.Zr.addReference(s,t),this.ti.delete(s.toString()),R.resolve()}removeReference(e,t,s){return this.Zr.removeReference(s,t),this.ti.add(s.toString()),R.resolve()}markPotentiallyOrphaned(e,t){return this.ti.add(t.toString()),R.resolve()}removeTarget(e,t){this.Zr.yr(t.targetId).forEach(i=>this.ti.add(i.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.ti.add(o.toString()))}).next(()=>s.removeTargetData(e,t))}Hr(){this.Xr=new Set}Jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return R.forEach(this.ti,s=>{const i=M.fromPath(s);return this.ni(e,i).next(o=>{o||t.removeEntry(i,G.min())})}).next(()=>(this.Xr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ni(e,t).next(s=>{s?this.ti.delete(t.toString()):this.ti.add(t.toString())})}zr(e){return 0}ni(e,t){return R.or([()=>R.resolve(this.Zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Yr(e,t)])}}class Qn{constructor(e,t){this.persistence=e,this.ri=new st(s=>Lu(s.path),(s,i)=>s.isEqual(i)),this.garbageCollector=Hh(this,t)}static ei(e,t){return new Qn(e,t)}Hr(){}Jr(e){return R.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}Xn(e){const t=this.nr(e);return this.persistence.getTargetCache().getTargetCount(e).next(s=>t.next(i=>s+i))}nr(e){let t=0;return this.er(e,s=>{t++}).next(()=>t)}er(e,t){return R.forEach(this.ri,(s,i)=>this.ir(e,s,i).next(o=>o?R.resolve():t(i)))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.Lr(e,c=>this.ir(e,c,t).next(u=>{u||(s++,o.removeEntry(c,G.min()))})).next(()=>o.apply(e)).next(()=>s)}markPotentiallyOrphaned(e,t){return this.ri.set(t,e.currentSequenceNumber),R.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.ri.set(s,e.currentSequenceNumber),R.resolve()}removeReference(e,t,s){return this.ri.set(s,e.currentSequenceNumber),R.resolve()}updateLimboDocument(e,t){return this.ri.set(t,e.currentSequenceNumber),R.resolve()}zr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Vn(e.data.value)),t}ir(e,t,s){return R.or([()=>this.persistence.Yr(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.ri.get(t);return R.resolve(i!==void 0&&i>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Es{constructor(e,t,s,i){this.targetId=e,this.fromCache=t,this.Wi=s,this.Gi=i}static zi(e,t){let s=pe(),i=pe();for(const o of t.docChanges)switch(o.type){case 0:s=s.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new Es(e,t.fromCache,s,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class td{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nd{constructor(){this.ji=!1,this.Hi=!1,this.Ji=100,this.Yi=function(){return oc()?8:Ou(sc())>0?6:4}()}initialize(e,t){this.Zi=e,this.indexManager=t,this.ji=!0}getDocumentsMatchingQuery(e,t,s,i){const o={result:null};return this.Xi(e,t).next(c=>{o.result=c}).next(()=>{if(!o.result)return this.es(e,t,i,s).next(c=>{o.result=c})}).next(()=>{if(o.result)return;const c=new td;return this.ts(e,t,c).next(u=>{if(o.result=u,this.Hi)return this.ns(e,t,c,u.size)})}).next(()=>o.result)}ns(e,t,s,i){return s.documentReadCount<this.Ji?(ut()<=B.DEBUG&&D("QueryEngine","SDK will not create cache indexes for query:",Ut(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Ji,"documents"),R.resolve()):(ut()<=B.DEBUG&&D("QueryEngine","Query:",Ut(t),"scans",s.documentReadCount,"local documents and returns",i,"documents as results."),s.documentReadCount>this.Yi*i?(ut()<=B.DEBUG&&D("QueryEngine","The SDK decides to create cache indexes for query:",Ut(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ze(t))):R.resolve())}Xi(e,t){if(Qi(t))return R.resolve(null);let s=Ze(t);return this.indexManager.getIndexType(e,s).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=Wr(t,null,"F"),s=Ze(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next(o=>{const c=pe(...o);return this.Zi.getDocuments(e,c).next(u=>this.indexManager.getMinOffset(e,s).next(f=>{const g=this.rs(t,u);return this.ss(t,g,c,f.readTime)?this.Xi(e,Wr(t,null,"F")):this.os(e,g,t,f)}))})))}es(e,t,s,i){return Qi(t)||i.isEqual(G.min())?R.resolve(null):this.Zi.getDocuments(e,s).next(o=>{const c=this.rs(t,o);return this.ss(t,c,s,i)?R.resolve(null):(ut()<=B.DEBUG&&D("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ut(t)),this.os(e,c,t,Pu(i,-1)).next(u=>u))})}rs(e,t){let s=new ae(ih(e));return t.forEach((i,o)=>{ps(e,o)&&(s=s.add(o))}),s}ss(e,t,s,i){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}ts(e,t,s){return ut()<=B.DEBUG&&D("QueryEngine","Using full collection scan to execute query:",Ut(t)),this.Zi.getDocumentsMatchingQuery(e,t,Ue.min(),s)}os(e,t,s,i){return this.Zi.getDocumentsMatchingQuery(e,s,i).next(o=>(t.forEach(c=>{o=o.insert(c.key,c)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rd{constructor(e,t,s,i){this.persistence=e,this._s=t,this.serializer=i,this.us=new Ee($),this.cs=new st(o=>fs(o),ms),this.ls=new Map,this.hs=e.getRemoteDocumentCache(),this.Gr=e.getTargetCache(),this.jr=e.getBundleCache(),this.Ps(s)}Ps(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Gh(this.hs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.hs.setIndexManager(this.indexManager),this._s.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.us))}}function sd(n,e,t,s){return new rd(n,e,t,s)}async function ia(n,e){const t=q(n);return await t.persistence.runTransaction("Handle user change","readonly",s=>{let i;return t.mutationQueue.getAllMutationBatches(s).next(o=>(i=o,t.Ps(e),t.mutationQueue.getAllMutationBatches(s))).next(o=>{const c=[],u=[];let f=pe();for(const g of i){c.push(g.batchId);for(const T of g.mutations)f=f.add(T.key)}for(const g of o){u.push(g.batchId);for(const T of g.mutations)f=f.add(T.key)}return t.localDocuments.getDocuments(s,f).next(g=>({Ts:g,removedBatchIds:c,addedBatchIds:u}))})})}function id(n,e){const t=q(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const i=e.batch.keys(),o=t.hs.newChangeBuffer({trackRemovals:!0});return function(u,f,g,T){const I=g.batch,A=I.keys();let N=R.resolve();return A.forEach(V=>{N=N.next(()=>T.getEntry(f,V)).next(O=>{const k=g.docVersions.get(V);Y(k!==null),O.version.compareTo(k)<0&&(I.applyToRemoteDocument(O,g),O.isValidDocument()&&(O.setReadTime(g.commitVersion),T.addEntry(O)))})}),N.next(()=>u.mutationQueue.removeMutationBatch(f,I))}(t,s,e,o).next(()=>o.apply(s)).next(()=>t.mutationQueue.performConsistencyCheck(s)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(s,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(u){let f=pe();for(let g=0;g<u.mutationResults.length;++g)u.mutationResults[g].transformResults.length>0&&(f=f.add(u.batch.mutations[g].key));return f}(e))).next(()=>t.localDocuments.getDocuments(s,i))})}function od(n){const e=q(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Gr.getLastRemoteSnapshotVersion(t))}function ad(n,e){const t=q(n);return t.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}class no{constructor(){this.activeTargetIds=hh()}ps(e){this.activeTargetIds=this.activeTargetIds.add(e)}ys(e){this.activeTargetIds=this.activeTargetIds.delete(e)}gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class ld{constructor(){this._o=new no,this.ao={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this._o.ps(e),this.ao[e]||"not-current"}updateQueryState(e,t,s){this.ao[e]=t}removeLocalQueryTarget(e){this._o.ys(e)}isLocalQueryTarget(e){return this._o.activeTargetIds.has(e)}clearQueryState(e){delete this.ao[e]}getAllActiveQueryTargets(){return this._o.activeTargetIds}isActiveQueryTarget(e){return this._o.activeTargetIds.has(e)}start(){return this._o=new no,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cd{uo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ro{constructor(){this.co=()=>this.lo(),this.ho=()=>this.Po(),this.To=[],this.Io()}uo(e){this.To.push(e)}shutdown(){window.removeEventListener("online",this.co),window.removeEventListener("offline",this.ho)}Io(){window.addEventListener("online",this.co),window.addEventListener("offline",this.ho)}lo(){D("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.To)e(0)}Po(){D("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.To)e(1)}static p(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Sn=null;function jr(){return Sn===null?Sn=function(){return 268435456+Math.round(2147483648*Math.random())}():Sn++,"0x"+Sn.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ud={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hd{constructor(e){this.Eo=e.Eo,this.Ao=e.Ao}Ro(e){this.Vo=e}mo(e){this.fo=e}po(e){this.yo=e}onMessage(e){this.wo=e}close(){this.Ao()}send(e){this.Eo(e)}So(){this.Vo()}bo(){this.fo()}Do(e){this.yo(e)}vo(e){this.wo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fe="WebChannelConnection";class dd extends class{get Co(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const s=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Fo=s+"://"+t.host,this.Mo=`projects/${i}/databases/${o}`,this.xo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}Oo(t,s,i,o,c){const u=jr(),f=this.No(t,s.toUriEncodedString());D("RestConnection",`Sending RPC '${t}' ${u}:`,f,i);const g={"google-cloud-resource-prefix":this.Mo,"x-goog-request-params":this.xo};return this.Lo(g,o,c),this.Bo(t,f,g,i).then(T=>(D("RestConnection",`Received RPC '${t}' ${u}: `,T),T),T=>{throw Fn("RestConnection",`RPC '${t}' ${u} failed with error: `,T,"url: ",f,"request:",i),T})}ko(t,s,i,o,c,u){return this.Oo(t,s,i,o,c)}Lo(t,s,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+xt}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),s&&s.headers.forEach((o,c)=>t[c]=o),i&&i.headers.forEach((o,c)=>t[c]=o)}No(t,s){const i=ud[t];return`${this.Fo}/v1/${s}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Bo(e,t,s,i){const o=jr();return new Promise((c,u)=>{const f=new Co;f.setWithCredentials(!0),f.listenOnce(No.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case Pn.NO_ERROR:const T=f.getResponseJson();D(fe,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(T)),c(T);break;case Pn.TIMEOUT:D(fe,`RPC '${e}' ${o} timed out`),u(new j(C.DEADLINE_EXCEEDED,"Request time out"));break;case Pn.HTTP_ERROR:const I=f.getStatus();if(D(fe,`RPC '${e}' ${o} failed with status:`,I,"response text:",f.getResponseText()),I>0){let A=f.getResponseJson();Array.isArray(A)&&(A=A[0]);const N=A?.error;if(N&&N.status&&N.message){const V=function(k){const Q=k.toLowerCase().replace(/_/g,"-");return Object.values(C).indexOf(Q)>=0?Q:C.UNKNOWN}(N.status);u(new j(V,N.message))}else u(new j(C.UNKNOWN,"Server responded with status "+f.getStatus()))}else u(new j(C.UNAVAILABLE,"Connection failed."));break;default:L()}}finally{D(fe,`RPC '${e}' ${o} completed.`)}});const g=JSON.stringify(i);D(fe,`RPC '${e}' ${o} sending request:`,i),f.send(t,"POST",g,s,15)})}qo(e,t,s){const i=jr(),o=[this.Fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=Vo(),u=Po(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(f.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(f.useFetchStreams=!0),this.Lo(f.initMessageHeaders,t,s),f.encodeInitMessageHeaders=!0;const T=o.join("");D(fe,`Creating RPC '${e}' stream ${i}: ${T}`,f);const I=c.createWebChannel(T,f);let A=!1,N=!1;const V=new hd({Eo:k=>{N?D(fe,`Not sending because RPC '${e}' stream ${i} is closed:`,k):(A||(D(fe,`Opening RPC '${e}' stream ${i} transport.`),I.open(),A=!0),D(fe,`RPC '${e}' stream ${i} sending:`,k),I.send(k))},Ao:()=>I.close()}),O=(k,Q,K)=>{k.listen(Q,W=>{try{K(W)}catch(le){setTimeout(()=>{throw le},0)}})};return O(I,$t.EventType.OPEN,()=>{N||(D(fe,`RPC '${e}' stream ${i} transport opened.`),V.So())}),O(I,$t.EventType.CLOSE,()=>{N||(N=!0,D(fe,`RPC '${e}' stream ${i} transport closed`),V.Do())}),O(I,$t.EventType.ERROR,k=>{N||(N=!0,Fn(fe,`RPC '${e}' stream ${i} transport errored:`,k),V.Do(new j(C.UNAVAILABLE,"The operation could not be completed")))}),O(I,$t.EventType.MESSAGE,k=>{var Q;if(!N){const K=k.data[0];Y(!!K);const W=K,le=W?.error||((Q=W[0])===null||Q===void 0?void 0:Q.error);if(le){D(fe,`RPC '${e}' stream ${i} received error:`,le);const qe=le.status;let _e=function(y){const _=Z[y];if(_!==void 0)return Th(_)}(qe),E=le.message;_e===void 0&&(_e=C.INTERNAL,E="Unknown error status: "+qe+" with message "+le.message),N=!0,V.Do(new j(_e,E)),I.close()}else D(fe,`RPC '${e}' stream ${i} received:`,K),V.vo(K)}}),O(u,So.STAT_EVENT,k=>{k.stat===zr.PROXY?D(fe,`RPC '${e}' stream ${i} detected buffering proxy`):k.stat===zr.NOPROXY&&D(fe,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{V.bo()},0),V}}function Or(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nr(n){return new bh(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oa{constructor(e,t,s=1e3,i=1.5,o=6e4){this.li=e,this.timerId=t,this.Qo=s,this.Ko=i,this.$o=o,this.Uo=0,this.Wo=null,this.Go=Date.now(),this.reset()}reset(){this.Uo=0}zo(){this.Uo=this.$o}jo(e){this.cancel();const t=Math.floor(this.Uo+this.Ho()),s=Math.max(0,Date.now()-this.Go),i=Math.max(0,t-s);i>0&&D("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Uo} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.Wo=this.li.enqueueAfterDelay(this.timerId,i,()=>(this.Go=Date.now(),e())),this.Uo*=this.Ko,this.Uo<this.Qo&&(this.Uo=this.Qo),this.Uo>this.$o&&(this.Uo=this.$o)}Jo(){this.Wo!==null&&(this.Wo.skipDelay(),this.Wo=null)}cancel(){this.Wo!==null&&(this.Wo.cancel(),this.Wo=null)}Ho(){return(Math.random()-.5)*this.Uo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fd{constructor(e,t,s,i,o,c,u,f){this.li=e,this.Yo=s,this.Zo=i,this.connection=o,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=u,this.listener=f,this.state=0,this.Xo=0,this.e_=null,this.t_=null,this.stream=null,this.n_=0,this.r_=new oa(e,t)}i_(){return this.state===1||this.state===5||this.s_()}s_(){return this.state===2||this.state===3}start(){this.n_=0,this.state!==4?this.auth():this.o_()}async stop(){this.i_()&&await this.close(0)}__(){this.state=0,this.r_.reset()}a_(){this.s_()&&this.e_===null&&(this.e_=this.li.enqueueAfterDelay(this.Yo,6e4,()=>this.u_()))}c_(e){this.l_(),this.stream.send(e)}async u_(){if(this.s_())return this.close(0)}l_(){this.e_&&(this.e_.cancel(),this.e_=null)}h_(){this.t_&&(this.t_.cancel(),this.t_=null)}async close(e,t){this.l_(),this.h_(),this.r_.cancel(),this.Xo++,e!==4?this.r_.reset():t&&t.code===C.RESOURCE_EXHAUSTED?(tt(t.toString()),tt("Using maximum backoff delay to prevent overloading the backend."),this.r_.zo()):t&&t.code===C.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.P_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.po(t)}P_(){}auth(){this.state=1;const e=this.T_(this.Xo),t=this.Xo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,i])=>{this.Xo===t&&this.I_(s,i)},s=>{e(()=>{const i=new j(C.UNKNOWN,"Fetching auth token failed: "+s.message);return this.E_(i)})})}I_(e,t){const s=this.T_(this.Xo);this.stream=this.d_(e,t),this.stream.Ro(()=>{s(()=>this.listener.Ro())}),this.stream.mo(()=>{s(()=>(this.state=2,this.t_=this.li.enqueueAfterDelay(this.Zo,1e4,()=>(this.s_()&&(this.state=3),Promise.resolve())),this.listener.mo()))}),this.stream.po(i=>{s(()=>this.E_(i))}),this.stream.onMessage(i=>{s(()=>++this.n_==1?this.A_(i):this.onNext(i))})}o_(){this.state=5,this.r_.jo(async()=>{this.state=0,this.start()})}E_(e){return D("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}T_(e){return t=>{this.li.enqueueAndForget(()=>this.Xo===e?t():(D("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class md extends fd{constructor(e,t,s,i,o,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,i,c),this.serializer=o}get f_(){return this.n_>0}start(){this.lastStreamToken=void 0,super.start()}P_(){this.f_&&this.g_([])}d_(e,t){return this.connection.qo("Write",e,t)}A_(e){return Y(!!e.streamToken),this.lastStreamToken=e.streamToken,Y(!e.writeResults||e.writeResults.length===0),this.listener.p_()}onNext(e){Y(!!e.streamToken),this.lastStreamToken=e.streamToken,this.r_.reset();const t=Vh(e.writeResults,e.commitTime),s=ft(e.commitTime);return this.listener.y_(s,t)}w_(){const e={};e.database=Nh(this.serializer),this.c_(e)}g_(e){const t={streamToken:this.lastStreamToken,writes:e.map(s=>Ph(this.serializer,s))};this.c_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pd extends class{}{constructor(e,t,s,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=i,this.S_=!1}b_(){if(this.S_)throw new j(C.FAILED_PRECONDITION,"The client has already been terminated.")}Oo(e,t,s,i){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,c])=>this.connection.Oo(e,Jr(t,s),i,o,c)).catch(o=>{throw o.name==="FirebaseError"?(o.code===C.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new j(C.UNKNOWN,o.toString())})}ko(e,t,s,i,o){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,u])=>this.connection.ko(e,Jr(t,s),i,c,u,o)).catch(c=>{throw c.name==="FirebaseError"?(c.code===C.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new j(C.UNKNOWN,c.toString())})}terminate(){this.S_=!0,this.connection.terminate()}}class gd{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.D_=0,this.v_=null,this.C_=!0}F_(){this.D_===0&&(this.M_("Unknown"),this.v_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.v_=null,this.x_("Backend didn't respond within 10 seconds."),this.M_("Offline"),Promise.resolve())))}O_(e){this.state==="Online"?this.M_("Unknown"):(this.D_++,this.D_>=1&&(this.N_(),this.x_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.M_("Offline")))}set(e){this.N_(),this.D_=0,e==="Online"&&(this.C_=!1),this.M_(e)}M_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}x_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.C_?(tt(t),this.C_=!1):D("OnlineStateTracker",t)}N_(){this.v_!==null&&(this.v_.cancel(),this.v_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yd{constructor(e,t,s,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.L_=[],this.B_=new Map,this.k_=new Set,this.q_=[],this.Q_=o,this.Q_.uo(c=>{s.enqueueAndForget(async()=>{sn(this)&&(D("RemoteStore","Restarting streams for network reachability change."),await async function(f){const g=q(f);g.k_.add(4),await rn(g),g.K_.set("Unknown"),g.k_.delete(4),await rr(g)}(this))})}),this.K_=new gd(s,i)}}async function rr(n){if(sn(n))for(const e of n.q_)await e(!0)}async function rn(n){for(const e of n.q_)await e(!1)}function sn(n){return q(n).k_.size===0}async function aa(n,e,t){if(!tn(e))throw e;n.k_.add(1),await rn(n),n.K_.set("Offline"),t||(t=()=>od(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{D("RemoteStore","Retrying IndexedDB access"),await t(),n.k_.delete(1),await rr(n)})}function la(n,e){return e().catch(t=>aa(n,t,e))}async function sr(n){const e=q(n),t=He(e);let s=e.L_.length>0?e.L_[e.L_.length-1].batchId:-1;for(;_d(e);)try{const i=await ad(e.localStore,s);if(i===null){e.L_.length===0&&t.a_();break}s=i.batchId,vd(e,i)}catch(i){await aa(e,i)}ca(e)&&ua(e)}function _d(n){return sn(n)&&n.L_.length<10}function vd(n,e){n.L_.push(e);const t=He(n);t.s_()&&t.f_&&t.g_(e.mutations)}function ca(n){return sn(n)&&!He(n).i_()&&n.L_.length>0}function ua(n){He(n).start()}async function Ed(n){He(n).w_()}async function wd(n){const e=He(n);for(const t of n.L_)e.g_(t.mutations)}async function xd(n,e,t){const s=n.L_.shift(),i=ys.from(s,e,t);await la(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),await sr(n)}async function Td(n,e){e&&He(n).f_&&await async function(s,i){if(function(c){return xh(c)&&c!==C.ABORTED}(i.code)){const o=s.L_.shift();He(s).__(),await la(s,()=>s.remoteSyncer.rejectFailedWrite(o.batchId,i)),await sr(s)}}(n,e),ca(n)&&ua(n)}async function so(n,e){const t=q(n);t.asyncQueue.verifyOperationInProgress(),D("RemoteStore","RemoteStore received new credentials");const s=sn(t);t.k_.add(3),await rn(t),s&&t.K_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.k_.delete(3),await rr(t)}async function bd(n,e){const t=q(n);e?(t.k_.delete(2),await rr(t)):e||(t.k_.add(2),await rn(t),t.K_.set("Unknown"))}function He(n){return n.G_||(n.G_=function(t,s,i){const o=q(t);return o.b_(),new md(s,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Ro:()=>Promise.resolve(),mo:Ed.bind(null,n),po:Td.bind(null,n),p_:wd.bind(null,n),y_:xd.bind(null,n)}),n.q_.push(async e=>{e?(n.G_.__(),await sr(n)):(await n.G_.stop(),n.L_.length>0&&(D("RemoteStore",`Stopping write stream with ${n.L_.length} pending writes`),n.L_=[]))})),n.G_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ws{constructor(e,t,s,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=i,this.removalCallback=o,this.deferred=new Ye,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,i,o){const c=Date.now()+s,u=new ws(e,t,c,i,o);return u.start(s),u}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new j(C.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ha(n,e){if(tt("AsyncQueue",`${e}: ${n}`),tn(n))return new j(C.UNAVAILABLE,`${e}: ${n}`);throw n}class Id{constructor(){this.queries=io(),this.onlineState="Unknown",this.X_=new Set}terminate(){(function(t,s){const i=q(t),o=i.queries;i.queries=io(),o.forEach((c,u)=>{for(const f of u.J_)f.onError(s)})})(this,new j(C.ABORTED,"Firestore shutting down"))}}function io(){return new st(n=>qo(n),Ho)}function Ad(n){n.X_.forEach(e=>{e.next()})}var oo,ao;(ao=oo||(oo={})).na="default",ao.Cache="cache";class Rd{constructor(e,t,s,i,o,c){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=c,this.Ma={},this.xa=new st(u=>qo(u),Ho),this.Oa=new Map,this.Na=new Set,this.La=new Ee(M.comparator),this.Ba=new Map,this.ka=new _s,this.qa={},this.Qa=new Map,this.Ka=_t.Qn(),this.onlineState="Unknown",this.$a=void 0}get isPrimaryClient(){return this.$a===!0}}async function Cd(n,e,t){const s=Vd(n);try{const i=await function(c,u){const f=q(c),g=ne.now(),T=u.reduce((N,V)=>N.add(V.key),pe());let I,A;return f.persistence.runTransaction("Locally write mutations","readwrite",N=>{let V=zn(),O=pe();return f.hs.getEntries(N,T).next(k=>{V=k,V.forEach((Q,K)=>{K.isValidDocument()||(O=O.add(Q))})}).next(()=>f.localDocuments.getOverlayedDocuments(N,V)).next(k=>{I=k;const Q=[];for(const K of u){const W=_h(K,I.get(K.key).overlayedDocument);W!=null&&Q.push(new it(K.key,W,Oo(W.value.mapValue),Pe.exists(!0)))}return f.mutationQueue.addMutationBatch(N,g,Q,u)}).next(k=>{A=k;const Q=k.applyToLocalDocumentSet(I,O);return f.documentOverlayCache.saveOverlays(N,k.batchId,Q)})}).then(()=>({batchId:A.batchId,changes:Go(I)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(i.batchId),function(c,u,f){let g=c.qa[c.currentUser.toKey()];g||(g=new Ee($)),g=g.insert(u,f),c.qa[c.currentUser.toKey()]=g}(s,i.batchId,t),await ir(s,i.changes),await sr(s.remoteStore)}catch(i){const o=ha(i,"Failed to persist write");t.reject(o)}}function lo(n,e,t){const s=q(n);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const i=[];s.xa.forEach((o,c)=>{const u=c.view.ea(e);u.snapshot&&i.push(u.snapshot)}),function(c,u){const f=q(c);f.onlineState=u;let g=!1;f.queries.forEach((T,I)=>{for(const A of I.J_)A.ea(u)&&(g=!0)}),g&&Ad(f)}(s.eventManager,e),i.length&&s.Ma.R_(i),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function Nd(n,e){const t=q(n),s=e.batch.batchId;try{const i=await id(t.localStore,e);fa(t,s,null),da(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await ir(t,i)}catch(i){await as(i)}}async function Sd(n,e,t){const s=q(n);try{const i=await function(c,u){const f=q(c);return f.persistence.runTransaction("Reject batch","readwrite-primary",g=>{let T;return f.mutationQueue.lookupMutationBatch(g,u).next(I=>(Y(I!==null),T=I.keys(),f.mutationQueue.removeMutationBatch(g,I))).next(()=>f.mutationQueue.performConsistencyCheck(g)).next(()=>f.documentOverlayCache.removeOverlaysForBatchId(g,T,u)).next(()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,T)).next(()=>f.localDocuments.getDocuments(g,T))})}(s.localStore,e);fa(s,e,t),da(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await ir(s,i)}catch(i){await as(i)}}function da(n,e){(n.Qa.get(e)||[]).forEach(t=>{t.resolve()}),n.Qa.delete(e)}function fa(n,e,t){const s=q(n);let i=s.qa[s.currentUser.toKey()];if(i){const o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),s.qa[s.currentUser.toKey()]=i}}async function ir(n,e,t){const s=q(n),i=[],o=[],c=[];s.xa.isEmpty()||(s.xa.forEach((u,f)=>{c.push(s.Ua(f,e,t).then(g=>{var T;if((g||t)&&s.isPrimaryClient){const I=g?!g.fromCache:(T=void 0)===null||T===void 0?void 0:T.current;s.sharedClientState.updateQueryState(f.targetId,I?"current":"not-current")}if(g){i.push(g);const I=Es.zi(f.targetId,g);o.push(I)}}))}),await Promise.all(c),s.Ma.R_(i),await async function(f,g){const T=q(f);try{await T.persistence.runTransaction("notifyLocalViewChanges","readwrite",I=>R.forEach(g,A=>R.forEach(A.Wi,N=>T.persistence.referenceDelegate.addReference(I,A.targetId,N)).next(()=>R.forEach(A.Gi,N=>T.persistence.referenceDelegate.removeReference(I,A.targetId,N)))))}catch(I){if(!tn(I))throw I;D("LocalStore","Failed to update sequence numbers: "+I)}for(const I of g){const A=I.targetId;if(!I.fromCache){const N=T.us.get(A),V=N.snapshotVersion,O=N.withLastLimboFreeSnapshotVersion(V);T.us=T.us.insert(A,O)}}}(s.localStore,o))}async function Pd(n,e){const t=q(n);if(!t.currentUser.isEqual(e)){D("SyncEngine","User change. New user:",e.toKey());const s=await ia(t.localStore,e);t.currentUser=e,function(o,c){o.Qa.forEach(u=>{u.forEach(f=>{f.reject(new j(C.CANCELLED,c))})}),o.Qa.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await ir(t,s.Ts)}}function Vd(n){const e=q(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Nd.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Sd.bind(null,e),e}class Wn{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=nr(e.databaseInfo.databaseId),this.sharedClientState=this.za(e),this.persistence=this.ja(e),await this.persistence.start(),this.localStore=this.Ha(e),this.gcScheduler=this.Ja(e,this.localStore),this.indexBackfillerScheduler=this.Ya(e,this.localStore)}Ja(e,t){return null}Ya(e,t){return null}Ha(e){return sd(this.persistence,new nd,e.initialUser,this.serializer)}ja(e){return new sa(vs.ei,this.serializer)}za(e){return new ld}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Wn.provider={build:()=>new Wn};class Dd extends Wn{constructor(e){super(),this.cacheSizeBytes=e}Ja(e,t){Y(this.persistence.referenceDelegate instanceof Qn);const s=this.persistence.referenceDelegate.garbageCollector;return new Uh(s,e.asyncQueue,t)}ja(e){const t=this.cacheSizeBytes!==void 0?ve.withCacheSize(this.cacheSizeBytes):ve.DEFAULT;return new sa(s=>Qn.ei(s,t),this.serializer)}}class Zr{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>lo(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=Pd.bind(null,this.syncEngine),await bd(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new Id}()}createDatastore(e){const t=nr(e.databaseInfo.databaseId),s=function(o){return new dd(o)}(e.databaseInfo);return function(o,c,u,f){return new pd(o,c,u,f)}(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return function(s,i,o,c,u){return new yd(s,i,o,c,u)}(this.localStore,this.datastore,e.asyncQueue,t=>lo(this.syncEngine,t,0),function(){return ro.p()?new ro:new cd}())}createSyncEngine(e,t){return function(i,o,c,u,f,g,T){const I=new Rd(i,o,c,u,f,g);return T&&(I.$a=!0),I}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(i){const o=q(i);D("RemoteStore","RemoteStore shutting down."),o.k_.add(5),await rn(o),o.Q_.shutdown(),o.K_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}Zr.provider={build:()=>new Zr};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kd{constructor(e,t,s,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=i,this.user=me.UNAUTHENTICATED,this.clientId=ko.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(s,async c=>{D("FirestoreClient","Received user=",c.uid),await this.authCredentialListener(c),this.user=c}),this.appCheckCredentials.start(s,c=>(D("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ye;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=ha(t,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function Mr(n,e){n.asyncQueue.verifyOperationInProgress(),D("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let s=t.initialUser;n.setCredentialChangeListener(async i=>{s.isEqual(i)||(await ia(e.localStore,i),s=i)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function co(n,e){n.asyncQueue.verifyOperationInProgress();const t=await jd(n);D("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(s=>so(e.remoteStore,s)),n.setAppCheckTokenChangeListener((s,i)=>so(e.remoteStore,i)),n._onlineComponents=e}async function jd(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){D("FirestoreClient","Using user provided OfflineComponentProvider");try{await Mr(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(i){return i.name==="FirebaseError"?i.code===C.FAILED_PRECONDITION||i.code===C.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;Fn("Error using user provided cache. Falling back to memory cache: "+t),await Mr(n,new Wn)}}else D("FirestoreClient","Using default OfflineComponentProvider"),await Mr(n,new Dd(void 0));return n._offlineComponents}async function Od(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(D("FirestoreClient","Using user provided OnlineComponentProvider"),await co(n,n._uninitializedComponentsProvider._online)):(D("FirestoreClient","Using default OnlineComponentProvider"),await co(n,new Zr))),n._onlineComponents}function Md(n){return Od(n).then(e=>e.syncEngine)}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ma(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uo=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pa(n,e,t){if(!t)throw new j(C.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function Ld(n,e,t,s){if(e===!0&&s===!0)throw new j(C.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function ho(n){if(!M.isDocumentKey(n))throw new j(C.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function fo(n){if(M.isDocumentKey(n))throw new j(C.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function xs(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(s){return s.constructor?s.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":L()}function ga(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new j(C.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=xs(n);throw new j(C.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mo{constructor(e){var t,s;if(e.host===void 0){if(e.ssl!==void 0)throw new j(C.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new j(C.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Ld("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ma((s=e.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new j(C.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new j(C.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new j(C.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(s,i){return s.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class or{constructor(e,t,s,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new mo({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new j(C.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new j(C.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new mo(e),e.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new xu;switch(s.type){case"firstParty":return new Au(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new j(C.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const s=uo.get(t);s&&(D("ComponentProvider","Removing Datastore"),uo.delete(t),s.terminate())}(this),Promise.resolve()}}function Fd(n,e,t,s={}){var i;const o=(n=ga(n,or))._getSettings(),c=`${e}:${t}`;if(o.host!=="firestore.googleapis.com"&&o.host!==c&&Fn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},o),{host:c,ssl:!1})),s.mockUserToken){let u,f;if(typeof s.mockUserToken=="string")u=s.mockUserToken,f=me.MOCK_USER;else{u=rc(s.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);const g=s.mockUserToken.sub||s.mockUserToken.user_id;if(!g)throw new j(C.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new me(g)}n._authCredentials=new Tu(new Do(u,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Ts(this.firestore,e,this._query)}}class Ve{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Be(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ve(this.firestore,e,this._key)}}class Be extends Ts{constructor(e,t,s){super(e,t,nh(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ve(this.firestore,null,new M(e))}withConverter(e){return new Be(this.firestore,e,this._path)}}function Bd(n,e,...t){if(n=Kt(n),pa("collection","path",e),n instanceof or){const s=J.fromString(e,...t);return fo(s),new Be(n,null,s)}{if(!(n instanceof Ve||n instanceof Be))throw new j(C.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(J.fromString(e,...t));return fo(s),new Be(n.firestore,null,s)}}function Ud(n,e,...t){if(n=Kt(n),arguments.length===1&&(e=ko.newId()),pa("doc","path",e),n instanceof or){const s=J.fromString(e,...t);return ho(s),new Ve(n,null,new M(s))}{if(!(n instanceof Ve||n instanceof Be))throw new j(C.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(J.fromString(e,...t));return ho(s),new Ve(n.firestore,n instanceof Be?n.converter:null,new M(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class po{constructor(e=Promise.resolve()){this.Iu=[],this.Eu=!1,this.du=[],this.Au=null,this.Ru=!1,this.Vu=!1,this.mu=[],this.r_=new oa(this,"async_queue_retry"),this.fu=()=>{const s=Or();s&&D("AsyncQueue","Visibility state changed to "+s.visibilityState),this.r_.Jo()},this.gu=e;const t=Or();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.fu)}get isShuttingDown(){return this.Eu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.pu(),this.yu(e)}enterRestrictedMode(e){if(!this.Eu){this.Eu=!0,this.Vu=e||!1;const t=Or();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.fu)}}enqueue(e){if(this.pu(),this.Eu)return new Promise(()=>{});const t=new Ye;return this.yu(()=>this.Eu&&this.Vu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Iu.push(e),this.wu()))}async wu(){if(this.Iu.length!==0){try{await this.Iu[0](),this.Iu.shift(),this.r_.reset()}catch(e){if(!tn(e))throw e;D("AsyncQueue","Operation failed with retryable error: "+e)}this.Iu.length>0&&this.r_.jo(()=>this.wu())}}yu(e){const t=this.gu.then(()=>(this.Ru=!0,e().catch(s=>{this.Au=s,this.Ru=!1;const i=function(c){let u=c.message||"";return c.stack&&(u=c.stack.includes(c.message)?c.stack:c.message+`
`+c.stack),u}(s);throw tt("INTERNAL UNHANDLED ERROR: ",i),s}).then(s=>(this.Ru=!1,s))));return this.gu=t,t}enqueueAfterDelay(e,t,s){this.pu(),this.mu.indexOf(e)>-1&&(t=0);const i=ws.createAndSchedule(this,e,t,s,o=>this.Su(o));return this.du.push(i),i}pu(){this.Au&&L()}verifyOperationInProgress(){}async bu(){let e;do e=this.gu,await e;while(e!==this.gu)}Du(e){for(const t of this.du)if(t.timerId===e)return!0;return!1}vu(e){return this.bu().then(()=>{this.du.sort((t,s)=>t.targetTimeMs-s.targetTimeMs);for(const t of this.du)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.bu()})}Cu(e){this.mu.push(e)}Su(e){const t=this.du.indexOf(e);this.du.splice(t,1)}}class ya extends or{constructor(e,t,s,i){super(e,t,s,i),this.type="firestore",this._queue=new po,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new po(e),this._firestoreClient=void 0,await e}}}function $d(n,e){const t=typeof n=="object"?n:du(),s=typeof n=="string"?n:"(default)",i=lu(t,"firestore").getImmediate({identifier:s});if(!i._initialized){const o=tc("firestore");o&&Fd(i,...o)}return i}function Hd(n){if(n._terminated)throw new j(C.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||qd(n),n._firestoreClient}function qd(n){var e,t,s;const i=n._freezeSettings(),o=function(u,f,g,T){return new $u(u,f,g,T.host,T.ssl,T.experimentalForceLongPolling,T.experimentalAutoDetectLongPolling,ma(T.experimentalLongPollingOptions),T.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((s=i.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new kd(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(u){const f=u?._online.build();return{_offline:u?._offline.build(f),_online:f}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e){this._byteString=e}static fromBase64String(e){try{return new en(Ae.fromBase64String(e))}catch(t){throw new j(C.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new en(Ae.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _a{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new j(C.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new oe(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class va{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ea{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new j(C.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new j(C.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return $(this._lat,e._lat)||$(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wa{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,i){if(s.length!==i.length)return!1;for(let o=0;o<s.length;++o)if(s[o]!==i[o])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zd=/^__.*__$/;class Gd{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new it(e,this.data,this.fieldMask,t,this.fieldTransforms):new nn(e,this.data,t,this.fieldTransforms)}}function xa(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw L()}}class bs{constructor(e,t,s,i,o,c){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=i,o===void 0&&this.Fu(),this.fieldTransforms=o||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Mu(){return this.settings.Mu}xu(e){return new bs(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ou(e){var t;const s=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.xu({path:s,Nu:!1});return i.Lu(e),i}Bu(e){var t;const s=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.xu({path:s,Nu:!1});return i.Fu(),i}ku(e){return this.xu({path:void 0,Nu:!0})}qu(e){return Xn(e,this.settings.methodName,this.settings.Qu||!1,this.path,this.settings.Ku)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Fu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Lu(this.path.get(e))}Lu(e){if(e.length===0)throw this.qu("Document fields must not be empty");if(xa(this.Mu)&&zd.test(e))throw this.qu('Document fields cannot begin and end with "__"')}}class Kd{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||nr(e)}$u(e,t,s,i=!1){return new bs({Mu:e,methodName:t,Ku:s,path:oe.emptyPath(),Nu:!1,Qu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Qd(n){const e=n._freezeSettings(),t=nr(n._databaseId);return new Kd(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Wd(n,e,t,s,i,o={}){const c=n.$u(o.merge||o.mergeFields?2:0,e,t,i);Aa("Data must be an object, but it was:",c,s);const u=ba(s,c);let f,g;if(o.merge)f=new Ie(c.fieldMask),g=c.fieldTransforms;else if(o.mergeFields){const T=[];for(const I of o.mergeFields){const A=Xd(e,I,t);if(!c.contains(A))throw new j(C.INVALID_ARGUMENT,`Field '${A}' is specified in your field mask but missing from your input data.`);Zd(T,A)||T.push(A)}f=new Ie(T),g=c.fieldTransforms.filter(I=>f.covers(I.field))}else f=null,g=c.fieldTransforms;return new Gd(new be(u),f,g)}function Ta(n,e){if(Ia(n=Kt(n)))return Aa("Unsupported field value:",e,n),ba(n,e);if(n instanceof va)return function(s,i){if(!xa(i.Mu))throw i.qu(`${s._methodName}() can only be used with update() and set()`);if(!i.path)throw i.qu(`${s._methodName}() is not currently supported inside arrays`);const o=s._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Nu&&e.Mu!==4)throw e.qu("Nested arrays are not supported");return function(s,i){const o=[];let c=0;for(const u of s){let f=Ta(u,i.ku(c));f==null&&(f={nullValue:"NULL_VALUE"}),o.push(f),c++}return{arrayValue:{values:o}}}(n,e)}return function(s,i){if((s=Kt(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return dh(i.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const o=ne.fromDate(s);return{timestampValue:Xr(i.serializer,o)}}if(s instanceof ne){const o=new ne(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Xr(i.serializer,o)}}if(s instanceof Ea)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof en)return{bytesValue:Ih(i.serializer,s._byteString)};if(s instanceof Ve){const o=i.databaseId,c=s.firestore._databaseId;if(!c.isEqual(o))throw i.qu(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:na(s.firestore._databaseId||i.databaseId,s._key.path)}}if(s instanceof wa)return function(c,u){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:c.toArray().map(f=>{if(typeof f!="number")throw u.qu("VectorValues must only contain numeric values.");return gs(u.serializer,f)})}}}}}}(s,i);throw i.qu(`Unsupported field value: ${xs(s)}`)}(n,e)}function ba(n,e){const t={};return jo(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Tt(n,(s,i)=>{const o=Ta(i,e.Ou(s));o!=null&&(t[s]=o)}),{mapValue:{fields:t}}}function Ia(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof ne||n instanceof Ea||n instanceof en||n instanceof Ve||n instanceof va||n instanceof wa)}function Aa(n,e,t){if(!Ia(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){const s=xs(t);throw s==="an object"?e.qu(n+" a custom object"):e.qu(n+" "+s)}}function Xd(n,e,t){if((e=Kt(e))instanceof _a)return e._internalPath;if(typeof e=="string")return Yd(n,e);throw Xn("Field path arguments must be of type string or ",n,!1,void 0,t)}const Jd=new RegExp("[~\\*/\\[\\]]");function Yd(n,e,t){if(e.search(Jd)>=0)throw Xn(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new _a(...e.split("."))._internalPath}catch{throw Xn(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Xn(n,e,t,s,i){const o=s&&!s.isEmpty(),c=i!==void 0;let u=`Function ${e}() called with invalid data`;t&&(u+=" (via `toFirestore()`)"),u+=". ";let f="";return(o||c)&&(f+=" (found",o&&(f+=` in field ${s}`),c&&(f+=` in document ${i}`),f+=")"),new j(C.INVALID_ARGUMENT,u+n+f)}function Zd(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ef(n,e,t){let s;return s=n?n.toFirestore(e):e,s}function tf(n,e){const t=ga(n.firestore,ya),s=Ud(n),i=ef(n.converter,e);return nf(t,[Wd(Qd(n.firestore),"addDoc",s._key,i,n.converter!==null,{}).toMutation(s._key,Pe.exists(!1))]).then(()=>s)}function nf(n,e){return function(s,i){const o=new Ye;return s.asyncQueue.enqueueAndForget(async()=>Cd(await Md(s),i,o)),o.promise}(Hd(n),e)}(function(e,t=!0){(function(i){xt=i})(hu),Ln(new Qt("firestore",(s,{instanceIdentifier:i,options:o})=>{const c=s.getProvider("app").getImmediate(),u=new ya(new bu(s.getProvider("auth-internal")),new Cu(s.getProvider("app-check-internal")),function(g,T){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new j(C.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new $n(g.options.projectId,T)}(c,i),c);return o=Object.assign({useFetchStreams:t},o),u._setSettings(o),u},"PUBLIC").setMultipleInstances(!0)),dt(Fi,"4.7.5",e),dt(Fi,"4.7.5","esm2017")})();var rf="firebase",sf="11.1.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */dt(rf,sf,"app");const of={apiKey:void 0,authDomain:void 0,projectId:void 0,storageBucket:void 0,messagingSenderId:void 0,appId:void 0},af=bo(of),lf=$d(af),cf=()=>{const[n,e]=Je.useState({name:"",email:"",subject:"",message:""}),[t,s]=Je.useState(!1),[i,o]=Je.useState(null),c={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.2}}},u={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.6}}},f={y:[-10,10,-10],transition:{duration:3,repeat:1/0,repeatType:"reverse",ease:"easeInOut"}},g=N=>{const{name:V,value:O}=N.target;e(k=>({...k,[V]:O}))},T=async N=>{N.preventDefault(),s(!0),o(null);try{await tf(Bd(lf,"contacts"),{...n,timestamp:new Date().toISOString(),read:!1}),o("success"),e({name:"",email:"",subject:"",message:""})}catch(V){console.error("Error submitting form:",V),o("error")}finally{s(!1)}},I=[{icon:jn,title:"Email",content:"Henryagukwe01@gmail.com"},{icon:Al,title:"Phone",content:"+234 903 440 0634"},{icon:Rl,title:"Location",content:"Lagos, Nigeria"}],A=[{icon:Et,href:"https://github.com/Henryno111",label:"GitHub"},{icon:ts,href:"https://linkedin.com/in/agukwe-henry",label:"LinkedIn"},{icon:ns,href:"https://x.com/@boy_gene_us",label:"Twitter"}];return h.jsxs("div",{className:"min-h-screen bg-gray-950 p-6 sm:p-8 lg:p-16 relative overflow-hidden",children:[h.jsx("div",{className:"absolute inset-0 overflow-hidden",children:[...Array(5)].map((N,V)=>h.jsx(P.div,{className:"absolute w-32 h-32 bg-emerald-500/5 rounded-full",style:{left:`${Math.random()*100}%`,top:`${Math.random()*100}%`},animate:{scale:[1,1.2,1],opacity:[.3,.5,.3]},transition:{duration:3+V,repeat:1/0,repeatType:"reverse",ease:"easeInOut"}},V))}),h.jsxs(P.div,{variants:c,initial:"hidden",animate:"visible",className:"max-w-7xl mx-auto relative z-10",children:[h.jsxs(P.div,{className:"text-center mb-16",variants:u,children:[h.jsx("div",{className:"inline-block",children:h.jsxs(P.h1,{className:"text-4xl sm:text-5xl font-bold text-white mb-4 relative",animate:{scale:[1,1.02,1]},transition:{duration:2,repeat:1/0},children:["Get in Touch",h.jsx("span",{className:"text-emerald-500",children:"."}),h.jsx(P.div,{className:"absolute -right-4 -top-4 w-8 h-8 border-2 border-emerald-500/30 rounded-full",animate:{scale:[1,1.2,1],opacity:[.5,1,.5]},transition:{duration:2,repeat:1/0}})]})}),h.jsx(P.p,{className:"text-gray-400 text-lg max-w-2xl mx-auto",variants:u,children:"Let's discuss your project and explore how we can work together to bring your ideas to life."})]}),h.jsx(P.div,{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 mb-16",variants:c,children:I.map(N=>h.jsxs(P.div,{className:"group relative",variants:u,whileHover:{scale:1.02},children:[h.jsx(P.div,{className:"absolute inset-0 bg-emerald-500/10 rounded-lg blur-xl group-hover:bg-emerald-500/20 transition-colors duration-300",animate:f}),h.jsxs("div",{className:"bg-gray-900/80 backdrop-blur-sm border border-gray-800 rounded-lg p-8 relative hover:border-emerald-500 transition-colors duration-300",children:[h.jsx(P.div,{className:"w-16 h-16 bg-gray-800 rounded-2xl flex items-center justify-center mb-4 group-hover:bg-emerald-500/20 transition-colors duration-300",whileHover:{rotate:360},transition:{duration:.6},children:h.jsx(N.icon,{className:"w-8 h-8 text-emerald-500"})}),h.jsx("h3",{className:"text-2xl font-semibold text-white mb-2",children:N.title}),h.jsx("p",{className:"text-gray-400",children:N.content})]})]},N.title))}),h.jsxs(P.div,{variants:u,className:"bg-gray-900/80 backdrop-blur-sm rounded-lg p-8 border border-gray-800 relative overflow-hidden",children:[h.jsx(P.div,{className:"absolute inset-0",animate:{background:["linear-gradient(45deg, rgba(16, 185, 129, 0.1) 0%, transparent 100%)","linear-gradient(180deg, rgba(16, 185, 129, 0.1) 0%, transparent 100%)","linear-gradient(225deg, rgba(16, 185, 129, 0.1) 0%, transparent 100%)","linear-gradient(270deg, rgba(16, 185, 129, 0.1) 0%, transparent 100%)"]},transition:{duration:8,repeat:1/0,ease:"linear"}}),h.jsxs("div",{className:"relative z-10",children:[h.jsxs(P.h2,{className:"text-3xl font-bold text-white mb-8",variants:u,children:["Send Message",h.jsx("span",{className:"text-emerald-500",children:"."})]}),h.jsxs("form",{onSubmit:T,className:"space-y-6",children:[h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[h.jsxs(P.div,{variants:u,children:[h.jsxs("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-300 mb-2",children:[h.jsx(Cl,{className:"w-4 h-4 inline mr-2"}),"Name"]}),h.jsx("input",{type:"text",id:"name",name:"name",value:n.name,onChange:g,required:!0,className:"w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-lg text-white focus:border-emerald-500 focus:ring-2 focus:ring-emerald-500/20 transition-all duration-300",placeholder:"Your Name"})]}),h.jsxs(P.div,{variants:u,children:[h.jsxs("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-300 mb-2",children:[h.jsx(jn,{className:"w-4 h-4 inline mr-2"}),"Email"]}),h.jsx("input",{type:"email",id:"email",name:"email",value:n.email,onChange:g,required:!0,className:"w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-lg text-white focus:border-emerald-500 focus:ring-2 focus:ring-emerald-500/20 transition-all duration-300",placeholder:"your.email@example.com"})]})]}),h.jsxs(P.div,{variants:u,children:[h.jsxs("label",{htmlFor:"subject",className:"block text-sm font-medium text-gray-300 mb-2",children:[h.jsx(Nl,{className:"w-4 h-4 inline mr-2"}),"Subject"]}),h.jsx("input",{type:"text",id:"subject",name:"subject",value:n.subject,onChange:g,required:!0,className:"w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-lg text-white focus:border-emerald-500 focus:ring-2 focus:ring-emerald-500/20 transition-all duration-300",placeholder:"Project Discussion"})]}),h.jsxs(P.div,{variants:u,children:[h.jsx("label",{htmlFor:"message",className:"block text-sm font-medium text-gray-300 mb-2",children:"Message"}),h.jsx("textarea",{id:"message",name:"message",value:n.message,onChange:g,required:!0,rows:6,className:"w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-lg text-white focus:border-emerald-500 focus:ring-2 focus:ring-emerald-500/20 transition-all duration-300 resize-none",placeholder:"Tell me about your project..."})]}),h.jsxs(P.div,{variants:u,className:"flex flex-col sm:flex-row items-center justify-between gap-4",children:[h.jsxs(P.button,{type:"submit",disabled:t,whileHover:{scale:1.05},whileTap:{scale:.95},className:"bg-emerald-500 text-gray-900 px-8 py-3 rounded-lg font-semibold hover:bg-emerald-400 transition-colors duration-300 flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[h.jsx(Sl,{className:"w-5 h-5"}),t?"Sending...":"Send Message"]}),i==="success"&&h.jsx(P.p,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"text-emerald-500 text-sm",children:"Message sent successfully!"}),i==="error"&&h.jsx(P.p,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"text-red-500 text-sm",children:"Failed to send message. Please try again."})]})]})]})]}),h.jsxs(P.div,{className:"text-center mt-16",variants:u,children:[h.jsx("h3",{className:"text-2xl font-bold text-white mb-8",children:"Connect with me"}),h.jsx(P.div,{className:"flex justify-center space-x-6",variants:c,children:A.map(N=>h.jsxs(P.a,{href:N.href,target:"_blank",rel:"noopener noreferrer",variants:u,whileHover:{scale:1.1,rotate:360,transition:{duration:.6}},className:"w-12 h-12 border-2 border-gray-700 rounded-lg flex items-center justify-center text-gray-400 hover:text-emerald-500 hover:border-emerald-500 transition-colors duration-300 relative group",children:[h.jsx(P.div,{className:"absolute inset-0 bg-emerald-500/10 rounded-lg opacity-0 group-hover:opacity-100 transition-opacity duration-300",animate:f}),h.jsx(N.icon,{className:"w-6 h-6 relative z-10"})]},N.label))})]})]})]})},uf=()=>h.jsxs("div",{className:"min-h-screen",children:[h.jsx(Jn,{}),h.jsx("main",{className:"pt-16",children:h.jsx(cf,{})}),h.jsx(Yn,{})]}),hf=()=>h.jsx("div",{children:h.jsx(dl,{children:h.jsxs(fl,{children:[h.jsx(In,{path:"/",element:h.jsx(Bl,{})}),h.jsx(In,{path:"/projects",element:h.jsx(zl,{})}),h.jsx(In,{path:"/about",element:h.jsx($l,{})}),h.jsx(In,{path:"/contact",element:h.jsx(uf,{})})]})})}),Ra=document.getElementById("root");if(!Ra)throw new Error("Root element not found");Lr.createRoot(Ra).render(h.jsx(hl.StrictMode,{children:h.jsx(hf,{})}));
